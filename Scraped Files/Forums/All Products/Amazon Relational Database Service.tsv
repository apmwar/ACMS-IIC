label	description
Amazon Relational Database Service	"Clusters section in RDS is not visible
Hi there,
I have created an Amazon Aurora cluster and I want to see it's details. In the docs, they say that I can find that in the section ""Clusters"" of RDS.

In the left menu I just have:
Dashboard
Databases
Performance Insights
Snapshots
Automated backups
Reserved instances
Subnet groups
Parameter groups
Option groups
Events
Event subscriptions

I don't know why is not being displayed, because in ""Databases"" I can see the master and the read replica.

Many thanks in advance,
Victor.

Edited by: victornubapp on Feb 28, 2019 6:10 AM"
Amazon Relational Database Service	"MySQL RDS T3 Instances?
I see other databases like Oracle and MariaDB are supporting the new T3 instances. Any news on when MySQL RDS will have support for T3?"
Amazon Relational Database Service	"Re: MySQL RDS T3 Instances?
Check today. I saw t3 instances available just now even though I haven't seen an AWS announcement yet! :-O
(Specifically for MariaDB RDS instances.)

Edited by: Gethin on Feb 21, 2019 10:06 AM"
Amazon Relational Database Service	"Re: MySQL RDS T3 Instances?
Amazon RDS for MySQL and MariaDB Now Support T3 Instance Types. 

https://forums.aws.amazon.com/ann.jspa?annID=6601"
Amazon Relational Database Service	"Re: MySQL RDS T3 Instances?
Sure that was published...but as of 5 minutes ago, there were no instances available in us-east-1 for either t3-large or t3-medium; mysql 5.7.

Might be nice to actually have the instances available before you say it's ""supported""

dbm

Edited by: davidmcl-prostudio on Feb 23, 2019 7:32 AM... added mysql 5,7"
Amazon Relational Database Service	"Re: MySQL RDS T3 Instances?
Perhaps they're just extremely popular at the time you looked?  
A call to support could confirm if this is the case."
Amazon Relational Database Service	"Re: MySQL RDS T3 Instances?
I took a look at there is definitely capacity available for those instance types in us-east-1. Are you trying to launch in a specific AZ? If so, can you try another AZ or let the API select an AZ?

Brian"
Amazon Relational Database Service	"Re: MySQL RDS T3 Instances?
I'm not trying to launch a new instance.

It's an existing instance in us-east-1e; all I'm doing is a modify of the instance type.

There is no option to change availability zone, and I wouldn't want to anyway.

Still comes up with the same error, as of the date-time on the screenshot image.

Thanks,
David

Edited by: davidmcl-prostudio on Feb 25, 2019 6:10 PM ... that date/time is Central US"
Amazon Relational Database Service	"Re: MySQL RDS T3 Instances?
The T3 is a VPN-only instance family. If you try to convert a EC2-Classic network instance to a T3 you will get an insufficient capacity error because there are no EC2-Classic T3s available.  It’s a confusing error message to be sure, and I wish RDS would catch the EC2 error and return something more intelligent.

So, are you trying to convert something like a T1 EC2-Classic instance to the T3?"
Amazon Relational Database Service	"Re: MySQL RDS T3 Instances?
If you had bothered to look at the attached image, you would have seen that I was trying to modify a T2.large to a T3.large...both requiring VPC

dbm"
Amazon Relational Database Service	"Running util.checkForServerUpgrade on a RDS instance
Hi all!

We have not been able to find a way to run the util.checkForServerUpgrade() against an MySQL RDS instance ( https://dev.mysql.com/doc/mysql-shell/8.0/en/mysql-shell-utilities-upgrade.html ), as it errors out with:

 MySQL  JS > util.checkForServerUpgrade('root@rdsinstance.region.rds.amazonaws.com:3306', {""password"":""rootPassword"", ""targetVersion"":""8.0.11""})
Util.checkForServerUpgrade: The upgrade check needs to be performed by user with ALL privileges. (LogicError)


As the account we would need this ran on is under basic support plan, would we be able to request AWS to run this for us? 

Alternatively, is there a way to be able to run this command or does anyone know of an alternative?

Thank you"
Amazon Relational Database Service	"db.t3.medium (MariaDB RDS): No CloudWatch CPUCreditBalance?
We just switched over an RDS db.t2.medium to db.t3.medium. (https://forums.aws.amazon.com/ann.jspa?annID=6601)

Now there are no CloudWatch metrics for ""CPUCreditBalance"". When I look under CloudWatch metrics, RDS, database class (to see t2 vs t3 metrics) and sort by Metric Name, the only CPU thing I see for t3 is CPUUtilization. Aren't there supposed to be others for our db.t3.medium?

Resource id: db-QGAZYJJ7J5VFL44E5POFMOOCZU

Thanks."
Amazon Relational Database Service	"Re: db.t3.medium (MariaDB RDS): No CloudWatch CPUCreditBalance?
I've noticed the same issue with MySQL and Aurora instances that I've upgraded.  I also noticed that in the ""Configuration"" section of the instance in the RDS console, under ""Instance Class"", it says:

Instance class
db.t3.small
vCPU
-
RAM
undefined GB

I'm pretty sure vCPU and RAM should show actual numbers under them.  Does yours say something similar?  I think the new t3 RDS instance types are buggy."
Amazon Relational Database Service	"Re: db.t3.medium (MariaDB RDS): No CloudWatch CPUCreditBalance?
Pretty buggy indeed. Launched a t3.small, and the innodb_buffer_pool_size={DBInstanceClassMemory*3/4} default setting assigned 2GB for innodb, while it should have been 1.5GB. Something wrong here."
Amazon Relational Database Service	"Aurora cluster requires a system update?
I'm attempting to change an Aurora MySQL instance from a t2 to a t3 instance type, and I'm getting this message:

DB cluster rds-log-01-cluster requires a system update for instance(s) rds-log-01 to support db.t3.small (Service: AmazonRDS; Status Code: 400; Error Code: InvalidParameterCombination; Request ID: f3398b41-656f-4f38-bb0a-fe0335497a96)

I've clicked ""upgrade now"" on the cluster, but even after the upgrade I still get the above message.  Is this something that needs to be resolved on Amazon's side?  This is in us-west-2.

Edited by: mattdns on Feb 27, 2019 9:38 PM"
Amazon Relational Database Service	"Re: Aurora cluster requires a system update?
I resolved this.  Under ""recommendations"", my cluster was listed under ""Pending maintenance available"".  I clicked the cluster, then clicked ""apply now"".  After the cluster updated, my instance was showing in ""Pending maintenance available"".  I clicked the instance, then clicked ""apply now"".  After the instance was finished with its maintenance, I was able to switch it to a t3 instance type."
Amazon Relational Database Service	"Mysql instance stuck on modifying after changing option group
Hello.
We just changed an option group to an rds instance to enable MARIADB_AUDIT_PLUGIN.

Plugin was installed immediately, but instance is still in modifying after an hour and we cannot change parameters in option group because it state is still been applied to the instance.

Not even reboot the instance is possible: the only command available is delete.

What can we do?

thank you."
Amazon Relational Database Service	"Re: Mysql instance stuck on modifying after changing option group
Hello rmenti,

Our internal monitoring noticed this problem and an AWS engineer fixed it. This is a known issue when enabling MariaDB Audit Plugin on older versions of RDS MySQL 5.6.34.

My recommendation is to upgrade your instance to a more recent version of RDS MySQL 5.6 or to create a new instance of 5.6.34 as newer instances running 5.6.34 will not hit this problem.

Regards,
Jaime"
Amazon Relational Database Service	"How to Stabilize Aurora (MySQL) DB/ Cluster Endpoints via CloudFormation
.

Edited by: SanjayaB on Feb 27, 2019 4:25 PM"
Amazon Relational Database Service	"connect to RDS using any scp
How can I to connect to RDS using any scp or ssh client?.
We need to get a file within a database directory"
Amazon Relational Database Service	"Re: connect to RDS using any scp
ssh, scp?  No.
There might be options available, it depends on the db engine you're using."
Amazon Relational Database Service	"Re: connect to RDS using any scp
We need to get a file within a database directory, we have Oracle database"
Amazon Relational Database Service	"Re: connect to RDS using any scp
For Oracle, read about an example of using DBMS_FILE_TRANSFER.PUT_FILE here:
https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Oracle.Procedural.Importing.html

Step 4: Create a database link to the target DB instance
Step 5: Use DBMS_FILE_TRANSFER to copy the exported dump file to the target DB instance

You can use get_file in the same way as put_file.

Hope that helps,

M"
Amazon Relational Database Service	"CAUTION: Don't rely on Security Group to access control connectivity to RDS
Today to do some maintenance of upstream applications we had to cut down all access to RDS.

Three ways was to:
1. Stop DB Instance
2. Modify DB Security Group
3. Control at application level

We chose 2nd method and modified security group which doesn't have any inbound rules. Just empty.
What we realized was our application was still able to access database. We waited for 15 mins to give some time to propagate rules internally. But nope. We proceeded to stop the DB Instance altogether and continued with our jobs.

Just to be curious, I tried the same thing with our other application stack in test environment, same result."
Amazon Relational Database Service	"MySQL - General and Slow query logs not being written
Hi,

I'm using the same MySQL parameter group for both production and staging instances. The parameter group has:


log_output = FILE
slow_query_log = 1
long_query_time = 0.1


I can see general and slow query logs being written for the staging instance but no sign of them on the production instance. Even tried using AWS CLI, no results either:

aws rds describe-db-log-files --db-instance-identifier <instance> --filename-contains slow


I'm sure there are slow queries on the production instance. Even tried ""SELECT SLEEP(5)"" to force it to show up.

Has anyone experienced this before?

Thanks!"
Amazon Relational Database Service	"AWS Aurora MySQL query optimizer bug
In a simple query between one table and a look up table with 6 rows, the Aurora query optimizer will not choose the PRIMARY key of the lookup table without a FORCE INDEX.  I confirmed that the column data types match, and the collation matches.

Without FORCE INDEX:
mysql> EXPLAIN SELECT `u`.`user_id`, `u`.`user_name`, `f`.`lookup_name`  FROM `user` AS `u`  JOIN `lookup` AS `f` USING (lookup_id) WHERE u.user_id IN(115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157)\G





















































1. row ***************************





















































           id: 1
  select_type: SIMPLE
        table: u
         type: range
possible_keys: PRIMARY,fk_lookup_id
          key: PRIMARY
      key_len: 4
          ref: NULL
         rows: 43
        Extra: Using where





















































2. row ***************************





















































           id: 1
  select_type: SIMPLE
        table: f
         type: ALL
possible_keys: PRIMARY
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 6
Extra: Using where; Using join buffer (Block Nested Loop)
2 rows in set (0.00 sec)

With the FORCE INDEX

mysql> EXPLAIN SELECT `u`.`user_id`, `u`.`user_name`, `f`.`lookup_name`  FROM `user` AS `u`  JOIN `lookup` AS `f` FORCE INDEX (PRIMARY) USING (lookup_id) WHERE u.user_id IN(115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157)\G






















































1. row ***************************





















































           id: 1
  select_type: SIMPLE
        table: u
         type: range
possible_keys: PRIMARY,fk_lookup_id
          key: PRIMARY
      key_len: 4
          ref: NULL
         rows: 43
        Extra: Using where





















































2. row ***************************





















































           id: 1
  select_type: SIMPLE
        table: f
         type: eq_ref
possible_keys: PRIMARY
key: PRIMARY
      key_len: 4
          ref: db.u.lookup_id
         rows: 1
        Extra: NULL
2 rows in set (0.00 sec)"
Amazon Relational Database Service	"How to  tag Aurora:StorageIOUsage
When i group by TagKey in Cost Explorer, some cost show by tag ""No Tagkey"".
I found most that cost(""No Tagkey"") is Aurora:StorageIOUsage.
How to tag Aurora:StorageIOUsage?
Thanks!"
Amazon Relational Database Service	"Re: How to  tag Aurora:StorageIOUsage
This is affecting our account as well. It would be nice to be able to tag this. 

Thanks
D"
Amazon Relational Database Service	"Re: How to  tag Aurora:StorageIOUsage
At my company we are interested as well to tag these StorageIOUsage.

Is there any way to do this now?

Thanks"
Amazon Relational Database Service	"Aurora MySQL 5.7 read replica cluster not scaling in
I have configured aurora read replica auto scaling on my RDS cluster with a target average cpu utilisation of 60%, scale in enabled and a scale in/out period of 300 seconds. The minimum capacity of the cluster is 1 and the maximum is 2

The replicas scale out just fine, although the auto scaling activity always fails with Tried to add read replica(s) <ID>. Failed to determine if read replica(s) have been added by rds. Reason: One or more of the created DB instances transitioned to states other than 'available'. even though the replica works

However the replicas never get removed, once auto scaling adds one it sits there forever, I suspect this is to do with the fact RDS thinks the replica failed to add, but I have no idea how to fix it. The closest I've found as a cause is table locks but I need to use table locks in my application and it needs to scale during the hours it's used the most

How do I get it to scale in properly and/or successfully complete the scaling activity?"
Amazon Relational Database Service	"Re: Aurora MySQL 5.7 read replica cluster not scaling in
We are seeing the same behaviour, did you mange to resolve it?"
Amazon Relational Database Service	"serverless aurora in modifying state since over 2 days
I changed the DB cluster group parameter, and since then the aurora serverless cluster is in modifying state ever since. How long this is supposed to take? Is a time over 2 days normal?

ARN: arn:aws:rds:eu-central-1:259774446718:cluster:szene1-db

Thanks
Simon"
Amazon Relational Database Service	"Oracle RDS - r5 reserved instances
When Oracle RDS r5 reserved instances will be available?"
Amazon Relational Database Service	"Re: Oracle RDS - r5 reserved instances
Hello,

The R5  instance is currently not available in RDS Reserved Instances, though it is in the road map. We are working on this to make this available, but as of now we have no confirmed dates or timeline for when it will be available in RDS.

Kindly find below useful Links for Reserved Instances:

https://aws.amazon.com/rds/reserved-instances/
https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_WorkingWithReservedDBInstances.html

Thanks,
Yogesh Pingle."
Amazon Relational Database Service	"Can't delete a database
Hi all,

I tried to delete one of my RDS databases that I don't need anymore. I disabled 'Deletion Protection'. However, after I typed 'delete me' in the field, the 'DELETE' button was still grayed out, meaning I can't click it to finish deleting. What did I miss here? You can check a screenshot here:https://s3.amazonaws.com/valueless-treasure-box/cant_delete_rds.gif

BTW, there's a little UI issue for the scroll bar as you can see from the screenshot.

Thanks so much for the help."
Amazon Relational Database Service	"Re: Can't delete a database
You need to click the “I acknowledge...” box"
Amazon Relational Database Service	"Re: Can't delete a database
Hello,

In order to delete the RDS instance, you need to click on the check box for the below given message.

""I acknowledge that upon instance deletion, automated backups, including system snapshots and point-in-time recovery, will no longer be available""

Once you have selected the check box, then you will be able to delete the RDS instance. 

Thanks,
Yogesh Pingle."
Amazon Relational Database Service	"RDS is stuck in creating status
This happened to my ""dev"" database after starting a snapshot clone. Is there some way to stop them?"
Amazon Relational Database Service	"Re: RDS is stuck in creating status
Hello,

As I can see that you are concerned about the RDS DB instance been stuck while performing a clone. To answer, there is no way to interrupt the cloning process. I am assuming you are using Aurora DB instance and performing a clone.

Thus, in the future, to avoid/ mitigate this kind of issue, it might be best to initiate clone creation when the activity on the source DB instance is minimal.

To help you further, Please provide me with the below details
Account ID : 
Region : 
Instance Name : 

Note : Send the above information as private message. 

Thanks,
Yogesh Pingle"
Amazon Relational Database Service	"aurora serverless startup time after pause
I have a lambda that connects to a provisioned aurora database which is all in a vpc.  It was taking approximately 10 seconds on a lambda cold start for a query to be completed.  I had thought (hoping) that aurora serverless (AS) would solve this problem so when it came out I eagerly tried it out.  I hooked it up to my test lambda and hit Test.  And not much happened till 25 seconds later.  Subsequent tests appear to have comparable performance with a provisioned aurora instance.  However this seems unsuitable to use for a web application or a rest endpoint?  What is the generally accepted best practise?  there is an option to not pause AS after 5 minutes of inactivity but that seems to be missing the point of serverless.  I guess there is the autoscaling benefits and costs seem roughly comparable to a provisioned aurora instance?
Any guidance here would be appreciated."
Amazon Relational Database Service	"Re: aurora serverless startup time after pause
It would seem by turning off the pause function, it will take the same roughly 10 seconds for a normal aurora instance."
Amazon Relational Database Service	"Re: aurora serverless startup time after pause
yeah, same issue here. looks like the pause function is not a real option for a rest endpoint or a web ""server"". so you're ending up with 2 units running 24/7. that's about a $100 fee per month to get a response time less than 25s. not ideal."
Amazon Relational Database Service	"Re: aurora serverless startup time after pause
We are working on improving the time it takes to start from a paused state. If your load is spread out a bit more, you can configure a longer time than 5 minutes before it pauses again. We definitely understand that 25 seconds is not workable for some applications. 

Brian"
Amazon Relational Database Service	"Re: aurora serverless startup time after pause
Hi Brian

Is there's any possibility to improve to the time to <1s from a paused state to a up and running state in the near future (1y)? I'm asking because of there's no use for aurora serverless for web API cases if the latency is >2s unless you have 2 units running 24/7.

Thanks
Andy

Edited by: andy-S on Aug 21, 2018 10:44 AM"
Amazon Relational Database Service	"Re: aurora serverless startup time after pause
That fast seems very unlikely given the Aurora Serverless architecture.  It is not multitenant at the head node.  On first connect it will allocate a server from a pool, which is fast.  But then it has to go through the ""open"" of the database on that head node.  Think of it like starting the MySQL server on your local system.  So it likely takes several seconds even with more optimization.  The pause feature as described is for environments like development and test, where there is no use over long periods of time but then a developer shows up in the morning and starts work.  That initial access may take 30 seconds, then they work through the day, and some time after they go home Aurora Serverless pauses again.  Or maybe it pauses a few times during the day since the developer is focused elsewhere, but can tolerate the pause when they return to needing database services.  It isn't made to handle real-time requests from a general website, bouncing up and down between those requests.

Are there other variations that would help?  For example, some kind of pre-start capability?  Say you know that your website is never accessed from 11PM to 4AM.  It seems quite practical to add a feature that would pre-start the head node at 3:59AM.  The prioritization of such a feature no doubt depends on how many people are asking for it.  Or perhaps you can look at some kind of ""pre-touch"" in your application to get the database up and running before you need to make a user-visible database request.

The other option would be for AWS to introduce an alternate pricing model such as per-request pricing.  But my guess is that, again given the current architecture, if you wanted very low initial request latency there would be a per-request minimum per day that basically was equivalent to running 2 units 24 hours a day.

Aurora (both Serverless and regular) could really use a ""1 Unit"" offering.  That likely requires some different underlying hardware then is in use today.  I have no idea if they are working on that, and if they are then what the timeframe is."
Amazon Relational Database Service	"Re: aurora serverless startup time after pause
I came here by searching for Aurora Serverless startup times. I'm aiming for a fully auto-scaling, serverless stack using Zeit Now for the app layer, and was hoping to use Aurora for the DB layer. However, if those are the startup times for instances, it's not feasible. 

The  announcement post (https://aws.amazon.com/blogs/aws/in-the-works-amazon-aurora-serverless/) says

This allows your connections to remain intact even as scaling operations take place behind the scenes. Scaling is rapid, with new resources coming online within 5 seconds

But maybe that's just for the scaling of additional instances, and not when coming from a paused state? If that's the case, then the base cost of an Amazon Aurora database, provisioned or serverless, will always be above 100USD, correct?"
Amazon Relational Database Service	"Re: aurora serverless startup time after pause
I agree cold starts to AS is a pita.

But that’s said all RDBMS are such a bad fit with lambda based apps. The state fullness in connection pools make it an anti pattern to use lambda and rdbms. Also the need to deploy in Vpc to get to the dB makes it a bad fit.

With Serverless you really do best in going with dynamo which is an amazing db.

Aurora Serverless has its sweet spot in dev and test environments where you have server or container based legacy. In this case you can easily have a heat up endpoint which can be used before testing."
Amazon Relational Database Service	"Re: aurora serverless startup time after pause
How on earth do I connect to this marvelous thing called ""Aurora Serverless""????

Yes, Ive followed the tutorial. Yes, I cannect from Cloud9 instance. But how do connect from the Internet, the 'real' world????"
Amazon Relational Database Service	"Re: aurora serverless startup time after pause
it appears that currently you have to use direct connect for that."
Amazon Relational Database Service	"RDS Oracle SE1 audit logs never deleted
Hi all,
I've got an instance of Oracle SE One on which I enabled the Audit Trail in its XML,EXTENDED version. It's now one month and a half since I enabled these logs and all of them are still there, none was deleted. I suppose sooner or later the instance will run out of free space...
From the docs (http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_LogAccess.Concepts.Oracle.html) I read ""You can access Oracle alert logs, audit files, and trace files by using the Amazon RDS console or APIs. These files are retained for seven days by default.""
May there be a setting that it's preventing the deletion of the logs after 7 days? Did any of you encounter this problem?
Thanks. Cheers,
beto"
Amazon Relational Database Service	"Re: RDS Oracle SE1 audit logs never deleted
Hi Beto,

We are aware that in some cases, the XML audit trail is not being properly maintained on RDS Oracle instances. We do not currently have an estimate for when that will be fixed.

You can view the current files (and their sizes) in your audit destination using the query below (for more information, please refer to the RDS User Guide).

SELECT * FROM table(rdsadmin.rds_file_util.listdir('ADUMP')) 


For now, you can manage the audit trail using the DBMS_AUDIT_MGMT package. In addition to Oracle's documentation, there are some helpful tutorials on the Web, and I have provided a few examples below.

Hope this helps.

Thanks!
Michael



Initialize audit trail cleanup and set default cleanup interval.
begin
  dbms_audit_mgmt.init_cleanup (
    audit_trail_type => dbms_audit_mgmt.audit_trail_xml,
    default_cleanup_interval => 24 /* daily */
  );
end;
/ 


To manually purge files older than 30 days, flag them as archived with the set_last_archive_timestamp procedure and delete them with the clean_audit_trail procedure. To reduce load on your database, you may want to avoid deleting a large number of files at once. For example, to reduce retention from 40 days down to 30: flag and purge files older than 39 days first, evaluate andy performance impact, then flag files older than 38 days, etc.
begin
  dbms_audit_mgmt.set_last_archive_timestamp (
    audit_trail_type => dbms_audit_mgmt.audit_trail_xml,
    last_archive_time => sysdate-30
  );
end;
/ 
 
select * from dba_audit_mgmt_last_arch_ts;
 
begin
  dbms_audit_mgmt.clean_audit_trail (
    audit_trail_type => dbms_audit_mgmt.audit_trail_xml,
    use_last_arch_timestamp => true
  );
end;
/ 


To automatically purge files, you can use the create_purge_job procedure. Note that this just creates a scheduler job that calls clean_audit_trail and relies on the ""last archived timestamp"" - if the set_last_archive_timestamp procedure is not called periodically, the job will run and find no files to purge. You can set the timestamp either manually after analyzing and archiving audit files, or you can use the DBMS_SCHEDULER package to create a job that will automatically set the timestamp at a particular interval.
begin
  dbms_audit_mgmt.create_purge_job (
    audit_trail_type => dbms_audit_mgmt.audit_trail_xml,
    audit_trail_purge_interval => 24 /* daily */,
    audit_trail_purge_name => 'purge_xml_audit_trail',
    use_last_arch_timestamp => true 
  );
end;
/ 


Helpful views.
select * from dba_audit_mgmt_cleanup_jobs;
select * from dba_audit_mgmt_clean_events;
select * from dba_audit_mgmt_config_params order by parameter_name,audit_trail;


Edited by: MichaelB@AWS on Jun 29, 2016 11:48 AM"
Amazon Relational Database Service	"Re: RDS Oracle SE1 audit logs never deleted
Hi Michael,
thanks for the info.
It looks like the DBA user which was created at instance creation time hasn't got the EXECUTE privilege on the dbms_audit_mgmt package, so we can't execute any of these procedures.
We get this error:
Error(4,25): PLS-00201: identifier 'DBMS_AUDIT_MGMT.AUDIT_TRAIL_XML' must be declared
Is there any other way? Or is it otherwise possible to grant the EXECUTE privilege to the user?
Thanks again.
Best regards,
beto"
Amazon Relational Database Service	"Re: RDS Oracle SE1 audit logs never deleted
Hi Michael,
I found a solution, all that was needed was to prefix the package name with SYS, like this:

CREATE OR REPLACE PROCEDURE ARCHIVE_XML_AUDIT_TRAIL AS 
BEGIN
SYS.DBMS_AUDIT_MGMT.SET_LAST_ARCHIVE_TIMESTAMP (
audit_trail_type => SYS.DBMS_AUDIT_MGMT.AUDIT_TRAIL_XML,
last_archive_time => sysdate-30
);
SYS.DBMS_AUDIT_MGMT.CLEAN_AUDIT_TRAIL (
audit_trail_type => SYS.DBMS_AUDIT_MGMT.AUDIT_TRAIL_XML,
use_last_arch_timestamp => true
);
END ARCHIVE_XML_AUDIT_TRAIL;

Thanks again.
Cheers,
beto"
Amazon Relational Database Service	"Re: RDS Oracle SE1 audit logs never deleted
Does this issue still exist? My case is RDS Oracle EE. I have over one million files in ""ADUMP"" directory. I frequently receive errors when I log on - unable to write audit trails. I had to disable audit. 

Another question, in DBA_DIRECTORIES, ADUMP points to /rdsdbdata/log/audit, while parameter audit_file_dest points to /rdsdbdata/admin/<SID>/adump. Why are they different?

Thanks,
Gary"
Amazon Relational Database Service	"Capture slow queries on Aurora POSTGRES (10.4)
Is there any way to capture slow queries on Aurora postgres? We have enabled log_statement  to ALL and log_min_duration_statement to 1 but the logs are not getting updated. There is no option for slow query log as well.

Please let me know how to log the slow queries?"
Amazon Relational Database Service	"RDS MSSQL Express - User has no access to model database
Hi everyone,

I've just deployed a MSSQL Express single AZ instance. Everything works fine and I can connect to the instance via VPN. But when I want to access the model database it says ""The server principal ""<username>"" is not able to access the database ""model"" under the current security context."" 

The user I use for this is the one I specified at creation time. I tried to destroy and re-deploy the instance mutliple times. I used server 2016 instead of 2017 and so one, but nothing works. The things is: the application I want to use needs access to the model database (just reading). 

Can anyone help? I would really appreciate.

Kind regards,
Robin"
Amazon Relational Database Service	"Duplicate Key error when editing an RDS Event Subscription
When attempting to edit an event subscription in RDS in the AWS Console, I am seeing a javascript error saying.

java.lang.IllegalArgumentException duplicate key

It's referring to an RDS snapshot.  The edit page does not load - just a spinning load indicator.   I can provide the account info via PM if needed.

Edited by: proca on Feb 26, 2019 9:05 AM"
Amazon Relational Database Service	"Amazon Aurora MySQL Limit connections
How to bypass the maximum number of simultaneous connections (45) to RDS Aurora for an instance of t2.small without scaling the server? When the max_connection parameter is changed in the option group, upon reaching 45 connections, the database still drops the connections."
Amazon Relational Database Service	"PostgreSQL RDS: unable to clean up temp files after crashed CLUSTER command
I have a pretty big table In PostgreSQL RDS: ~40 GB table + ~20 GB index. Originally the total size of the database was roughly the sum of all tables + indexes in all schemas, roughly 90 GB. I tried running CLUSTER command on the primary key index of that table but it crashed because of ""SYSCALL error: EOF detected"" - the instance ran out of storage. After the crash, the database size grew to 139 GB even though none of the tables changed their size, so it seems like the temp files generated by CLUSTER never got cleaned up but somehow are counted towards the db size.

I tried rebooting the instance, hoping it might clean up old temp files on startup, but it didn't. I dropped the big table, ran VACUUM (FULL, ANALYZE) on the entire database, but it also didn't help with the space issue. From all of my search I just need to manually delete old temporary files in pgsql_tmp directory but of course I can't do that in RDS. 

Here is a query I ran to check the size of all relations in every schema I have:

SELECT schema_name, 
       pg_size_pretty(sum(table_size)::bigint),
       (sum(table_size) / pg_database_size(current_database())) * 100 as pct
FROM (
  SELECT pg_catalog.pg_namespace.nspname as schema_name,
         pg_total_relation_size(pg_catalog.pg_class.oid) as table_size
  FROM   pg_catalog.pg_class
     JOIN pg_catalog.pg_namespace ON relnamespace = pg_catalog.pg_namespace.oid
) t
GROUP BY schema_name
ORDER BY pct DESC;

Here are the top five results:

    schema_name     | pg_size_pretty |            pct
--------------------+----------------+----------------------------
 redacted               | 92 GB          |    59.81688134533876064400
 redacted           | 21 GB          |    13.30520646683275401000
 redacted      | 4819 MB        |     3.&ltAccess Key Removed>
 redacted            | 1706 MB        |     1.&ltAccess Key Removed>
 redacted      | 1537 MB        |     0.97068013145705134000

And the sum of pct in all rows is 79.77%, so my guess is the remaining 20.33% of the database size is those temp files.

Should there be some way of fixing this, either through the AWS web console, or some kind of cron job that would clean up old temp files regularly? As it is I have roughly 30 GB of ""dead weight"" that keeps getting backed up and counted towards my storage quota.

Edited by: abmimaps on Feb 21, 2019 2:31 PM

Edited by: abmimaps on Feb 21, 2019 2:32 PM"
Amazon Relational Database Service	"Re: PostgreSQL RDS: unable to clean up temp files after crashed CLUSTER command
Hi 

Thank you for contacting us. Here is Vinícius from AWS, at RDS PostgreSQL support. 

I understand that you were running CLUSTER command (which reconstruct the table physically creating another datafile for the table) when your instance ran out of storage. 

You have mentioned that after the crash the database size utilization grew 139 GB even that tables itself didn't change their own size. 

In order to help you with this case, I would like to discuss more details over private message in order to confirm the instance name that I have found associated with your account and arrange the steps to have it fixed with my internal team. 

I'm looking forward to hearing more from your side. 
Thanks again. 

Have a great day!"
Amazon Relational Database Service	"GovCloud - RDS/Aurora AutoScaling Group Java error and broken functionality
Hello,

In GovCloud AWS, under RDS->Aurora cluster details->AutoScaling Group and Activities show a Java error and all functionality around this feature (adding a new one, in particular) is unavailable:

Error creating bean with name 'scopedTarget.autoScalingClient' defined in class path resource http://com/amazonaws/console/rds/server/spring/RdsBaseSpringConfig.class: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate http://com.amazonaws.services.applicationautoscaling.AWSApplicationAutoScaling: Factory method 'autoScalingClient' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.autoScalingClientFactory' defined in class path resource http://com/amazonaws/console/rds/server/spring/RdsBaseSpringConfig.class: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate http://com.amazonaws.console.gwt.server.awssdk.ClientFactory: Factory method 'autoScalingClientFactory' threw exception; nested exception is java.lang.NullPointerException

I'm unable to create a new ASG for my Aurora RDS cluster, as the form shows this error at the bottom as well as the detail of the cluster. I don't see anything POST'ing in the Network tab under devtools; there are the same errors being shown in the JS console (same as above, and also:)

bClusterAlterAutoScalingPolicyActivity
SEVERE: Error creating bean with name 'scopedTarget.autoScalingClient' defined in class path resource http://com/amazonaws/console/rds/server/spring/RdsBaseSpringConfig.class: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate http://com.amazonaws.services.applicationautoscaling.AWSApplicationAutoScaling: Factory method 'autoScalingClient' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.autoScalingClientFactory' defined in class path resource http://com/amazonaws/console/rds/server/spring/RdsBaseSpringConfig.class: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate http://com.amazonaws.console.gwt.server.awssdk.ClientFactory: Factory method 'autoScalingClientFactory' threw exception; nested exception is java.lang.NullPointerException

Cheers~"
Amazon Relational Database Service	"Aurora Serverless Outage 22/2/19, ap-southeast-2 region
Hi guys,

I run 2 aurora serverless instances over 2 different AWS accounts, only 1 experienced issues.

The outage was for about 18 mins. Between 22/2/19 10:51PM GMT - 11:09PM GMT
Our web apps couldn't connect to the servers at all.

Aurora Serverless event log shows:
Fri, 22 Feb 2019 22:44:04 GMT Scaling DB cluster from 2 capacity units to 2 capacity units for this reason: Maintenance
Fri, 22 Feb 2019 23:08:01 GMT Your Aurora Serverless DB cluster has automatically recovered.
Fri, 22 Feb 2019 23:08:50 GMT Scaling DB cluster from 2 capacity units to 2 capacity units for this reason: Maintenance
Fri, 22 Feb 2019 23:08:56 GMT The DB cluster has scaled from 2 capacity units to 2 capacity units.

Anyone else finding issues like this recently?

We are in process of moving all our web apps to Aurora serverless but have paused now because of these issues."
Amazon Relational Database Service	"Re: Aurora Serverless Outage 22/2/19, ap-southeast-2 region
Hi all,

On Monday 18th between 14:00 and 20:00 UTC we encountered intermittent issues that could cause database downtime for some clusters in the us-east-2, eu-west-1 and ap-northeast-1 regions. At that time we identified the issue and manually mitigated the immediate impact, but still needed to fix the underlying issue. The issue was present in all regions, but only manifested in those  regions before we had time to identify and mitigate it.

All clusters in the fleet have now successfully had the permanent fix applied and there should be no further cases of downtime due to this issue. If you have any further questions on the incident, please reach out to AWS Support at https://aws.amazon.com/support.

We apologize for any inconvenience this may have caused.

Thanks,
Lawrence"
Amazon Relational Database Service	"MySQL Serverless Downtime Issue
The past two days I have experienced downtime with AWS RDS serverless for MySQL at about 6:00 AM PST to 6:30 AM PST. This database has been running for weeks without any issue and now this happened two days in a row.

The CPU and Connections go down to near zero and eventually (hopefully for today as it is currently down) go back to normal after about 15+ minutes.

This does not correspond to any backup or maintenance windows and I do not have any scheduled tasks on my side for this time frame.

In trying to connect to the server I did get the following message more than once, but usually it just timeouts.

""ERROR 2013 (HY000): Lost connection to MySQL server at 'reading initial communication packet', system error: 0""

Today the issue started at about 6:10 AM PST and is currently ongoing."
Amazon Relational Database Service	"Re: MySQL Serverless Downtime Issue
Hi,

I'm sorry to hear you've been having issues with Aurora Serverless. If you can provide the region and cluster identifier (or ARN) of your Serverless cluster, I can take a look for you. Alternatively, I'd suggest you open a support case with AWS support, who can also help out with investigating what's wrong.

If you'd prefer not to post your cluster details here, you can also private message me.

Regards,
Lawrence

Edited by: LawrenceAtAWS on Feb 20, 2019 10:12 AM"
Amazon Relational Database Service	"Re: MySQL Serverless Downtime Issue
I had 12 Serverless running and had this issue pop up randomly on all of them. Sometimes they would refuse connections for up to an hour before coming back.

AWS support finally just told us to switch back to regular, provisioned Aurora as they could not figure out what was wrong.

Edited by: Charles42 on Feb 22, 2019 10:57 AM"
Amazon Relational Database Service	"Re: MySQL Serverless Downtime Issue
Run 2 aurora serverless instances, ap-southeast-2 region.

Earlier this morning we had 18min outage for one of them, the other was fine.
We also run provisioned Aurora for last few years, and that server has never skipped a beat.

PMed LaweranceAtAWS to see if can get more details on reliability issues with Aurora serverless"
Amazon Relational Database Service	"Re: MySQL Serverless Downtime Issue
Hi all,

On Monday 18th between 14:00 and 20:00 UTC we encountered intermittent issues that could cause database downtime for some clusters in the us-east-2, eu-west-1 and ap-northeast-1 regions. At that time we identified the issue and manually mitigated the immediate impact, but still needed to fix the underlying issue. The issue was present in all regions, but only manifested in those regions before we had time to identify and mitigate it.

All clusters in the fleet have now successfully had the permanent fix applied and there should be no further cases of downtime due to this issue. If you have any further questions on the incident, please reach out to AWS Support at https://aws.amazon.com/support.

We apologize for any inconvenience this may have caused.

Thanks,
Lawrence"
Amazon Relational Database Service	"RDS Aurora AppSync Error
I am fairly new to aws. 

I am trying to create a simple app using aurora and AppSync. So far, I have been able to create aurora database, connected to it using MySQL workbench, created the tables that i need.

I have also made the AppSync APIs. And done the resolver  (connected the resolver to the RDS Aurora DB).

Here is the problem I am facing, when I try to run queries from the AppSync Queries Tab, it gives me the following error and message:

""errorType"": ""400 Bad Request"",
 ""message"": ""RDSHttp:{\""message\"":\""HttpEndPoint is not enabled for arn:aws:rds:us***:cluster:***\""}"" (I replaced some details with ***)

I have made my aurora accessible to the public, and I have tried to add a few incoming rules to the security group (i.e. allow all).

However, this error still persists. I have spent a few days on it and will appreciate any help i can get to resolve this.

Thanks.

Edited by: xyluz on Feb 23, 2019 12:34 PM

Edited by: xyluz on Feb 24, 2019 8:09 AM"
Amazon Relational Database Service	"Re: RDS Aurora AppSync Error
Hi,

AppSync integration with Aurora requires the HTTPEndpoint functionality (the RDS Data API). Currently this is only available in the us-east-1 region for Aurora Serverless databases. To make use of it, you can modify an Aurora Serverless database in the console to enable this functionality.

You can learn more about this here: https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/data-api.html

Thanks,
Lawrence"
Amazon Relational Database Service	"RDS SQL Server Express Edition 2017 - Unable to DROP a database
Hello,
I have problem with permission on master account for our RDS database (SQL Server Express Edition 2017) 'finapps-test'. When I try to delete database 'Staging_GPD' I receive Error 'Cannot drop the database 'Staging_GPD', because it does not exist or you do not have permission.
Thank you for response."
Amazon Relational Database Service	"Performance Insights for MySQL
Hello,

is it possible to enable Performance Insights for MySQL database?
If I understand correctly from this link
https://aws.amazon.com/rds/performance-insights/

""...available for Amazon Aurora (PostgreSQL- and MySQL-compatible editions), Amazon RDS for PostgreSQL, Amazon RDS for MySQL, and Amazon RDS for Oracle.""
But when I'm creating MySQL instance, or try to modify current, there is no that option.
Only when I tried to create Amazon Aurora"
Amazon Relational Database Service	"Re: Performance Insights for MySQL
CoyoteKG wrote:
Hello,

is it possible to enable Performance Insights for MySQL database?
If I understand correctly from this link
https://aws.amazon.com/rds/performance-insights/

""...available for Amazon Aurora (PostgreSQL- and MySQL-compatible editions), Amazon RDS for PostgreSQL, Amazon RDS for MySQL, and Amazon RDS for Oracle.""
But when I'm creating MySQL instance, or try to modify current, there is no that option.
Only when I tried to create Amazon Aurora
Yes.

See https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.html

which lists support as 
 Amazon RDS MySQL version 5.7.22 and higher 5.7 versions
Amazon RDS MySQL version 5.6.41 and higher 5.6 versions
 
And Notes that:
 Amazon RDS Performance Insights is not supported for MySQL 5.5 or MySQL 8.0.
For Amazon RDS MySQL, Performance Insights is not supported on the following DB instance classes: db.t2.micro, db.t2.small, db.t3.micro, and db.t3.small.

Kyle"
Amazon Relational Database Service	"PostgreSQL Limitations for IAM Database Authentication
Hello everyone,

I am willing to implement IAM database authentication on an Aurora PostgreSQL database but would need to have a better understanding of limitations.

Documentation states that ""The maximum number of connections per second for your database instance may be limited depending on the instance type and your workload"" for PostgreSQL databases (see  https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.IAMDBAuth.html#UsingWithRDS.IAMDBAuth.LimitsPostgreSQL).

Do you think it means that the same limitations than MySQL apply (20 new connections per seconds), or are these limitations higher (or lower)? If they are higher, is there a way to get an estimate of the limit per instance type?

Thanks a lot for your help. Have a nice day,

Paul"
Amazon Relational Database Service	"Database Migration Services weekly
I am working on a case where a customer would like to load data from an on premise database to an AWS Aurora DB to run read only transactions against this data set.

However, there is no need to continuously synchronize. Is it possible to perform a database synchronization weekly/bi-weekly using Database Migration Services?"
Amazon Relational Database Service	"Unable to delete crashed Postgresql RDS
Hi,

I have an instance of Postgresql on RDS crashed because of incompatible parameters.
I cloned this instance and change the parameter but now I can't delete the crashed instance or reboot it.

Arnaud SAMSON"
Amazon Relational Database Service	"Re: Unable to delete crashed Postgresql RDS
Hello Arnaud,

I will private message you to get more information regarding the instance that needs to be deleted.

Regards,
Jignesh"
Amazon Relational Database Service	"Re: Unable to delete crashed Postgresql RDS
Hi JigneshAWS,

I sent you the information by mp. I am still waiting for an answer.

Regards,
Arnaud SAMSON

Edited by: asamson on Feb 24, 2019 11:06 AM"
Amazon Relational Database Service	"Unusually slow automated snapshot
Snapshots normally occur very quickly (minutes), however today it is taking a very long time (hours) - this is a Postgresql 9.6.11 instance.

Is there anywhere that I can ""go"" to find more information (if any) about why it is taking so long? For example somewhere in CloudWatch?"
Amazon Relational Database Service	"Re: Unusually slow automated snapshot
The snapshot did eventually finish, but I have no idea why it was slower than usual. I also did not find any logs anywhere to suggest why."
Amazon Relational Database Service	"Re: Unusually slow automated snapshot
The snapshot process is unfortunately opaque, raising a support call with AWS is your best... call."
Amazon Relational Database Service	"Why my RDS cpu and write IOPS is spiking beyond limits on high load?
I have an ecommerce website running on EC2 backed by m5.large RDS instance running MySQL 8. Recently when we launched a sale on which resulted in 5 times increase in traffic and transactions. But this has caused issues in RDS.

In general, our RDS runs at around 15% CPU and 60 write IOPS but during that period, CPU spiked to > 90% and write IOPS was around 300. And after a while CPU spiked to 100% which resulted in failure of app to work. As an immediate measure, I rebooted our apps but it made no change, RDS was still running at 100%.

Ultimately, I need to reboot RDS to get over this issue. After that it started working fine. Why this issue has happened and how can I make sure it doesn't happen again. Due to this issue we got around 35 minutes of downtown at critical day"
Amazon Relational Database Service	"Re: Why my RDS cpu and write IOPS is spiking beyond limits on high load?
What did your DBA say about the database activity at the time of the 100% cpu?"
Amazon Relational Database Service	"Aurora: Detect Writer/Reader Instances
I am trying to write a script to monitor writers and readers within a cluster. On the web interface it shows the ""Role"" of an instance inside the cluster but I cannot seem how to find that programmatically using the CLI tools.

Anyone know how to use the AWS CLI to list all instances in an Aurora cluster along with their current Role (reader or writer)?"
Amazon Relational Database Service	"RDS MySQL Metrics
Hello, 
I'm setting up one Magento site just for testing performance
Among other things this Magento site using REDIS for session storage, and backend cache.

I have problem that when I open 10 links of that website, 5 are broken with error 503 ""Service are unavailable""
I checked EC2 and did not found bottleneck, nothing was overloaded.
When I check RDS Metrics, CPU Utilization peaks are max 30%, but IOPS Read is up to 70 at that moment when I got those 503 errors.
RDS instance is t3.medium.
I don't understand that IOPS metric. What is maximum for this instance?
If IOPS is problem, can I somehow avoid reading and writing on SSD, with keeping everything in memory? Database size is 2GB at all"
Amazon Relational Database Service	"Re: RDS MySQL Metrics
I need to tweak and tune it with my.conf"
Amazon Relational Database Service	"PostgreSQL - custom dictionaries
Is it possible to use custom dictionaries for PostgreSQL full text search? I would like to use custom synonyms and unaccent rules. However, in PostgreSQL, the dictionary files are loaded from $SHAREDIR/tsearch_data , and I cannot find any way to upload files to this folder."
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
Hello,

Unfortunately, because RDS doesn't provide filesystem access, you won't be able to upload your custom files to $SHAREDIR.

Regards,
Szymon"
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
We too require a way to upload custom dict files and stopword files as well. 

Not supporting this ability is leaving a large part of the non European (which already have stop word files in place by default) world out of being able to use Amazon RDS Postgres full text search properly."
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
+1 for custom dictionary support.   It is very unfortunate to be in the process of moving our company into RDS Postgres only to discover during migration that create dictionary statements return errors.

CREATE TEXT SEARCH DICTIONARY favado_snowball (
    template = snowball,
    language = english
);
 
CREATE TEXT SEARCH DICTIONARY favado_thesaurus (
    TEMPLATE = thesaurus,
    DICTFILE = favado_thesaurus,
    DICTIONARY = favado_snowball
);
 
[Error Code: 0, SQL State: F0000]  ERROR: could not open thesaurus file ""/rdsdbbin/postgres-9.4.4.R1/share/tsearch_data/favado_thesaurus.ths"": No such file or directory"
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
+1. 

Would be very useful for lots of non-english users"
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
We would like to formally request this feature as well.

AWS could abstract the file system access by providing a secure RDS API (eg.: UploadCustomTextSearchDictionary)"
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
Hi,

Thanks for your feedback!

I have raised a feature request with the RDS team. 

Thanks,
Avani"
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
I would like to +1 this.
Full text searching is important to our business and would like to use RDS instead of having to run a custom cluster in EC2.
Thanks."
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
+1 to support it including custom dictionaries (new or modified) and being able to use the unaccent rules in your search configuration

Some similar problems of mine for local vs. AWS are listed here  with a few tricks that I have tried.

Thanks
Olivier"
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
+1 from me. We need custom dictionaries."
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
+1 from us. This is very important feature."
Amazon Relational Database Service	"Re: PostgreSQL - custom dictionaries
Last input on this thread was in October 2018.
It is now almost March 2019.

Any updates?  Will there be a way to add custom Postgres dictionaries in RDS?"
Amazon Relational Database Service	"Convert RDS snapshot to Aurora serverless
How can I migrate a standard MySQL RDS snapshot to Aurora Serverless? When I click on the snapshot and select ""Migrate snapshot"", I only see the option to select an instance class. I do not see serverless as an option."
Amazon Relational Database Service	"Re: Convert RDS snapshot to Aurora serverless
Hello There, 

You can’t migrate RDS MySQL snapshot to Aurora Serverless directly.  You will have to first Migrate RDS MySQL instance to Aurora Provisioned and then move to Aurora Serverless.

STEPS:
1. Choose your RDS MySQL instance, click ""instance action"", choose ""create Aurora read replica"" from the drop list. For details, please refer the below link:

	[+] Migrating Data from a MySQL DB Instance to an Amazon Aurora MySQL DB Cluster by Using an Aurora Read Replica  - https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Migrating.RDSMySQL.Replica.html

2. After the Aurora replica  is successfully created, wait for the Replica Lag to reach zero on the new Aurora Read Replica, stop the flow of new transactions to the source MySQL DB instance, and promote the Aurora Read replica to a DB cluster[1].

	[+] Creating Aurora replica - https://aws.amazon.com/blogs/aws/new-create-an-amazon-aurora-read-replica-from-a-mysql-db-instance/

3. Take a snapshot of the new promoted DB Cluster
	[+] Creating a DB Cluster Snapshot - https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/USER_CreateSnapshotCluster.html

4. Restore the snapshot, choose ""Serverless"" in Capacity type section.
	[+] Restoring an Aurora Serverless DB Cluster - https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-serverless.restorefromsnapshot.html

Alternatively, you can consider take a database dump (logical backup) using utilities like mysqldump from your current RDS MySQL instance and restore it to directly to an Aurora Serverless cluster.
	[+] Mysqldump- https://dev.mysql.com/doc/refman/5.6/en/mysqldump.html

Thanks,
Ashika."
Amazon Relational Database Service	"Re: Convert RDS snapshot to Aurora serverless
Provided the requested solution"
Amazon Relational Database Service	"Re: Convert RDS snapshot to Aurora serverless
wait for the Replica Lag to reach zero on the new Aurora Read Replica

The Cloudwatch metric Aurora Replication Lag, does not seem to be reporting in (see attached screenshot).

However, Cloudwatch Aurora Binlog Replication Lag is reporting in, and showing a value of around 7,000 (see attached screenshot)."
Amazon Relational Database Service	"Re: Convert RDS snapshot to Aurora serverless
@AshikaAWS

Did you get a chance to see my reply above?

The Cloudwatch metric Aurora Replication Lag, does not seem to be reporting in (see attached screenshot). However, Cloudwatch Aurora Binlog Replication Lag is reporting in, and showing a value of around 7,000 seconds (see attached screenshot)."
Amazon Relational Database Service	"Migrate RDS PostgreSQL to Aurora PostgreSQL
Hi,

I'd like to migrate a large database (more than 3TB) RDS PostgreSQL to Aurora PostgreSQL.
The migrate snapshot option is disabled. I don't know why, but if it helps: the RDS source engine is 9.6.10 and is not encrypted. It is a huge database, I know, so I tried different ways:

Allocating a EC2 in between both endpoints using CLI tools like pg_dump & psql. I've got the impression it can take eternity even with a powerful instance type.
Using DMS, same thing. Using the most powerful (memory and network bandwidth) it takes probably more than a day.


Using another DB (RDS PostgreSQL, engine 9.6.6) I was able to proceed with migration with snapshot.
It took 5 or 6 hours for 1.5 TB size.
Any clue how to make that huge migration? I'd prefer the snapshot migration mode, but it seems not enabled in 9.6.10... 

Any help is appreciated."
Amazon Relational Database Service	"Re: Migrate RDS PostgreSQL to Aurora PostgreSQL
RDS PostgreSQL's upgrade to Aurora PostgreSQL is only available to like or later minor versions. You will be able to upgrade  via snapshot import (or Aurora Read Replica) once a 9.6.10 or later compatible Aurora PostgreSQL is available.

Using DMS while the initial load could take longer, you can also select change data capture to sync up to the latest changes and then switch your applications to Aurora PostgreSQL. 

Thanks.
Regards,
Jignesh"
Amazon Relational Database Service	"Serveless - COUNT(*) takes over 1 hour to complete vs Standard DB
We have a query which is retrieving a count(*) via joins across several tables.   The primary table has approximately 2Million records.    When the query does finally return the result is ~ 3.6M rows (which is expected).   Looking at the EXPLAIN plan, all joins are on Primary Keys or an index, with PrimaryKey being the main key.

The problem is, this query takes about 1 hour or more (just took 1 hour and 22 minutes) to return.    When the same query is run on a regular EC2 instance running MySQL 5.7, the query returns in about 22 seconds.   On an EC2 instance running MariaDB 10.6 the query returns in about 11 seconds.

I'm not sure how to go about tracing the issue as it appears to be completely within AWS Serverless.   The CPU is running for the cluster.   Also, i see no sign of deadlocks or anything else that would indicate an issue.

This effectively is stopping us from migrating into the Serverless Aurora environment.

Edited by: VerDan on Feb 14, 2019 1:29 PM"
Amazon Relational Database Service	"Re: Serveless - COUNT(*) takes over 1 hour to complete vs Standard DB
What version of Aurora MySQL are you using and what kind of instance type?
Performance Insight could shine light on the situation.
See  https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.html 

Kyle"
Amazon Relational Database Service	"Re: Serveless - COUNT(*) takes over 1 hour to complete vs Standard DB
Hi Verdan
Which capacity did you have your serverless cluster set to when you did the query and which capacity were you using for you regular EC2 instance?"
Amazon Relational Database Service	"Re: Serveless - COUNT(*) takes over 1 hour to complete vs Standard DB
Currently the only version of Aurora Serverless (that i can see) is MySQL 5.6, so that is the version we are on.

The initial setup was for from 2-64 capacity units.   When we kicked this off it was at 2.   I know having more really won't help since once the query is off and running, it is pretty much locked in there.   

Regardless of if we had it set to 64, i can run the same query against the same database on a t2 small (might even be a micro) and it comes back in less than 20 seconds.   So something is definitely not right."
Amazon Relational Database Service	"Re: Serveless - COUNT(*) takes over 1 hour to complete vs Standard DB
Hi VerDan
I have sent you a PM requesting more information. I'd like to look into this further.

Thanks,
Daniel"
Amazon Relational Database Service	"Aurora Serverless MySQL ERROR 1114 (HY000): The table 'xxxx' is full
Hi Folks,

I find this issue when I'm trying to add some columns to a very large database table (over 300M rows).

The error itself appears to typically be related to a storage space restriction of some sort on the host, but being serverless, I have no visibility on what storage limits I'm approaching or exceeding, and I have no view into how I would extend these limits if I knew what they were.

I can also find nothing around what exactly a ""unit"" translates to in terms of disk capacity either so any light that can be shed on that would also be appreciated.

Any advice on how to proceed would be greatly appreciated."
Amazon Relational Database Service	"Re: Aurora Serverless MySQL ERROR 1114 (HY000): The table 'xxxx' is full
If you are adding a column to a very large table, this operation might consume a large amount of temporary storage. It is possible that you ran out of available temp storage on the cluster, which would explain that error.
-Phil"
Amazon Relational Database Service	"Re: Aurora Serverless MySQL ERROR 1114 (HY000): The table 'xxxx' is full
To follow up here, the amount of temporary storage space associated with Serverless increases linearly with the number of associated ACUs. If you're having issues running out of temporary storage space for large table mutations, you could temporarily scale the cluster up to a larger number of ACUs and then run the modify statement. This should increase the associated temporary storage an allow the statement to succeed."
Amazon Relational Database Service	"Can't delete serverless aurora cluster
Hi

I just spun up a test aurora cluster (serverless).  trying to delete as it was just a test but getting this error.

An error occurred (InvalidParameterValue) when calling the ModifyDBCluster operation: The backup window and maintenance window must not overlap.

Have tried going in through console, powershell and CLI - all kicking out the same message

Attempted to adjust backup or maintenance windows via CLI but says no because of serverless

Any suggestions... don't want to be paying for this.

Thxs

Phil"
Amazon Relational Database Service	"Re: Can't delete serverless aurora cluster
Hi Phil,

Could you provide some more details on your cluster and what you are doing? 


What is your AWS account Id? 
What is the name of your cluster?
What region did you start this Serverless cluster in?
Are you trying to delete the cluster via the console or CLI? If via the CLI, are you calling the DeleteDbCluster API (the error message below seems to indicate that it's the ModifyDbCluster API, which isn't used for cluster deletion).


If you'd prefer, you can private message me these details and I'll dig into whats happening.

Regards,
Lawrence"
Amazon Relational Database Service	"Re: Can't delete serverless aurora cluster
thanks for the response... it disappeared over night so i think i'm good now."
Amazon Relational Database Service	"Re: Can't delete serverless aurora cluster
To follow up here, we root caused this problem to a bug in our API, where occasionally we randomly select adjacent maintenance and backup windows for the Serverless cluster, which aren't valid. We don't actually even use the maintenance window for anything. The modify API then validates this (even if you aren't changing this) and fails, meaning you can't disable deletion protection. We've released a fix for this issue, so it should no longer be happening. Please do reach out to us if anyone reading this encounters this.

Thanks,
Lawrence"
Amazon Relational Database Service	"RDS Mysql - Storage Full - Resolved by Reboot?
Twice in the last week we have encountered the following issue:

RDS instance shows status Storage Full - is unavailable to connections
Sum of tables size is much less than storage allocated
Adding space to instance allows instance to be be available
Rebooting instance frees up significant about of space

(see annotated graph attached)

It seems that something is taking up space on the local mysql disk.  I'm not sure if it is temp table joins written to disk or something else. 

How would this be triaged?  This is causing significant stability concerns"
Amazon Relational Database Service	"Re: RDS Mysql - Storage Full - Resolved by Reboot?
Storage did go to zero twice on your instance.
Perhaps you are running a large DDL such as optimize table? The temporary storage for such an operation can be large, and would get cleaned up when your DDL completes.

-Phil"
Amazon Relational Database Service	"Re: RDS Mysql - Storage Full - Resolved by Reboot?
What version is this database running on?

In case it is MySQL 8, might be related to https://forums.aws.amazon.com/message.jspa?messageID=886848#886848"
Amazon Relational Database Service	"monitor SQL Server event alerts?
I'd like to be able to track (in near real time) fatal errors that show up in SQL Server's error log. I'd also like to raise an alert when a message contains ""Error"" in the text. How can this be done in RDS?"
Amazon Relational Database Service	"BULK iNSERT from EC2 instance to AWS SQL Server RDS  having issue..
Hi all,

I have procedure which is   inserting data from EC2 SQL Server to SQL Server RDS using  LINKED server(LINKED_PROC),But it is failing due below error, Please some  body help me to resolve the issue.

Error:
OLE DB provider ""SQLNCLI10"" for linked server ""LINKED_PROC"" returned message ""The partner transaction manager has disabled its support for remote/network transactions."".

(1 row(s) affected)
Msg 50000, Level 16, State 2, Procedure updateCodes, Line 84
The operation could not be performed because OLE DB provider ""SQLNCLI10"" for linked server ""LINKED_PROC"" was unable to begin a distributed transaction.
Please advise me how to come over the issue.

Regards,
(1 row(s) affected)"
Amazon Relational Database Service	"Re: BULK iNSERT from EC2 instance to AWS SQL Server RDS  having issue..
Im with the same issue
Did you fix this error?!"
Amazon Relational Database Service	"error to run trigger for update RDS SQL Server
Hi, Im trying to run a trigger on my SQL Server on my site to send updates to RDS
but I get this error
Error The partner transaction manager has disabled its support for remote network transactions."
Amazon Relational Database Service	"Simulate incompatible-restore - MariaDB
How can I simulate a restore (to-point-in-time) with status incompatible-restore on MariaDB?

Edited by: Rodrigo81 on Feb 19, 2019 9:11 AM"
Amazon Relational Database Service	"Aurora Serverless Won't Scale: A scaling point wasn’t found.
We started up an Aurora Serverless cluster, loaded some data, and threw a big workload at it to see how it scales. Unfortunately, it doesn't seem to scale due to the error: A scaling point wasn’t found.

We can manually change the capacity, and it does seem to turn itself on/off when there is no load. But when we start to hand it a large workload and the CPU spikes, we just see this in the logs:

Fri Aug 10 07:56:55 GMT-400 2018	The DB cluster failed to scale from 4 capacity units to 8 capacity units for this reason: A scaling point wasn’t found.
Fri Aug 10 07:51:35 GMT-400 2018	Scaling DB cluster from 4 capacity units to 8 capacity units for this reason: Autoscaling.

This repeats over and over again, to the point where I have 12+ hours of these logs. It seemingly didn't scale once in an overnight test. I tried manually changing the capacity to see if that would then allow it to autoscale, and while i did successfully change capacity manually, it still didn't autoscale after I did.

The engine we are using is Aurora MySQL 5.6 Serverless. 

Any ideas on what we can do? Why are we seeing this error?"
Amazon Relational Database Service	"Re: Aurora Serverless Won't Scale: A scaling point wasn’t found.
If your big workload contains large transactions it might not find a scaling point.If you have a long running transactions, the auto scaling will not interrupt the transaction to scale.

Can you share details about your workload?

-Phil"
Amazon Relational Database Service	"Re: Aurora Serverless Won't Scale: A scaling point wasn’t found.
Our workload does not include long queries or transactions. What we are doing is running a multi-threaded application (32 independent threads) that each do a handful of queries over and over again. The queries are almost all either simple index lookups, or full text matches. No query should take more than a few seconds, and should be even faster than that if the database were scaled high enough. We have found InnoDB full text matching is quite CPU intensive, and when our workload starts the aurora serverless database is scaled low and so the queries may take a little longer. Still, no query should be lasting more than 10 seconds, and that would be quite abnormal.

We are not doing any inserts or updates, just simple SELECT queries."
Amazon Relational Database Service	"Re: Aurora Serverless Won't Scale: A scaling point wasn’t found.
Hi Phil,

Any update on this?"
Amazon Relational Database Service	"Re: Aurora Serverless Won't Scale: A scaling point wasn’t found.
I can only see the one cluster you have in us-west-2. 
It has been asleep for a little over a week, and the times when it could not find scaling point your workload was 100% cpu. I am not sure if that was also a long running transaction.

Can you try to scale again and let me know?
thanks,"
Amazon Relational Database Service	"Re: Aurora Serverless Won't Scale: A scaling point wasn’t found.
Hi Phil,

Thanks for the quick reply. I am starting our test job right now, so it should start to get loaded and scale up over the next 15-20 minutes or so. I will let it run for a while so you can take a look at any data you need.


Eric"
Amazon Relational Database Service	"Re: Aurora Serverless Won't Scale: A scaling point wasn’t found.
You have several queries that are in the ""FULLTEXT initialization"" state. 
This apparently is blocking the seamless scaling. B/c this is an implicit long running transaction."
Amazon Relational Database Service	"Re: Aurora Serverless Won't Scale: A scaling point wasn’t found.
Hi Phil,

Can you define ""long""? I am looking at the processlist at the moment and don't see the FULLTEXT initialization query last more than 1 second. How short do the queries have to be to work with auto-scaling?

Thanks


Eric"
Amazon Relational Database Service	"Re: Aurora Serverless Won't Scale: A scaling point wasn’t found.
Hi,

Any update on this issue? We are experiencing the same problem.

Thanks in advance."
Amazon Relational Database Service	"Re: Aurora Serverless Won't Scale: A scaling point wasn’t found.
I am having the same problem on a website I just migrated to AWS from another service. What is a scaling point and what do I need to do to make sure it can find one?"
Amazon Relational Database Service	"RDS Oracle missing APEX_SPATIAL
When running apex packaged application 'sample geolocation showcase' in APEX 5.1.2 on Oracle RDS 12.1.0.2.v14, we get the following. Also, in other environments apex_spatial is a public synonym pointing at WWV_FLOW_SPATIAL_API within the apex schema, neither of these exist in our RDS build.

Create DB Objects:
begin
 apex_spatial.insert_geom_metadata_lonlat(
   p_table_name   => 'EBA_SPATIAL_AOI',
   p_column_name  => 'GEOMETRY'
 );
end;

ORA-06550: line 2, column 3:
PLS-00201: identifier 'APEX_SPATIAL.INSERT_GEOM_METADATA_LONLAT' must be declared
ORA-06550: line 2, column 3:
PL/SQL: Statement ignored

create index EBA_SPATIAL_AOI_SX on EBA_SPATIAL_AOI (GEOMETRY)
indextype is MDSYS.SPATIAL_INDEX

ORA-29855: error occurred in the execution of ODCIINDEXCREATE routine
ORA-13203: failed to read USER_SDO_GEOM_METADATA view
ORA-13203: failed to read USER_SDO_GEOM_METADATA view

begin
 apex_spatial.insert_geom_metadata_lonlat(
   p_table_name   => 'EBA_SPATIAL_IMAGES',
   p_column_name  => 'GEOMETRY'
 );
end;

ORA-06550: line 2, column 3:
PLS-00201: identifier 'APEX_SPATIAL.INSERT_GEOM_METADATA_LONLAT' must be declared
ORA-06550: line 2, column 3:
PL/SQL: Statement ignored

create index EBA_SPATIAL_IMAGES_SX on EBA_SPATIAL_IMAGES (GEOMETRY)
indextype is MDSYS.SPATIAL_INDEX

ORA-29855: error occurred in the execution of ODCIINDEXCREATE routine
ORA-13203: failed to read USER_SDO_GEOM_METADATA view
ORA-13203: failed to read USER_SDO_GEOM_METADATA view

begin
 apex_spatial.insert_geom_metadata_lonlat(
   p_table_name   => 'EBA_SPATIAL_ADDRESSES',
   p_column_name  => 'ADDR_LOCATION'
 );
end;

ORA-06550: line 2, column 3:
PLS-00201: identifier 'APEX_SPATIAL.INSERT_GEOM_METADATA_LONLAT' must be declared
ORA-06550: line 2, column 3:
PL/SQL: Statement ignored

create index EBA_SPATIAL_ADDRESSES_SX on EBA_SPATIAL_ADDRESSES (ADDR_LOCATION)
indextype is MDSYS.SPATIAL_INDEX

ORA-29855: error occurred in the execution of ODCIINDEXCREATE routine
ORA-13203: failed to read USER_SDO_GEOM_METADATA view
ORA-13203: failed to read USER_SDO_GEOM_METADATA view"
