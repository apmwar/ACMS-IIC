label	description
Amazon CloudSearch	"Coutrywise Breakup
Does the data, showcase country or statewise breakup ?"
Amazon CloudSearch	"How ""intelligent"" is Amazon search
Hi,

I am wondering if I have a document in Amazon Search and its all about a ""Javascript programmer"" and someone enters in ""JS Developer"". 

Is amazon search intelligent enough to return matches based on that search? 

The actual document itself may never have ""JS"" or ""Developer"" in the content but its clear that ""Javascript Programmer"" is a valid result for a ""JS Developer"" search."
Amazon CloudSearch	"searching for an exact string not returning exact results
We are doing a simple exact string search for a particular code in our CloudSearch records.  This seems to generally work.

But in the event where we are searching for a particular result, i.e.:

 (term field=stdcode 'CC.1.2.8.A')

We are getting results where stdcode is CC.1.2.8.A but also CC.1.2.8.B, CC.1.2.8.C, etc.  The search seems to be ignoring the last (.A) part of the string.  The results in ""run a test search"" even only boldface the CC.1.2.8.

Further evidence that this appears to be a bug:  searching for CC.1.2.8.B works, CC.1.2.8.C works, etc.  ONLY fails for A.  The "".A"" seems to be ignored when the other letters are not.

Any ideas?

Just to clarify:

searching for CC.1.2.8.A returns anything with CC.1.2.8 (incorrect)
searching for CC.1.2.8.B only returns CC.1.2.8.B (correct)
searching for CC.1.2.8.C only returns CC.1.2.8.C (correct)
searching for CC.1.2.8.D only returns CC.1.2.8.D (correct)
etc."
Amazon CloudSearch	"Cloudsearch Expression - Radius based search
I have used haversin method in cloudsearch expression to sort results based on distance
http://search-coursera-courses-ttta3hjjy7jepitjpzvrt64ug4asdsadaswcax.us-west-2.cloudsearch.amazonaws.com/2013-01-01/search?q=English&expr.distance=haversin(50.05830,-84.40570,location.latitude,location.longitude)&sort=distance%20asc&return=distance

How to limit the number of results to a maximum distance (radius)?

1. Searching is supported only within rectangular area and based on distance. Radius/Circle based search is not supported.
https://docs.aws.amazon.com/cloudsearch/latest/developerguide/searching-locations.html
2. Filter query can be run only on indexed fields and not on expressions.

What is the way to search based on a point and radius in one shot?"
Amazon CloudSearch	"CloudFormation
Is there any plans for a CloudFormation integration to cloudsearch ?"
Amazon CloudSearch	"Re: CloudFormation
+1"
Amazon CloudSearch	"Re: CloudFormation
same issue here, I cant find any resources on creating cloudsearch resources from cloudformation templates.
any help available on this ?  or is it that we can only create these resources using SDK and CLI ?
Any help Appreciated 
Thanks in Advance."
Amazon CloudSearch	"Unable to change the Desired Instance Type..  Never changes after indexing
Hi there,

I'm not sure if anyone has experienced any issues with changing the ""Desired Instance Type"" in us-east-1.  We've got a little over 3 million documents and when changing it from ""Default"" to ""search.m3.medium"" and Indexing it........it never changes it to the ""search.m3.medium"" and always reports 1 instance of search.m1.small.

I've tried multiple ways of initiating the reindexing from the Console and the CLI as well.  Whenever it finishes...it's the same result.  I don't have an issue doing this with a dev cluster in us-west-2.

Can someone offer any suggestions or someone from AWS be able to look into it?

Thanks!"
Amazon CloudSearch	"Re: Unable to change the Desired Instance Type..  Never changes after indexing
The usual reason for that is that the domain won't fit on a m3.medium. 

While an m3 has more compute power and RAM, it has an small SSD, while the m1.small has an HDD with more capacity."
Amazon CloudSearch	"Re: Unable to change the Desired Instance Type..  Never changes after indexing
Hi Tom,

Thanks for the quick response.  We weren't able to locate any product pages/documentation that explains any of this.  Do you happen to have the link for it so we have it for future reference?  I found something that covers the previous generation m1/m2 instance types.

As well, are there any areas where we might get notified if there's not enough space by chance?

Thanks again!"
Amazon CloudSearch	"Sporadic 504 errors during batch uploads
I have 5 m3.medium instances configured for my domain, which works just fine normally. Once a day I upload lots of documents: 5-5MB files in parallel. Of almost 100 uploads, 12 of them failed with a 504 error. From reading the AWS docs and FAQs, it seems like increasing the instance type to m3.large may help.

Would it work to increase the instance type to m3.large without rebuilding the index, run my uploads, and then decrease the instance type back down to m3.medium?

Rebuilding the index takes a couple of hours, so it's not like I can just quickly flip it to large and back just while I upload, unless the rebuild isn't necessary.

Thanks!"
Amazon CloudSearch	"SERVERLESS  LAB4   ISSUE  ---  WRITING  TO  S3  BUCKET
In  the  SERVERLESS  lab-4  process,  the  CLOUD-WATCH indicates  the  activity  completed,
see  below  the  entries  from  the  CLOUD-WATCH  service produced  from  the  CUSTOM AUTHORIZER, but   the  task  of  writing  to  the  bucket  is  not  working.

The IAM  USER  is  defined  for  the  use  of  the  bucket, coping the  name of  the  bucket
into  the JSON  part  of  the  definition brought  down  from  IAM  USER,    and  the  bucket
name  is  defined  in  the  LAMBDA  ENVIRONMENT VARIABLES area.

How  could  i  track activity  after  the  API  task from  the  CUSTOM  AUTHORIZER,  to  see
why  the  S3  bucket  isnt  being  written  to  for  the  purpose  of  trouble-shooting

just  realized  that  attachments  cannot  be  inserted  into   the  post,  therefore not attached

E-MAILS  to  A CLOUD  GURU  showing  CLOUD-WATCH  activity  that  i  referenced  above

Edited by: dapdnp on Aug 1, 2018 10:50 AM"
Amazon CloudSearch	"Re: SERVERLESS  LAB4   ISSUE  ---  WRITING  TO  S3  BUCKET
i  was  able  to make  it  work, the lab-4,  by making the upload-policy  item  a  separate   API  from  the  user-profile item, which  were  together originally
in the same API,  which  i  guess  made the entire
process  confuse.
thanks to  everyone"
Amazon CloudSearch	"Re: SERVERLESS  LAB4   ISSUE  ---  WRITING  TO  S3  BUCKET
resolved"
Amazon CloudSearch	"Re: SERVERLESS  LAB4   ISSUE  ---  WRITING  TO  S3  BUCKET
resolved"
Amazon CloudSearch	"Multiple Matches on the same field on different indexes - AWS CloudSearch
Hi There,

I'm unable to write a structured query for the following scenario with cloudsearch
Following is the data and requirement. 

[
 {
    ""type"": ""add"",
    ""id"": ""asdfasdf1"",
    ""version"": 1,
    ""lang"": ""en"",
    ""fields"": {
      ""vendorname"": ""vendor1"",	
      ""bookname"": ""book1"",
	  ""price"": 20
    }
  },
 {
    ""type"": ""add"",
    ""id"": ""asdfasdf2"",
    ""version"": 1,
    ""lang"": ""en"",
    ""fields"": {
      ""vendorname"": ""vendor1"",	
      ""bookname"": ""book2"",
	  ""price"": 30
    }
  },
 {
    ""type"": ""add"",
    ""id"": ""asdfasdf3"",
    ""version"": 1,
    ""lang"": ""en"",
    ""fields"": {
      ""vendorname"": ""vendor2"",	
      ""bookname"": ""book1"",
	  ""price"": 18
    }
  },
 {
    ""type"": ""add"",
    ""id"": ""asdfasdf4"",
    ""version"": 1,
    ""lang"": ""en"",
    ""fields"": {
      ""vendorname"": ""vendor3"",	
      ""bookname"": ""book1"",
	  ""price"": 15
    }
  },
 {
    ""type"": ""add"",
    ""id"": ""asdfasdf5"",
    ""version"": 1,
    ""lang"": ""en"",
    ""fields"": {
      ""vendorname"": ""vendor3"",	
      ""bookname"": ""book2"",
	  ""price"": 25
    }
  },
 {
    ""type"": ""add"",
    ""id"": ""asdfasdf6"",
    ""version"": 1,
    ""lang"": ""en"",
    ""fields"": {
      ""vendorname"": ""vendor3"",	
      ""bookname"": ""book3"",
	  ""price"": 10
    }
  },
]

vendorname and bookname are Type text indexes.

Brief:
Vendor1 is selling book1 & book2
Vendor2 is selling book1
vendor3 is selling book1,book2 & book3

Query:
I need to get Vendor names and Price who are selling book1 and book2.

Expected result: Vendor1, Vendor3

I tried the following but didn't work.
1. (and (phrase field=bookname 'book1') (phrase field=bookname 'book2'))
2. (and (term field=bookname 'book1') (term field=bookname 'book2'))

Thanks for any support."
Amazon CloudSearch	"Cannot start cloudwatch in EC2
Hi,

I managed to setup cloudwatch agent on ubuntu before.
Now I want to setup it on other server. But I don'w know which setup is wrong.
What I did:
1. I have a IAM Role with correct policy, which I used for my first EC2 server
2. I install cloudwatch agent on new server
3. I create config.json with sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-config-wizard

4. This is my config.json
{
	""metrics"": {
		""append_dimensions"": {
			""AutoScalingGroupName"": ""${aws:AutoScalingGroupName}"",
			""ImageId"": ""${aws:ImageId}"",
			""InstanceId"": ""${aws:InstanceId}"",
			""InstanceType"": ""${aws:InstanceType}""
		},
		""metrics_collected"": {
			""mem"": {
				""measurement"": [
					""mem_used_percent""
				],
				""metrics_collection_interval"": 60
			},
			""swap"": {
				""measurement"": [
					""swap_used_percent""
				],
				""metrics_collection_interval"": 60
			}
		}
	}
}

But when I run sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c /opt/aws/amazon-cloudwatch-agent/bin/config.json -s
 
it returns error /opt/aws/amazon-cloudwatch-agent/bin/config-downloader --output-file /opt/aws/amazon-cloudwatch-agent/etc/amazon-cloudwatch-agent.json --download-source /opt/aws/amazon-cloudwatch-agent/bin/config.json --mode ec2 --config /opt/aws/amazon-cloudwatch-agent/etc/common-config.toml
downloadLocation /opt/aws/amazon-cloudwatch-agent/bin/config.json is malformated.


5. When I tried to start the agent with sudo /opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -m ec2 -a start
amazon-cloudwatch-agent start/running, process 29253

I got this error in amazon-cloudwatch-agent.log
2018-08-14T11:12:07Z I! Tags enabled: host=tkm-ncds.net
2018-08-14T11:12:07Z I! Agent Config: Interval:1m0s, Quiet:false, Hostname:""tkm-ncds.net"", Flush Interval:1s
2018-08-14T11:12:07Z E! ec2tagger: Unable to initialize EC2 Instance Tags : +AuthFailure: AWS was not able to validate the provided access credentials"
Amazon CloudSearch	"Integrating Cloud Search with my website
Hello,

I am trying to use CloudSearch to provide search results for content within my website.  I followed the steps to create a test domain using the predefined IMDB content, and it's working great from within the developer console.  

However, I am trying to use JavaScript to pull down search results and provide them to the user, and the browser is blocking the request because of its cross-domain nature.  

I'm sure there's a resource out there to help me integrate the search the way I want, but I haven't been able to find it.  Can someone point me in the right direction?

Thanks,"
Amazon CloudSearch	"Re: Integrating Cloud Search with my website
Hello,

As I read more of the CloudSearch documentation, I see that there is an API that I can use.  Can I make calls to it from PHP?  How do I use the API in conjunction with my website?

Thanks!"
Amazon CloudSearch	"Fuzzy search on text with special/language chars
Dear AWS-Team,

I discovered a strange behavior on our CloudSearch index resulting in a not consistant output.

Beside others we have the following two entries in the index (Fields are set to ""German"" language):

knieprothese
hüftprothese

Queries:

knieprothese => Result: knieprothese => OK
knieprotese~2 => Result: knieprothese => OK

hüftprothese => Result: hüftprothese => OK
hüftprotese~2 => No Result => NOK => Expected => Result: hüftprothese 
huftprotese~2 => Result: hüftprothese => OK, but errr why...?

Do you have an explanation for this behavior and maybe an idea to come around it? 

Thanks alot!

Finn"
Amazon CloudSearch	"Re: Fuzzy search on text with special/language chars
Hallo AWS-Team,

any idea to come around this problem?

Thanks,
Finn"
Amazon CloudSearch	"Different Filter behavior with Console and SDK
I setup my indexes via the console and made the ones ""searchable"" I wanted to be searched (mostly text, some ints).  Then I have a few fields I DON'T want to be searched, but want to be able to filter.  Given the documentation and help tool-tips I set them up to support Facets.  

Specifically, the tool-tip text for Facets says: ""Specifies whether facets can be calculated for this field to enable filtering"".

When I do that I am able to use the console and do exactly what I imagined it would.  I can do a ""simple"" search across all the fields I wanted searchable and then in the FilterQuery box I can filter off of the two fields I marked as Facet.

For example (in the Console):
Search: bob*
FilterQuery: (and store_id:123 order_created_at:['2017-01-01T00:00:00Z',})

This searches the fields that I wanted for ""bob"" with wildcard support and only shows me results that have that store_id value and is after the provided date.  But if I were to search ""2017"" or ""123"" records would NOT show up because store_id and order_created_at are not marked as searchable.  This is the desired result.

However, if I do the exact same call via the SDK it tells me ""store_id"" and ""order_created_at"" must be made searchable first.

ordersSearch.search({
        query: ""bob*"",
        filterQuery: ""(and store_id:123 order_created_at:['2017-01-01T00:00:00Z',})""
 }


Why is the behavior inconsistent?  Is it correct that I need to make those fields also searchable just to do a filter on them?  Why does it work in the Console without them being searchable?  Am I doing something wrong on the SDK side?

Edited by: Soabirw on Jul 26, 2018 10:15 AM

Edited by: Soabirw on Jul 26, 2018 10:15 AM"
Amazon CloudSearch	"CloudSearch be able to index documents directly
Is there any option/tool in Amazon CloudSearch to index the documents (PDF, Word, Excel, PPT etc) directly? 
My requirement is that, I'll be having a web portal hosted in AWS through which user can add some post along with attachments (say pdf or word doc). Once submitted, the post can be searched by either through the text in the post or through the text inside the attachment. How is that possible with CloudSearch? Please help.

Thanks in advance,
HRM"
Amazon CloudSearch	"Cloudwatch Agent failed to retry after 500 reponse code
My mistake. Feel free to delete. Moving to the proper forum.

Edited by: mjones on Jun 11, 2018 10:08 AM"
Amazon CloudSearch	"Cloudsearch soft/hard commit times
Is there a way to configure/determine the soft/hard commit times for cloudsearch?"
Amazon CloudSearch	"sort by matching text not by _score or other fields
Hi ,
In our cloudsearch instance,
I am searching for 'sai kiran' on name field. It is showing 'sai' first and then 'sai kiran' next because of _score field.  Is there any way to avoid sorting by default _score field?

Actually i don't want to sort my result. But it is happening by default on _score field

I tried weight also, but no success.

any suggestions?

Thank-you."
Amazon CloudSearch	"CloudSearch vs ElasticSearch
trying to find an updated and current comparison of the two, as i need to choose between the two for searching against an ecommerce product list."
Amazon CloudSearch	"Re: CloudSearch vs ElasticSearch
I am not sure what type of comparison information you are looking for, but I used this when I did my evaluation.

http://harish11g.blogspot.com/2015/07/amazon-cloudsearch-vs-elasticsearch-vs-Apache-Solr-comparison-report.html

We use both AWS' CloudSearch and ElasticSearch in our production systems. The basic differences we have found include:


Overall CloudSearch is a more mature AWS offering. For example AMI integration is better with CloudSearch.
CloudSearch works great for supporting end user document searching.
ElasticSearch works great for data analytics. For example log processing.
ElasticSearch gives you tools like Kibana out of the box. CloudSearch is just an API."
Amazon CloudSearch	"Re: CloudSearch vs ElasticSearch
I was just informed of this from AWS Support Rep.  I wish i would have known this 2 weeks ago when i started building against cloudsearch.

Cloudsearch is not being pushed as a product and ElasticSearch has replaced it. I do not know of any plans currently to upgrade ES to a newer version, but no doubt there's going to be an upgrade path. I just don't know what that is right now so can't commit to give any timelines or versions."
Amazon CloudSearch	"Re: CloudSearch vs ElasticSearch
CloudSearch is a mature product, that serves 1000s of customers very well for their full-text, search use cases. We are not phasing out CloudSearch.

As long as our customers want to adopt CloudSearch, we will continue to provide it!"
Amazon CloudSearch	"Re: CloudSearch vs ElasticSearch
It's good to know that CloudSearch isn't going to go away, but why is it so neglected?  There hasn't been an API update since 2014, which means it isn't using a recent version of Solr.  So features like spell checking (""did you mean?"") or fixes to the fuzzy matching algorithm are missing.

In general, we're happy with CloudSearch so far, but since you're charging people to use it as a managed service, at least keep it updated to the latest major version of Solr."
Amazon CloudSearch	"Re: CloudSearch vs ElasticSearch
AWS usually post articles to their weblogs for products that are under active development.

However the last article published for CloudSearch is dated 8 May 2015: https://aws.amazon.com/blogs/aws/tag/amazon-cloud-search/.

In contrast, new blog posts about ElasticSearch are continuously published to AWS weblogs: https://aws.amazon.com/blogs/database/tag/elasticsearch/. So far they have published 6 posts about ElasticSearch in 2018 alone.

It seems to me that CloudSearch is in maintenance mode and going forward, new features are no longer added to it.

Cheers,
Behrang"
Amazon CloudSearch	"storing and retrieving text field with carriage returns in it
How can I store a carriage return in a text field and get it returned (via JSON).

I am using the HTTP POST method to update our domain -- passing the data via JSON.  If I just pass in a carriage return it completely disappears in the domain data.  If I escape it (i.e. 'slash''slash''n') I get back a 'slash' followed by an 'n' -- which is not a carriage return.

Thanks in advance,
Darrin

Edited by: DarrinSkinner on Sep 4, 2014 5:52 PM"
Amazon CloudSearch	"Re: storing and retrieving text field with carriage returns in it
We also have this issue.
\n is ignored when the documents are uploaded to CloudSearch via the JS SDK."
Amazon CloudSearch	"Re: storing and retrieving text field with carriage returns in it
Can we please get some guidance on this?"
Amazon CloudSearch	"Re: storing and retrieving text field with carriage returns in it
The best advice I can give is -- don't use CloudSearch. AWS doesn't seem to be supporting it anymore as evidenced by the lack of responses to many relevant questions in this forum."
Amazon CloudSearch	"Re: storing and retrieving text field with carriage returns in it
+1 I have the same problem and can't find an answer on this.

Also have the problem explained here: 
https://stackoverflow.com/questions/47719491/why-wont-cloudsearch-find-substring-matches-in-filename-text-field

Any guidance would be appreciated. I see mixed messages on wether CloudSearch is ""obsoleted"" by ElasticSearch or not?"
Amazon CloudSearch	"Suggester problem
I have added a field and re-indexed manually. After that I added the same field to suggester and again re-indexed.

Now i have added the data to that suggester field. Added data is searchable through query but suggester is not working why?

There is no option showing to re-index.

how can I get this suggester work?"
Amazon CloudSearch	"Re: Suggester problem
I found that even though there is no changes to make to the suggester, just hitting edit and update will make reindex."
Amazon CloudSearch	"Clone CloudSearch domain
Is there any option to clone CS domain configuration (fields) to other domain?"
Amazon CloudSearch	"Re: Clone CloudSearch domain
There isn't a simple way to do that at the moment. You can do it via the APIs, but it's a bit of work. 

My recommendation is to always create the domains via the SDK or the CLI. Then you can script it, and recreate it on demand. This is very useful for setting up Q&A and staging stacks. It is a bit of work to do the first domain, but it makes life much easier going forward.

We are looking into a 'clone domain' feature but do not have a date for it at this time."
Amazon CloudSearch	"Re: Clone CloudSearch domain
There is a script here that can help you do it:

https://gist.github.com/winzig/7957756827df311ac5f30046dd707723"
Amazon CloudSearch	"how to make AWS:/cloudsearch work with nginx service which is running in K8
Hi There,

We  use AWS: /cloudsearch, and use a EC2(nginx) to be a proxy to route web apps search requests to /cloudsearch. We plan to move nginx proxy service from that EC2 to google cloud K8s engine. That K8s engine is running behind a load balance. Below is the current /cloudsearch control access policy. Ip address ""54.204.xx.xx"" is current EC2 nginx ip address.
The new k8s engine's ip will be ""10.7.245.xx"", the K8s load balance ip is ""35.184.192.xxx""

So my question is, how to make AWS:/cloudsearch work with nginx service which is running in K8s engine.

Here is the current /cloudsearch control access policy:

{
  ""Version"": ""2012-10-17"",
  ""Statement"": [
    {
      ""Sid"": """",
      ""Effect"": ""Allow"",
      ""Principal"": {
        ""AWS"": ""*""
      },
      ""Action"": [
        ""cloudsearch:suggest"",
        ""cloudsearch:search""
      ],
      ""Condition"": {
        ""IpAddress"": {
          ""aws:SourceIp"": ""0.0.0.0/0""
        }
      }
    },
    {
      ""Sid"": """",
      ""Effect"": ""Allow"",
      ""Principal"": {
        ""AWS"": ""*""
      },
      ""Action"": ""cloudsearch:document"",
      ""Condition"": {
        ""IpAddress"": {
          ""aws:SourceIp"": ""54.204.xx.xx/32""
        }
      }
    }
  ]
}"
Amazon CloudSearch	"Uploading schema / documents - issue
I'm putting together a custom search engine for a planet friendly NGO. There are two steps involved

Creating the index schema
Uploading the data documents
Some issues:

Converting csv to JSON or sql to JSON the index messes up - doesn't relate to the original schema
It appears that the AWSCS console is not splitting the JSON rows into documents -- it uploads a whole table dump as one document
Can anyone offer any tips as how to get an AWSCS valid conversion from either SQL or CSV?

These things would really help


A fragment of a known working format
Any tool that might help


Thanks for taking a look at this -- any comments appreciated"
Amazon CloudSearch	"Cloudsearch cold start?
I'm Searching and Ranking Results by Geographic Location using CloudSearch in a development environment (with few searchable documents around 10). And I'm getting response time of ~10 sec the first time I call the endpoint, and in the successive calls response times is of ~500ms. 

Is this the exceptive behaviour of Cloudsearch??"
Amazon CloudSearch	"50,000 documents suddenly deleted from Elasticsearch
I had an elasticsearch cluster with an open access policy, but with a random string for the cluster name so that the URL would not be easily discoverable.

When I consult the cloudsearch monitoring tools, I see there is a 15 minute gap in all metric streams from 20 March 18:57 to 20 March 19:15. Before this time there had been around 50,000 documents, and afterwards there were 0.

Could this be a bug in the AWS systems or was there really a person or bot that sent the delete-all request to my cluster? I am wondering if it could be a system failure because of the lack of metrics in the monitoring graphs during the time in question.

When I attempt to do a restore according to https://docs.aws.amazon.com/elasticsearch-service/latest/developerguide/es-managedomains-snapshots.html I am confronted with a 'snapshot does not exist' 500 error."
Amazon CloudSearch	"index fields capacity
is it possible to increase the limit of index field more than 200 per domain? If not any solution to recommend?"
Amazon CloudSearch	"CloudSearch isn't loading all of my documents after upload
I am using 10 search.m3.2xlarge instances split across 5 partitions to store 38+ million searchable documents. According to the AWS CloudSearch documentation, they should be loaded in batches smaller than 5MB every 10 seconds (or more) and only contain UTF-8 characters. I am uploading 75 batches with 2,000 documents (around 4MB) every 12 seconds and have made sure to scrub any non-UTF-8 characters. The index status indicates ""ACTIVE"". I also am making sure I don't re-upload the same document twice, so these are all just insertions. I upload these documents in batches not exceeding 150,000 per process run. This process runs several times a day, so I would expect to see my searchable documents grow by 500,000 - 750,000 per day. The problem is that it only grows by 110,000 - 175,000 per day.

Here's some code snippets:

List<Video> videos = uploadService.getVideosForUpload();
final Integer batchSize = 2_000;
Lists.partition(videos, batchSize).forEach(
    b -> {
        logger.info(""Batch size: {}"", b.size());
        uploadService.upload(b);
        try {
            Thread.sleep(12_000); // 12 seconds
        }catch(InterruptedException e) {
            // ok, we are moving on...
        }
    }
);
Here's part of the uploadService.upload(b) code:

@Transactional
@Async
public CompletableFuture<List<Video>> upload(List<Video> videos) {
    logger.debug(""Uploading {} videos."", videos.size());
    if(videos.isEmpty()){ return CompletableFuture.completedFuture(new LinkedList()); }

    StringBuffer doc = new StringBuffer();
    for(Video video: videos){
        CloudSearchVideo cloudSearchVideo = mapToCloudSearchVideo(video);
        doc.append(""[{\""type\"":\""add\"","");
        doc.append(""\""id\"":\""""video.getVideoId()""\"","");
        doc.append(""\""fields\"":""+cloudSearchVideo.toJson());
        doc.append(""}],"");
    }
    // remove trailing comma
    doc.setLength(doc.length() - 1);

    byte[] docBytes = doc.toString().getBytes(StandardCharsets.UTF_8);
    try (InputStream inputStream = new ByteArrayInputStream(docBytes)){
        UploadDocumentsRequest uploadDocumentsRequest = new UploadDocumentsRequest();
        uploadDocumentsRequest
                .withContentLength(Long.valueOf(docBytes.length))
                .withContentType(ContentType.Applicationjson)
                .withDocuments(inputStream);

                UploadDocumentsResult result = CloudSearch.getClient().uploadDocuments(uploadDocumentsRequest);
                logger.info(""UploadDocumentsResult: {}"", result.toString());
// the result.getStatus() always comes back as ""success"", but I do handle failures too.
....
    return CompletableFuture.completedFuture(videos);
}
I don't ever receive any errors, but my searchable documents count increases way to slowly. Thanks!

https://stackoverflow.com/questions/49242201/cloudsearch-isnt-loading-all-of-my-documents-after-upload"
Amazon CloudSearch	"dynamic fields as source for another field
In the documentation for Cloudsearch, it says: 

You can specify dynamic fields as sources for other fields. A field's source attribute supports wildcards, which enables you to specify a pattern that matches a group of dynamic fields. For example, to search all fields generated from the *_t dynamic field, you could create a field called all_t_fields and set its source attribute to *_t. This copies the contents of all fields whose names end in _t into all_t_fields. Note, however, that searching this field will search all fields that match the pattern, not only dynamically generated fields.

In my Indexing Options, I have a field called all_loc_fields with type latlon.  I also have a field called loc_* with type latlong.  I click on Source Field > add for all_loc_fields, to try to add loc_* as an a source field, but it doesn't show up.  What am I doing wrong?"
Amazon CloudSearch	"how to post single document to cloud search with other than documents/batch
I referred AWS cloud search documentation and found one endpoint (HTTP) which ends with ""documents/batch"". This endpoint is working fine. Now my doubt is , is this the endpoint to use for both batch and single or is there any other endpoint for single document to upload. I have not found any other way to upload documents to cloud search (single-by single) other than in batch. Calling a batch is more costly. Please share your views."
Amazon CloudSearch	"How to Submit Search Query as POST request?
Hey All,

I'm having a bit of an issue.  I'm using the AWS SDK for .NET, and we have a rather large structured query that we're trying to run against the database (with us planning a feature that's going to necessitate making the query even longer).  It's currently sometimes too long to be sent as a GET request, and the SDK is returning a 413 FULL HEAD error when I try and send it (as makes sense to do, if it's sending a GET request internally).  The documentation says:

---
The query string must be URL-encoded. The maximum size of a search request submitted via GET is 8190 bytes, including the HTTP method, URI, and protocol version. You can submit larger requests using HTTP POST; however, keep in mind that large, complex requests take longer to process and are more likely to time out.
---

So, I've been looking around for how to send a search query in a POST request, as that should solve my problem, and I've been completely unable to find anything that indicates how one does this (either through the SDK, or if that's not possible, how to structure the request content in a normal HTTP request to make it work). Any information as to how to do this using either method (in the case of the non-SDK HTTP request, specifically, this would be how exactly to structure the request) would be helpful."
Amazon CloudSearch	"default CloudSearch region in aws console
Hello,

I've noticed that browsing to https://console.aws.amazon.com/cloudsearch/ has started redirecting my browser to us-east-1 as default, I've been using cloudsearch for over a year and browsing this URL, it would previously redirect me to ap-southeast-2

I'm happy to update my bookmarks, but this behavior seems different now.

With thanks"
Amazon CloudSearch	"Re: default CloudSearch region in aws console
This no longer appears to be a problem, and is behaving as before.

This thread can be closed."
Amazon CloudSearch	"Uploading Documents - Successful upload - Documents not present
After waiting some time, I seem to suddenly be unable to add new documents to the CloudSearch domain. I have:

Double checked the endpoint is correct (with correct zone)
Waited over 12 hours
Only ~18 documents (we are evaluating AWS)


So far evaluation hasn't been great. The instance is insanely slow to index, there's no easy way to update suggesters, and now we're suddenly not having any uploads show up, despite success responses from CloudSearch.

I am definitely not familiar enough to know why or how here. Here's what I'm doing:


Submitting a document from Lambda NodeJS (which is fed from a DynamoDB stream)
Seeing a successful completion response from CloudSearch in the callback


What I'm not seeing:

Any update to the number of documents
Any update after 12+ hours
Any successful searches for the full, exact match terms that have just been uploaded, whether through my application or through the console search
Any problems with searching: other terms from days ago work. Terms from yesterday or today do not.


The experience with this service hasn't been great. The Lambda functions take an astonishing amount of time to complete, the dynamodb is awkward to use, and the CloudSearch service has been unreliable, at best. I'm really hoping the support here makes up for this and/or that we're simply not using the services to their greatest potential, because it's going to be difficult to recommend the use of these services otherwise.

Thank you very much to anyone who reads this and has any insights, they're very much appreciated."
Amazon CloudSearch	"search result was wrong
How to fix  query for search   animal and animated

my  sample data
 fields=>name=>""animal text"",""subcatof""=>12
 fields=>name=>""animated text"",""subcatof""=>12

 just test query like 
search?q=name:'animal'&size=10&fq=subcatof:'12'&q.options={fields:}&q.parser=structured

why output   show me 2 record .
it's should show me 1 record   name=>""animal text""

Thanks.

Edited by: Ouan on Jan 19, 2018 6:44 PM"
Amazon CloudSearch	"About auto delete the backup snapshot
Hello,

We have create the schedule to create the backup using Cloudwatch to create the snapshot but now we want to delete that snapshot...can we make any script to auto delete that snapshot file.

Is this possible using lamda or cloudwatch...please help..

Thanks"
Amazon CloudSearch	"Re: About auto delete the backup snapshot
Hello,

Can anyone help in this..

Thanks.."
Amazon CloudSearch	"AmazonCloudSearchDomain exception
We are getting this error from AWS cloudsearch at about 25% rate. This is the second instance of us seeing this error in past 2 months. First time we fixed it by restarting the servers. Appreciate any help in understanding the root cause for this error.

com.amazonaws.services.cloudsearchdomain.model.SearchException: org.apache.solr.search.SyntaxError: Syntax error in query: field (content_format_type) is not searchable. (Service: AmazonCloudSearchDomain; Status Code: 400; Error Code: SearchException; Request ID: null)

Thanks."
Amazon CloudSearch	"How to fetch only the required fields from the results?
I have the below sample data set coming

Is there a way I can build my search string to fetch only the ""fields"":{""answer"":""Test it"",""qid"":""q002"",""question"":""How to test""}} or ""answer"":""Test it"",""qid"":""q002"" out of the results?


{""status"":{""rid"":""pNLRho4swAgKjJ3a"",""time-ms"":12},""hits"":{""found"":1,""start"":0,""hit"":}}"
Amazon CloudSearch	"Search using WildCard
Hi,

I am working on using Cloud search for our websites to search data and able to search strings using structured queries. 

We have requirement like if I have text 'AU DKT 611' and search for '611' or search for 'DKT', it should return result. Means result should be return for any match for text.

This is a important requirement for our sites so is there way to implement this ?

Thanks
SRRACH"
Amazon CloudSearch	"How to create a CloudSearch document batch from JSON data?
The data I want to use with CloudSearch is currently in the form of a single JSON file of around 25MB.

Are there tools I can use to create individual document batch files of 5MB or less from this, or do I just need to create these manually? 

In other words, I want to know the best way to produce batch files from a JSON file that simply describes an array of data.

(Excuse my ignorance — I'm new to CloudSearch, and I've had a look through the forum, but haven't found anything.)

Edited by: samdutton on Dec 20, 2017 10:36 AM"
Amazon CloudSearch	"How does CloudSearch handle Spidering/Indexing?
Just as the subject asks, how does AWS CloudSearch handle spidering/indexing of a website? I couldn't find much in the documentation.

Also, am i able to apply my own keywords to CloudSearch?

-Thanks

Edited by: mblog on Dec 18, 2017 7:36 AM"
Amazon CloudSearch	"Problem constructing cloudsearch domain from standard XML
I am a new user to cloudsearch with a file of names, addresses and phone numbers in XML.  Here is a sample that I attempted to use to create a cloudsearch domain from the dashboard.
<batch>
 <add  id=""111"">
  <first_name> Joey        </first_name>
  <last_name>  Donuts      </last_name>
  <phone>      9848022541  </phone>
  <city>       Los Angeles      </city>
 </add>
</batch>

To configure my index fields I pointed to this toy file on my local machine.  The suggested Index Field Configuration had 4 index fields named content, content_encoding, content_type, and resourcename. I was looking for first_name, last_name, phone, and city.  I know that I can change to 
<batch>
 <add  id=""001"">
  <field name=""first_name"">Joey</field>
  <field name=""last_name"">Donuts</field>
  <field name=""phone"">9848022541</field>
  <field name=""city"">Los Angeles</field>
 </add>
</batch>

This format will get the field names I want but the resulting domain will not ingest the real file correctly.
Is there a way to construct the index fields so the original XML layout will work?  Alternatively, is there an automatic way to convert my file from the first format to the second format?"
Amazon CloudSearch	"Re: Problem constructing cloudsearch domain from standard XML
At least for JSON documents, the fields have to be in a dictionary inside of a key's value. This is what your doc would look like in JSON format:
[
	{
		""type"": ""add"", 
		""id"": ""111"", 
		""fields"": 
			{
				""first_name"": ""Joey"", 
				""last_name"": ""Donuts"", 
				""phone"": ""9848022541"", 
				""city"": "" Los Angeles""
			}
	},
       {
		""type"": ""add"", 
		""id"": ""001"", 
		""fields"": 
			{
				""first_name"": ""Joey"", 
				""last_name"": ""Donuts"", 
				""phone"": ""9848022541"", 
				""city"": "" Los Angeles""
			}
	}
]

Cloudsearch's documentation makes it really hard to understand how to format the data (surprise!), but there was an example that barely showed it.

This is the page where I found the JSON example: http://docs.aws.amazon.com/cloudsearch/latest/developerguide/preparing-data.html

Looking at the XML example, looks like you need to format the field names' elements (or whatever they're called) to  <field name=""first_Name"">Joey</field> 
 and like that"
Amazon CloudSearch	"Re: Problem constructing cloudsearch domain from standard XML
Thanks justaskin.  Your xml suggestion is exactly as I presented in the lower half of my question.  I am seeking a way to be able to handle the more usual xml format.  
Your jason layout makes me a bit jealous."
Amazon CloudSearch	"CloudSearch domain is PROCESSING for more than 48 Hours
Hi,

I changed the scaling options for my Domain after uploading more than 30,000,000 documents and it is processing for more than 48 hours.
This domain is now regularly being added with new documents in very small chunks (this should be a production domain and I am waiting for the process to complete in order to activate a new feature)

Domain name: howazit-general-eu-west-1

Should it take that long for this process ?
How long should it take?
Did I do anything wrong?

Thanks,
Roy"
Amazon CloudSearch	"Re: CloudSearch domain is PROCESSING for more than 48 Hours
I'm having a similar problem. Did your processing finish? If so, how long did it take?
-Dan"
Amazon CloudSearch	"Re: CloudSearch domain is PROCESSING for more than 48 Hours
Curious to know as well. Re-indexing a 30-document domain with about 18 indexes took an hour, so I can't imagine how long it would have taken a 30,000,000 document domain"
Amazon CloudSearch	"Are facet fields searchable?
A little stumped on how facets work. I've read in the documentation that facets are index fields that represent a category that you want to use to refine and filter search results.

However, search queries through the console aren't returning documents that have my search string in one of the fields. The field is a literal-array facet, so I tried searching for the exact string value, but still no results. Do searches not go through facet fields? If not, how on earth are you supposed to search for values that are in facet fields?"
Amazon CloudSearch	"After deleting all docs, re-index is on 12th day of processing ZERO docs
Our Cloudsearch domain had 91,000,000 docs in it with 14 partitions. On Wed 2017-11-22, I deleted all documents from the domain. We had previously received a partition limit increase on this domain, so I couldn't just delete the domain and start from scratch. The delete process finished at 2017-11-22 23:33 UTC. Index utilization remained constant at 75%, so I manually started a re-index after changing the minimum partition count to 1. The index utilization dropped to zero almost immediately. It is still re-indexing (""PROCESSING"") as of this writing (2017-12-04 14:38 UTC) and still holding steady at 14 partitions. However, there are zero documents in the domain. Why should it take more than 7 days to re-index ZERO docs? Meanwhile we are paying for 14 search.m3.2xlarge instances!

Our domain is: matters-staging-full

Most importantly, we need the indexing to finish so we can start uploading a new set of docs. This verification is also holding up promotion to production.

-Dan

Edited by: dsyrstad on Nov 27, 2017 9:00 AM
Edited by: dsyrstad on Nov 27, 2017 9:32 AM
Edited by: dsyrstad on Nov 29, 2017 6:47 AM
Edited by: dsyrstad on Dec 1, 2017 6:17 AM

Edited by: dsyrstad on Dec 4, 2017 6:37 AM"
Amazon CloudSearch	"Re: After deleting all docs, re-index is on 12th day of processing ZERO docs
It's now been 9 days without any kind of response from Amazon."
Amazon CloudSearch	"Re: After deleting all docs, re-index is on 12th day of processing ZERO docs
Have you looked at other threads that are having this same issue? It is not worth to use CloudSearch as we get very barely response from CloudSearch team. There is a best search as service than CS."
Amazon CloudSearch	"CloudSearch I'm Desperate!!! Instance stuck in ""Processing"" for 48+ hours!
We have a single small instance search domain with 55,414 documents, 35 index fields.

Over 48 hours ago(!) I configured a rank expression based on the values or 3 fields and the time() function. The instance is still PROCESSING the submitted rank expression. This is REALLY USELESS to my client.

This also happened to us the day before, and it was stuck of over 24 hours, so we killed the instance and tried firing up another instance... same thing happened again.

HELP!!!

PS Attached a screenshot, worth 1000 words.

Edited by: fairstream on Aug 31, 2012 3:56 PM"
Amazon CloudSearch	"Re: CloudSearch I'm Desperate!!! Instance stuck in ""Processing"" for 48+ hours!
Hi,

Does your domain still show ""PROCESSING""? Both of your domains appear to be running with the latest configuration values you sent.

Thanks,
Ekechi"
Amazon CloudSearch	"Re: CloudSearch I'm Desperate!!! Instance stuck in ""Processing"" for 48+ hours!
Hi Ekechi, thanks for your reply. BUT it is the Rank Expression that is still processing... See attached.

It has now be 5 days of this. Steps to reproduce:

1. Fire up a new instance with around 30 index fields
2. Load up 50k documents
3. Add a new rank expression. Rank Expression is stuck/frozen in PROCESSING... (now for 5 days)

I have confirmed these steps twice, and both times, it froze for over 24 hours. The first instance I killed because I thought it was an isolated case. So I fired up a second instance, did the same steps, and it has now been 5 days, and it's stick ""stuck"" in processing. My client can't believe this and is asking me to consider other cloud searching solutions... which I'd rather not do... please help!

Please see the attached screenshot.

Edited by: fairstream on Sep 3, 2012 10:56 AM"
Amazon CloudSearch	"Re: CloudSearch I'm Desperate!!! Instance stuck in ""Processing"" for 48+ hours!
Sorry, I meant rank expression, not domain. We are investigating this issue. Thanks for your patience. 

Ekechi"
Amazon CloudSearch	"Re: CloudSearch I'm Desperate!!! Instance stuck in ""Processing"" for 48+ hours!
Just so everybody knows... it has now been 2 weeks, and my search domain is still stuck in processing my new rank expression.

I should probably just give up and kill it, I am leaving it turned on in the hopes that AWS can find the solution to this problem. This isn't some random occurrence, but a truly reproducible bug.

I've heard nothing back other than the vague answer above from Ekechi, which although somewhat encouraging, doesn't change the fact that it is still broken!

My client wants out which means I need to start looking elsewhere... I have about 48 hours to decide. Any suggestions (or AWS can you fix this for goodness sake)?!"
Amazon CloudSearch	"Re: CloudSearch I'm Desperate!!! Instance stuck in ""Processing"" for 48+ hours!
We deeply apologize for the delay in our response. We understand your frustration and are very grateful for your patience at this time.

Before explaining the issue you experienced, please note the following: 
After defining or deleting an index field, IndexDocuments must be called. Any other changes (such as defining a rank expression) will not complete their processing until indexing is complete.

We apologize that your domain is stuck in a processing state and would like to take the time to explain the series of actions that caused this behavior. Your domain was in a healthy state with properly configured index fields. Afterward, an index field was deleted. This action should return a status of RequiresIndexDocuments.  Due to a CloudSearch bug you are not receiving the correct status for your domain after deleting the index field. Consequently, the rank expression that was added afterward appeared to be processing but was actually waiting for IndexDocuments to be called.

In order to get the domain in an active state, indexing must be run, which can be accomplished through use of the Console, CLTools or the API. Please note that the Console requires the index to be in a REQUIRES_INDEXING state for it to display the 'Run Indexing' link. This state can be achieved by adding an index field or modifying the text options (e.g., adding a stop word).

Please let us know if you require any assistance. 

Again, we apologize for the behavior of our system and our delayed response."
Amazon CloudSearch	"Re: CloudSearch I'm Desperate!!! Instance stuck in ""Processing"" for 48+ hours!
Thank you jon-cs @ aws for the explanation... 

Is there any chance you could credit our account for two weeks of CloudSearch instance that we were waiting for your reply? The only reason I didn't shut down the instance was to make sure this bug was found (you'll note we did not add any documents or perform a search requests).

PS I just now just shut down the instance after receiving your reply"
Amazon CloudSearch	"Re: CloudSearch I'm Desperate!!! Instance stuck in ""Processing"" for 48+ hours!
For anyone who is considering to use CloudSearch, I recommend not to use it. The issue is still there even when it has ZERO docs. I have 4 fields. I recently added one field to it and then re-indexed it. It took about 30 minutes to complete. I opened a case with the CloudSearch support for other issue and they responded me back 1 week later so it is not really worth your time. There is a better search service than this."
Amazon CloudSearch	"Search for words having diacritics
I have indexed documents containing text fields that can have words with diacritics. In order to be able to upload such a document, I had to convert all non UTF-8 characters (for example the letter ă, quite frequent in Romanian) to codes (in this case ă -> \u103). The problem arises when prefix searching for such a field. Structured query expressions must be enclosed in single quotes, but if I have a backslash in the query expression, I get an error. So, I cannot prefix search (prefix field=content 'Garnitur\u103'), neither 'Garnituru103'. 'Garnitură' would return only indexes with prefix 'Garnitura', and that's not what would be expected. Any ideas, how to solve this?

Edited by: esztb on Nov 23, 2017 2:12 AM"
Amazon CloudSearch	"503 (Service Unavailable: Back-end server is at capacity)
I get this message in the browser constantly when I deploy new builds:

 503 (Service Unavailable: Back-end server is at capacity) 


My server instance ID: i-0ace4da89f5f1ad75

If you could help in any way it would be greatly appreciated, thanks."
Amazon CloudSearch	"special charaters are giving all search result
When I search single special character only like @, #, $, or % etc. Cloud Search gives  me all search result even no one search contains any mentioned character. Is there any special characters that cloud search removes  or replace those characters with  anything else and which special characters cloud search supports?"
Amazon CloudSearch	"Hindi keywords are not being searched properly in CloudSearch
I have enabled multi-language support for the searching fields and it's working OK for other languages except Hindi language and when I try to search some keywords from Hindi language, then it returns the all Hindi topics created.  For example. if I search *रोजलिन * then it will return the topic containing the word  *रोजलिन *  along with other topics which don't contain this keyword. so I just wanted to know if there is any settings for keyword in console or do I need to send some identifier or parameter like things in the request.

Edited by: manojwtb on Nov 15, 2017 5:03 AM

Edited by: manojwtb on Nov 15, 2017 5:03 AM"
Amazon CloudSearch	"What is CloudSearch's availability SLA if multi-AZ not setup
If I use Cloudsearch in a non multi-AZ mode (to save cost), is the availability (uptime) SLA roughly equals the EC2's availability?

If the cloudsearch instance gets down for whatever reason, is Amazon going to bring it back automatically? What is the MTTR for that?"
Amazon CloudSearch	"CloudSearch - search domains limit
Going through the following link, it found that  number of search domains are limited to 100 for each AWS account.

http://docs.aws.amazon.com/cloudsearch/latest/developerguide/limits.html

The same is discussed in the another thread https://forums.aws.amazon.com/thread.jspa?messageID=392060񟭼

Is there any way we can increase the limit ?"
