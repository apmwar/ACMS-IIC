label	description
Amazon Simple Notification Service	"Limit Increase: SNS Text Messaging
Hi guys,

It is very urgent request as our application is in Production since yesterday, users are not able to register our app. I logged a ticket yesterday but still no response from the support team. I have to log a new one today. Can you please escalate this ticket for us? It has been 2 days but no response. 

We logged two tickets:
Case ID
5710267551

Case ID
5704644231

Thank you"
Amazon Simple Notification Service	"Re: Limit Increase: SNS Text Messaging
How long did you end up waiting?"
Amazon Simple Notification Service	"How long to process limit increase request
We have a long history with AWS, running multiple accounts.  I urgently need a limit request granted so we can continue to send internal SMS messages using SNS and have not seen any progress on the ticket. Case ID is 5605914481.

Thank you"
Amazon Simple Notification Service	"Re: How long to process limit increase request
Care to share how long this request took in your case?"
Amazon Simple Notification Service	"Cannot create IAM roles on application endpoints
Whenever I try to create IAM roles on an application endpoint on SNS (clicking on the ""Create IAM Roles"" button on the modal), the brwoser inspector throws an error. I tried this on several browsers, and it doesn't seem to work anywhere.

ReferenceError: _isDesktop is not defined
    at l.o.loadIAMRole (sns-tail.201811051036.min.js:2)
    at angular.min.js:198
    at f (angular.min.js:214)
    at l.$eval (angular.min.js:125)
    at l.$apply (angular.min.js:126)
    at HTMLButtonElement.<anonymous> (angular.min.js:215)
    at HTMLButtonElement.dispatch (jquery.min.js:3)
    at HTMLButtonElement.v.handle (jquery.min.js:3)


Steps followed:

Enter AWS SNS Console > Applications > Choose an application > Platform Application Actions > Delivery Status > Create IAM Roles.

Am I the only one having this issue? Is this a bug?

Edited by: kyngo on Nov 8, 2018 3:02 AM"
Amazon Simple Notification Service	"Re: Cannot create IAM roles on application endpoints
Hello,

Thank you for posting your query.

I have tried to create an IAM role using the same steps but was not able to reproduce the mentioned error on Chrome (Version 70.0.3538.102 (Official Build) (64-bit)) on Mac OSX.

Can you please let me know if you are able to save the IAM configuration or also getting an error in the AWS console when creating a role?"
Amazon Simple Notification Service	"Re: Cannot create IAM roles on application endpoints
I tried on Chrome, Firefox and Safari on macOS, didn't work.

I can create roles from the IAM console without a problem.

When I press the ""Create IAM Roles"" button on SNS, no fields are filled, and the error reported above shows up. Looks like an AngularJS error. Gonna try again in case it works in other browsers/OSes.

UPDATE: 
Forgot to mention, this happened on the us-east-1 region.
Screenshots showing the error:

Chrome: https://i.imgur.com/29I6hpr.png
Firefox: https://i.imgur.com/LJn2RpY.png
Safari: https://i.imgur.com/7WQYv63.png

Edited by: kyngo on Nov 19, 2018 12:09 AM

Edited by: kyngo on Nov 19, 2018 12:11 AM"
Amazon Simple Notification Service	"Re: Cannot create IAM roles on application endpoints
I've been facing the same issue."
Amazon Simple Notification Service	"Re: Cannot create IAM roles on application endpoints
We are facing this issue in US-East-1 as well."
Amazon Simple Notification Service	"Re: Cannot create IAM roles on application endpoints
Same for me, looks like JS is broken on that page.

Just workarounded the problem by manually creating the roles.
Looks like that the role names must be hardcoded to SNSMobileAppFailureFeedback and SNSMobileAppSuccessFeedback"
Amazon Simple Notification Service	"Re: Cannot create IAM roles on application endpoints
I tested eu-west-1 as well, doesn't work either. Gonna try Yury1's suggestion."
Amazon Simple Notification Service	"Re: Cannot create IAM roles on application endpoints
I have the same problem as of today!

Attached is error in console and chrome version."
Amazon Simple Notification Service	"Re: Cannot create IAM roles on application endpoints
I'm also facing the same issue as of today ! tried chrome and firefox (on mac and on windows) with the same problem."
Amazon Simple Notification Service	"subscription is pending confirmation/PendingConfirmation for phone endpoint
Hi,
I created 2 topics, then subscribed to the topics for an android device, all returned success.
then after some days i called GetSubscriptionAttributes i found one of the subscription's PendingConfirmation was true (which could not be deleted) while the other one is false. 
same situations happended under other topics. 
i do not know why the subscription is pending and what can i do? 
here are the 2 different subscription attributes
{
 ""Attributes"": {
  ""PendingConfirmation"": ""true"", 
  ""Endpoint"": ""arn:aws:sns:us-west-2:owner:endpoint/GCM/12031_gcm_phone/fack"", 
  ""Protocol"": ""application"", 
  ""RawMessageDelivery"": ""false"", 
  ""ConfirmationWasAuthenticated"": ""true"", 
  ""Owner"": ""owner"", 
  ""SubscriptionArn"": ""arn:aws:sns:us-west-2:owner:12031_off-3-zh-CN:fack"", 
  ""TopicArn"": ""arn:aws:sns:us-west-2:owner:12031_off-3-zh-CN""
 }, 
 ""ResponseMetadata"": {
  ""RetryAttempts"": 0, 
  ""HTTPStatusCode"": 200, 
  ""RequestId"": ""5d4831a7-ebb7-5c93-9140-654e7fdd2b47"", 
  ""HTTPHeaders"": {
   ""x-amzn-requestid"": ""5d4831a7-ebb7-5c93-9140-654e7fdd2b47"", 
   ""date"": ""Fri, 22 Feb 2019 06:09:46 GMT"", 
   ""content-length"": ""1307"", 
   ""content-type"": ""text/xml""
  }
 }
}
and
{
 ""Attributes"": {
  ""PendingConfirmation"": ""false"", 
  ""Endpoint"": ""arn:aws:sns:us-west-2:owner:endpoint/GCM/12031_gcm_phone/fack"", 
  ""Protocol"": ""application"", 
  ""RawMessageDelivery"": ""false"", 
  ""ConfirmationWasAuthenticated"": ""true"", 
  ""Owner"": ""owner"", 
  ""SubscriptionArn"": ""arn:aws:sns:us-west-2:owner:12031_off-zh-CN-unclose:fack"", 
  ""TopicArn"": ""arn:aws:sns:us-west-2:owner:12031_off-zh-CN-unclose""
 }, 
 ""ResponseMetadata"": {
  ""RetryAttempts"": 0, 
  ""HTTPStatusCode"": 200, 
  ""RequestId"": ""b8bf811c-fc69-5240-af8f-d5f568027594"", 
  ""HTTPHeaders"": {
   ""x-amzn-requestid"": ""b8bf811c-fc69-5240-af8f-d5f568027594"", 
   ""date"": ""Fri, 22 Feb 2019 06:09:46 GMT"", 
   ""content-length"": ""1320"", 
   ""content-type"": ""text/xml""
  }
 }
}
any help would be greatly appreciated!

Regards
guo

Edited by: guoguo on Feb 21, 2019 11:13 PM"
Amazon Simple Notification Service	"How to send specific character from SNS to SMS like degree?
Hello world,

I would like to send an SMS with containing the character ""degree"" ° (or °C if possible) by using SNS.
but ° character is converted by  an ""o"" when i display the SMS on my Android / iPhone.

I can reproduce this issue by using this lambda :
import json
import boto3
 
sns_client = boto3.client('sns', region_name=""eu-west-1"")
 
def lambda_handler(event, context):
    try:
        response = sns_client.publish(
            PhoneNumber=""+33..."",
            Message=""°"",
            MessageAttributes={
                'AWS.SNS.SMS.SenderID': {
                    'DataType': 'String',
                    'StringValue': 'SoPro'
                },
                'AWS.SNS.SMS.SMSType': {
                    'DataType': 'String',
                    'StringValue': 'Transactional'
                }
            }
        )
        print(""published MessageId "" + response[""MessageId""])
    except Exception as e:
        print(""ERROR: push_alert, Unexpected error: "", e)
        raise e"
Amazon Simple Notification Service	"How to send message in json format instead of string? (SNS)
I am using python (boto3). I have some json I would like to send to an email. However, the publish method which has the parameter ""Message"" only accepts string and not any other type."
Amazon Simple Notification Service	"AWS SNS filter policy error: Filter policy is too complex
Hi
   We are using two string array as filter policy values. 
   One string array is of type UUID. Example 
and another having many words in each string.
  For example 

We use 10 -20 UUID and sentences as attributes values. 

 AWS Golang SetSubscriptionAttributesInput  gives FilterPolicy is too complex error.

why is gives Filter policy is too complex error?
Is there any standard specification for Filter policy for string array?"
Amazon Simple Notification Service	"Re: AWS SNS filter policy error: Filter policy is too complex
I posted this question earlier.
I didn't receive any reply. This has blocked our application."
Amazon Simple Notification Service	"AWS SNS filter policy error: Filter policy is too complex
Hi
   We are using two string array as filter policy values. 
   One string array is of type UUID. Example 
and another having many words in each string.
  For example 

We use 10 -20 UUID and sentences as attributes values. 

 AWS Golang SetSubscriptionAttributesInput  gives FilterPolicy is too complex error.

why is gives Filter policy is too complex error?
Is there any standard specification for Filter policy for string array?"
Amazon Simple Notification Service	"Failed to send text messages
Hello,

We set the sns max limit to be 50$ per month, but still seems like sending text messages is not working. We're using the following code:

AWSCredentials awsCredentials = new BasicAWSCredentials( ""abc"", ""efg"" );
 
		Map<String, MessageAttributeValue> smsAttributes =
				new HashMap<String, MessageAttributeValue>();
		smsAttributes.put( ""AWS.SNS.SMS.SenderID"", new MessageAttributeValue()
			.withStringValue( ""WillingApp"" ) //The sender ID shown on the device.
			.withDataType( ""String"" ) );
		smsAttributes.put( ""AWS.SNS.SMS.MaxPrice"", new MessageAttributeValue()
			.withStringValue( ""1.0"" ) //Sets the max price
			.withDataType( ""Number"" ) );
		smsAttributes.put( ""AWS.SNS.SMS.SMSType"", new MessageAttributeValue()
			.withStringValue( ""Transactional"" ) //Sets the type to promotional.
			.withDataType( ""String"" ) );
 
		String message = String.format( ""Welcome To WillingApp\r\nYour Pin Code: %d"", random );
 
		AmazonSNSClientBuilder.standard().withCredentials( new AWSStaticCredentialsProvider( awsCredentials ) ).withRegion( Regions.EU_WEST_1 ).build().publish( new PublishRequest()
			.withMessage( message )
			.withPhoneNumber( phoneNumber )
			.withMessageAttributes( smsAttributes ) );


Can you advice how to troubleshoot this?

Thanks."
Amazon Simple Notification Service	"Where do I find more details about SMS delivery failures?
I just sent a few SMS from SNS and all of them were ""failed"", according to the SNS console. However, I can't see the details of those failures. Where can I find them?"
Amazon Simple Notification Service	"Re: Where do I find more details about SMS delivery failures?
Anyone can help? Messages are not delivered and we are simply thinking now of moving to another provider."
Amazon Simple Notification Service	"Re: Where do I find more details about SMS delivery failures?
I found this article, which helped: https://docs.aws.amazon.com/sns/latest/dg/sms_stats_cloudwatch.html"
Amazon Simple Notification Service	"[.NET] Can publish SNS messages from dev instance, but not on EC2 instance
Hi,

I have a program that occasionally needs to publish to a specific SNS topic. When I run this program on my own PC and attempt to publish the message, it works fine. But when I run the program on my t2.micro instance (running Windows), and then try to publish a message, it throws this exception:

System.NullReferenceException: The object reference is not set to an instance of an object.
   at Amazon.Runtime.DefaultInstanceProfileAWSCredentials.FetchCredentials()
   at Amazon.Runtime.DefaultInstanceProfileAWSCredentials.GetCredentials()
   at Amazon.Runtime.DefaultInstanceProfileAWSCredentials.GetCredentialsAsync()
   at Amazon.Runtime.Internal.CredentialsRetriever.<InvokeAsync>d__7`1.MoveNext()


There is more to this stack trace, but it's a lot of async calls that don't mean much.

This is what the code looks like to publish the message:

m_SNSClient = new AmazonSimpleNotificationServiceClient(Amazon.RegionEndpoint.EUWest3);
 
...
 
this.m_SNSClient.Publish(""[topic arn]"", message);


The program running on my development PC and the one running on my EC2 instance are 100% identical. Again, this works on my dev PC, but does not work on the EC2 instance. Does anyone know why this is happening?"
Amazon Simple Notification Service	"Re: [.NET] Can publish SNS messages from dev instance, but not on EC2 instance
While working on something else I added a new IAM role to the instance with the ""EC2"" preset, and it worked since then. I'm assuming that this role allowed the instance to publish SNS messages (although I don't understand why I was able to do so from my PC, when an EC2 instance requires explicit permission)."
Amazon Simple Notification Service	"SNS suddenly stopped sending SMS
I have a SNS topic that notifies me via email and SMS whenever there are issues on my EC2 infrastructures. For past 6 months or so, everything was working fine. 

Now, out of the blue I stopped receiving SMS on my cell phone. I only receive email messages. I did not change any configuration. The topic still shows that my cell phone is subscribed. I have no idea on how to troubleshoot this. Any pointers?

Thanks"
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
I have been using SNS to send notifications directly to specific phone numbers, and it worked flawlessly a few weeks ago up until I tried again today.  None of them will send.  I hadn't tried for a few days, and it suddenly won't send a single SMS message.  I don't think it's a problem with our code or anything on our end, I think it's a problem with AWS themselves.  Please Amazon respond and let us know how to proceed.  Otherwise you'll be losing a huge number of customers to Twilio or some other service."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
Good day

I have been noticing quite a number of posts and threads regarding this.

Is it possible for you to check the Account spend limit within the AWS console.
Update it to 50 USD and confirm if this has resolved the issue?

If your request amount is $51 or above please let us know so we can engage our Service team.

You can use the below link (which is region specific):
https://console.aws.amazon.com/sns/v2/home?region=us-east-1#/text-messaging/preferences

Regards
Imthian R

Edited by: Imthian@AWS on Dec 12, 2016 11:55 PM"
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
Hello me i have the same problem. 

4 on the 6 servers are down for sms. That mean when we go to our console you have no more the possibility to go for SMS. The 2 last are the asia one. You cant modify the spending limit just put 0, 1 or nothing.  I found lot of people on social media have the same problem. 

There are definitely a huge bug on SNS sms currently."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
We are reaching out to our service team for investigation and we will revert back to you. 

Thank you for working with us.

Regards
Imthian R"
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
We are also experiencing issues with receiving SMS notifications.  For several SNS topics for which there are both email and SMS subscriptions, the emails are rec'd, but the text messages are not.

This issue occurs for us in the Oregon and Virginia regions."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
Setting the spending quota fixed it for me."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
We're at ~50% delivery rate for SMS.  For the same topics, emails are delivered at 100%

We have had no code changes, no SNS-related .NET exceptions/errors are occurring on our end.  We just publish to topics as we've always done, but this SMS issue started occurring for us recently, and evidently several other users of the Simple Notification Service, as well.

An progress update on the investigation/resolution would be appreciated."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
Hello, its started Friday night. And since 4 of the 6 servers are down the 2 last are limited. You can go to the 4 others server you see on the console the sms link has disappear that mean there are a huge problem.

Phil you told us you change the limit but i tried and i was unable to that! normally if you have a new account you can put until 50 dollars (and ask more to the support) But now the only number you can put is: 0 , 1 or nothing, all the other numbers you have an error."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
@AWS
Any update?

The spend limit is not the issue for us."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
I confirm this is not the issue. But this is a huge bug! it seems amazon have a big problem with the sms on SNS and COGNITO but i dont understand:

1- Why its not on the service health dashboard?
2- I wrote to the customer service last friday and nobody came to answers me yet!
3- they know since friday than SNS is down but after almost a week there are no improvement

Just some communication will help us. For my part i configured cognito and SNS and i need sms. 

SMS will running soon or this situation will be longer? 

If somebody have an account to contact the technical team, it should be great to inform them."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
My account spend limit is already at $50.

I updated the information anyways. I would not know if the issue has been fixed because the alarms trigger only under certain conditions. 

I tried sending a test message using console. That worked. But again I don't know if the SMS will be delivered when an alarm is triggered. 

It would be appreciated if you can post a feedback from your technical team."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
Hello me after 2 messages is done i cant send anymore. Also i dont if you have like me the 4 first server (virginia, oregon, ireland and tokyo) when i m on the dashboard you dont have anymore the link to go for the sms. I dont if its your case as well"
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
Please give us some status on this.  Anything, pretty please..."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
crickets --




This is no way to treat an ""Amazon Customer""

Edited by: Amazon Customer on Dec 15, 2016 1:30 PM"
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
hello @Imthian@AWS,

you know how aws amazon changed the life for every aws developper around the world.

Its normal, people like  @webtrend are stressed and push to have some news even im sure you are making the best to fix it.

Take my example. I paid a team to work on SNS for my app. It cost me money. And i need sms to launch this app. Imagine my case saturday i would put ""online"" my app. BIG LAUNCH. And the sms stopped last friday. BIG PROBLEM! So we lost now like a week.

But we totally understand you are facing an issue and ""hey"" you are amazon! You making your best! But the only problem is the lack of communication: On social media forum and even customer service dont give us any answers. So yes a little news to know if we can wait a little more or if we need to considerer some new possibilities outside amazon. This is not at all a ""threat"". This is just we wait for almost 1 week and we deserve a news to know whats happen. If sms will come back on aws amazon. If we can use sns, cognito or alert via SMS. You didnt even make an update on service health center, even everybody there know SNS are down for sms....

If you have any news, any good news i hope, send us! We love amazon and we are there to support you. Just support us as well. Thanks!"
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
This is also a huge problem for us. Our spend is over $10K a month so the spend limit isn't the issue. When I put an email address in the SNS topic it works but SMS is not working.

This morning one of the four SMS recipients got the alert. Then I just tested again after adding the email address and no SMS was sent.

It's very disappointing that AWS isn't stating they know there's a problem and they are looking into it. Any news would be helpful."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
Still SNS is not fixed  any update ?"
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
After more testing and trying to understand what's happened ( and the fix ):

AWS changed how SMS messages are handled. They can now send SMS messages on mass to ""your mailing list"" or something similar. No Opt-In is required like it used to be, now it's an Opt-Out. There is also Promotional and Transactional messages. Transactional have a higher chance of delivery.

Prior to this change we used the SMS to alert our sys-admins that something needs to be fixed or reviewed. They were all system critical messages and it worked without a problem for a very long time. But when AWS rolled out this new SMS system (at least on our account) all SMS messages were put to Promotional and the max cost was set to $1 (current cost per message is $0.00645 in the US). Thats 155 messages in a month.

To get this back working for us I changed the default message type to transactional and set the max spend limit to $500 (should be way over kill). While the link provided by Imthian@AWS ( https://console.aws.amazon.com/sns/v2/home?region=us-east-1#/text-messaging/preferences ) was correct, it was unclear what I was looking at since I didn't know they changed something.

It's frustrating when AWS makes changes that have deep impacts on how we use the services without announcing those changes. AWS did a good job of telling us that instance IDs and other such things were changing length but on the SMS change, I think they failed."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
I've gotten evasion from AWS about the service upgrade. I tried to set my limit to $51, overkill for me as well, and I get back an email that 'this will have to be reviewed'.  And the messages are still not going out."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
Good day all

I will be opening individual developer support cases with our support team for everyone on this thread that is still facing issues. 

Thank you for working with us.

Regards
Imthian R"
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
It appears that the issue has finally been resolved as I am able to send messages again. Kudos to AWS for fixing the problem, but splats for the lack of transparency on the issue.

You can do better."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
I also experience problems when sending out text messages when a CloudWatch alarm is triggered or even when I try to publish a text messages in the console. I get the following error:

{ ""notification"": { ""messageId"": ""681fb4ae-7074-50bb-b822-e44870509b6c"", ""timestamp"": ""2017-01-03 19:39:16.721"" }, ""delivery"": { ""destination"": ""<censored>"", ""smsType"": ""Transactional"", ""providerResponse"": ""Internal error"", ""dwellTimeMs"": 77 }, ""status"": ""FAILURE""


I use one destination which did receive text messages a month ago and now it doesn't work anymore. Can somebody from Amazon take a look at this error?

Edited by: benik on Jan 3, 2017 11:59 AM"
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
SMS messaging worked again for me as soon as I updated my spending limit from $10 to $15. I was well within the free tier limit, so the spending limit was essentially meaningless. I switched back to $10 and SMS messaging continued to work.

My guess is that there was an SNS bug that discarded messages unless or until the customer spending limit profile was reloaded, and it wouldn't reload unless it changed. Changing the spending limit would trigger that reload.

SNS may have decided not to fix this on their side because it was November/December and they were locked down for the holidays, and there was an easy workaround (have the customer make a trivial change to their profile). If this guess is correct I just wish the SNS and support team had been more open and honest about the situation. Asking people to increase their spending limits when that seemed on the surface to be completely irrelevant is annoying."
Amazon Simple Notification Service	"Re: SNS suddenly stopped sending SMS
Were experiencing the same issue. ""providerResponse"": ""Internal error"", Were you able to resolve it?

Edited by: chilscher on Mar 24, 2017 4:33 PM"
Amazon Simple Notification Service	"SNS Topic subscription not deleted
Hi,

I have 2 pending SNS subscriptions which can't be deleted. It's been more than 72 hours and I have tried manually removing all topics and subs, but they keep reappearing!

Is there a way of getting rid of them?

thanks
James"
Amazon Simple Notification Service	"Re: SNS Topic subscription not deleted
You can try reconfirming the subscription, this should reset the 3 day countdown for it to expire."
Amazon Simple Notification Service	"Bug report: S3 event notifications don't reach encrypted SNS topics
Steps to replicate:

1. Create SNS topic with default settings
2. Subscribe your email to the SNS topic (this is not limit to email delivery, but easy to test)
3. Confirm email subscription
4. Edit topic policy to allow ""Everyone"" to send messages to it
5. Create S3 bucket with default settings
6. Add ""PUT"" notification event to S3 bucket with the SNS topic as the ""send to"" location.
7. Upload file to S3 bucket.
8. Check email -> notification from SNS.
9. Edit encryption at rest setting for SNS, using default KMS key.
10. Upload another file to S3 bucket
11. Check email -> no notification from SNS.
12. Disable encryption at rest in SNS
13. Upload file to S3 bucket.
14. Check email -> notification from SNS.

By the way, is there a better place to submit bug reports without having to pay for support or is this it?

Thanks all! Hopefully this saves some hair pulling and eventually gets fixed.
Andrey"
Amazon Simple Notification Service	"Problem while sending SMS Text message to Sim with spanish prefix
Hello,
For a current project we are having trouble sending text messages through sns to spanish sim cards. While we have no error sending text messages from regular phones to these sim cards, using the AWS SNS does not get the messages delivered. Please find SMS Logs from the carrier below:


{ 
  ""notification"":
    { 
      ""messageId"": ""e7a79a10-b489-5890-85f7-cec31da791b3"", 
      ""timestamp"": ""2019-02-05 15:08:30.051"" 
    }, 
  ""delivery"":
    { 
      ""destination"": ""+345901007XXXXXX"", 
      ""priceInUSD"": 0.0898, 
      ""smsType"": ""Transactional"", 
      ""providerResponse"": ""Message has been accepted by phone"", 
      ""dwellTimeMs"": 479,
      ""dwellTimeMsUntilDeviceAck"": 648 
    }, 
  ""status"": ""FAILURE"" 
}

Additional information from the carrier:

Roaming team checked the attempt and see that at MAP level, the SRI for SMS to the reported IMSI were correct (VLR: 447XXXXXXXXX from O2 UK). They saw the SMS Deliver with result: Absent Subscriber. (This means that subscriber was not attached to any network). 

As it is something strange, they interpretate that it is an especial estate of the terminal , because since 16:07:59h GMT+1 of 5/2/2019 they received from O2 UK network and the same VLR a packet Ready for SM , which means that device is ready to receive SMSs.


I hope you can help us resolving this issue as the sms deliery works fine on other SIMs.

Edited by: TiJay on Feb 12, 2019 5:48 AM

Edited by: TiJay on Feb 12, 2019 5:49 AM"
Amazon Simple Notification Service	"Cross Account SNS Publish permission via PrincipalOrgID?
Hi there. 
I am wondering if it is possible to allow all cloudwatch alarms from an orgainzation to publish to a shared SNS topic?
Right now I am solving this by giving ""*"" the publishing rights and then filtering by SourceArn. This works fine so far.
But when I tried to change that (in cloudformation) to   StringEquals: AWS:PrincipalOrgId  - o-XYZ 
 the publishing alert got a 403. 
Its all a bit messy with azure federated login so atm I am not sure if Cloudwatch Alerts ""send"" the OrgId.
Should it generally be possible and is there a working IAM example for this?
Thx!"
Amazon Simple Notification Service	"SNS Message Version 2.1
We developed a feature in our application around the version 2.0 of SNS notifications (""eventVersion""). The notifications are now reporting themselves as version 2.1. Does anyone know where there is documentation of the changes?

I'm not noticing any bugs, but I'd like to confirm that we're still compatible, and update the in-code version check.

Here are the un-sensitive contents of one such notification (as printed by PHP):
stdClass Object
(
    [eventVersion] => 2.1
    [eventSource] => aws:s3
    [awsRegion] => us-east-1
    [eventTime] => 2019-02-08T20:18:20.780Z
    [eventName] => ObjectCreated:Put
    [userIdentity] => stdClass Object
        (
...


Edited by: thelizardreborn on Feb 8, 2019 12:26 PM"
Amazon Simple Notification Service	"message fails, providerResponse: This delivery would exceed max price
Hello, we noticed that some SMS text messages fail to send (they are about 200 characters). We also have $100 daily limit set for our SNS. Here is the snippet from the CloudWatch log:
{
    ""notification"": {
        ""messageId"": ""444fa978-2f2f-55f4-bbbf-fdacb2de7bef"",
        ""timestamp"": ""2019-02-06 08:32:49.575""
    },
    ""delivery"": {
        ""phoneCarrier"": ""AT&T"",
        ""mnc"": 180,
        ""destination"": ""+1415xxxxxxx"",
        ""priceInUSD"": 0,
        ""smsType"": ""Promotional"",
        ""mcc"": 311,
        ""providerResponse"": ""This delivery would exceed max price"",
        ""dwellTimeMs"": 652,
        ""dwellTimeMsUntilDeviceAck"": 1183
    },
    ""status"": ""FAILURE""
}
I have 2 questions regarding this.
1. Why is this particluar SMS message exceeding the maximum price? This was sent to an AT&T iphone located in San Francisco. What do we need to do to make sure messages like this go through?
2. How can we setup alerts when we have a high (above certain limit per minute) number of message failures?

thank you,

Lenny."
Amazon Simple Notification Service	"can't find specific Lambda at the adding subscription endpoints dropdown
Hey,

I am not sure if its an SNS or Lambda issue. but as described at the subject the problem is at the SNS GUI.
The problem:
We have a Labda that we use as a SNS endpoints for a couple of months. everything was fine until a few days ago when that Lambda has disappeared from subscription endpoints dropdown menu.
We can see that Labda at SNSs that was already configured. we can also add it from CLI (aws sns subscribe....). Looks like GUI issue...

Old subscriptions to this Lambda are working fine.

After reading the flowing Link: https://aws.amazon.com/blogs/mobile/invoking-aws-lambda-functions-via-amazon-sns/ we tried to add permission to the Lambda (Action: ""lambda:InvokeFunction"", Principal: ""sns.amazonaws.com""). It didn't helped.

Any help solving this issue will be highly appreciated. 
Thanks
Ofer"
Amazon Simple Notification Service	"SNS Batch Publish
Hi, the same way SQS has a handy SendMessageBatch, is there a batch API on the road map for SNS Publish?
That would be very handy.

Edited by: fdbx on Sep 11, 2013 2:02 AM"
Amazon Simple Notification Service	"Re: SNS Batch Publish
Hi,

Thank you for the feature request. We don't publicly comment about our roadmap, but we will take your suggestion back to the team and review it. Thank you for being an SNS customer!

Regards,
Rohan"
Amazon Simple Notification Service	"Re: SNS Batch Publish
+1 for being able to set multiple endpoint arns for publishing push notifications
http://docs.aws.amazon.com/sdkforruby/api/Aws/SNS/Client.html#publish-instance_method"
Amazon Simple Notification Service	"Re: SNS Batch Publish
Another +1 - we are looking at moving over to SNS for push notifications, however making a separate API request for each endpoint seems like it could be a bottleneck for us. Ideally the Publish method would accept a list of EndpointARNs."
Amazon Simple Notification Service	"Re: SNS Batch Publish
Was this ever implemented?"
Amazon Simple Notification Service	"Re: SNS Batch Publish
+1 on needing this."
Amazon Simple Notification Service	"SNS-to-SNS subscription
Would it be possible to add SNS-to-SNS (topic-to-topic) subscription feature? That's something that's available in many messages brokers (e.g. RabbitMQ: exchange-to-exchange binding) and simplifies complex ""binding topologies""."
Amazon Simple Notification Service	"SNS is not sending SubscriptionConfirmation to HTTP endpoint in EC2
Use case: 
We are trying to subscribe a HTTP servlet running in an EC2 instance to an SNS Topic. We are calling the SubscribeRequest java API to subscribe the endpoint. The Topic and EC2 instance are in the same region. The port 8080 is open in EC2 and we are able to access the endpoint from a browser. 

Issue :
The subscription is always in ""PendingConfirmation"" status. SNS is not sending the SubscriptionConfirmation message. 

Thanks,
Hemapriya Annadurai"
Amazon Simple Notification Service	"AWS SNS delivery status setup
I am stuck with a dead response when trying to create the IAM roles required for AWS SNS delivery status. Clicking the grey ""Create IAM roles"" button on the first image does nothing. Looking at the console, it produces the error shown in the second image. I've tried on several different browsers and operating systems, each with the same issue. Any help?"
Amazon Simple Notification Service	"Re: AWS SNS delivery status setup
Created the role/permissions through IAM instead, then copied the new role ARN into the SNS delivery status success/failure feedback fields.
IAM > Create role > SNS ""Allows SNS to call CloudWatch Logs on your behalf"""
Amazon Simple Notification Service	"Unsubscribe URLs in SNS http(s) notifications broken
Hello,

today I noticed that the UnsubscribeURLs in notifications sent to HTTP(S) endpoints no longer get populated correctly. It seems there is a problem with the string expansion. Here is an example:

""UnsubscribeURL"":""https://sns.eu-west-1.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=~CLOUDCAST_SUBSCRIPTION_GUID_PLACEHOLDER~""

As you can see from the example, this occurred in eu-west-1 but I have not examined any other regions. Please look into this and fix, as our product has to rely on this information.

Regards, Christoph"
Amazon Simple Notification Service	"Re: Unsubscribe URLs in SNS http(s) notifications broken
As of 1/22/19 ~14:00 UTC it seems the issue has been fixed by AWS."
Amazon Simple Notification Service	"SNS Service: Can't create Platform Application
Hello Guys,

I have got one problem. Me and my client want to use Amazon platform for our mobile backend application. Also I am going to use SNS service for Push Notifications. I use IAM user with all SNS privileges (except financial) but when I open SNS Console I can't create Platform Application, I simple haven't this menu item (I see only Topics and Subscriptions). I attach screenshot. Btw, my client has this option but it's not a developer.

Maybe someone had this problem or can help me? It will be great. 

I really hope for your help.
Thanks a lot."
Amazon Simple Notification Service	"Re: SNS Service: Can't create Platform Application
Solved. Thanks a lot."
Amazon Simple Notification Service	"Re: SNS Service: Can't create Platform Application
Hi,
I have this same poblem
What was your solution?"
Amazon Simple Notification Service	"Unable to subscribe SNS again after deleting subscription
I'm switching between two lambdas listening to a same SNS queque, so I need to delete one subscription (A), and add a new one(B). But when I switched back to A, I got a subscriptionARN but messages never came through. And the SNS subscription list only give me two DELETED.

I tried both web console and CLI but neither worked. And I waited for about 30 minutes before retry, but still no luck"
Amazon Simple Notification Service	"Amazon SNS stoped working
Hi,

I have been using amazon SNS to send SMS for a while, since yesterday it stoped working. I didn't changed anything on my side. Even if I try to send SMS from the console, still doesn't work.
I only have 35% delivery rate for last couple of days, but since yesterday it is not working at all.

Any help or suggestion.

Thanks"
Amazon Simple Notification Service	"[AWS-SDK] Not receiving any transactional SMS
Hello, I'm using the AWS-SDK in NodeJs to send Transactionnal SMS to users

I'm using the '2010-03-31' api version and with the method setSMSAttributes, I'm setting the DefaultSMSType and DefaultSenderID.
I then publish a SMS with a Message and PhoneNumber

I get the RequestId of the SMS but I'm not receiving the SMS
My SNS SMS Dashboard describes a flat activity at 0 outbound messages. 

Is there something I've done wrong ?

Edited by: thomasdupre on Jan 16, 2019 6:48 AM"
Amazon Simple Notification Service	"Re: [AWS-SDK] Not receiving any transactional SMS
Ok this was my fault, I setted the region in the SDK configuration at eu-west-1 but SMS service is only available in us-east-1"
Amazon Simple Notification Service	"Done with navigating SNS on my own
Hello,

This past December I was able to create a bounce and complaint tracking dashboard via these instructions: https://docs.aws.amazon.com/ses/latest/DeveloperGuide/dashboardcreateSNStopic.html

I followed them to a T and it worked brilliantly for one week. I got an email every day that linked me to a report listing the bounced emails and complaint emails. The steps were create a topic/create a queue/subscribe to topic/create a simple storage bucket to store dashboard files generated via lambda function/create AWS identity and access management policy and role/configure bounce & complaint notifications via sns/purge queue/create aws lambda function/test lambda function/configure triggers in cloudwatch.

I have gone in deleted everything (roles, queues, lambda, functions, topics, subscriptions, configs)and redone the set up from start to finish MANY times and it will not work. Same directions followed to a T. I am out of options of how to make it work again.

The first problem that occurred is the bounce@simulator.amazonses.com test email is now being rejected by gmail. In December it went through. The next problem is always failure on the lambda function test. 

I am willing to hire someone to set it up for me because I am stumped and frustrated and cannot take any more time away from my day job to sort this out.

Any help is appreciated."
Amazon Simple Notification Service	"Calling an SNS Topic from Step Functions
Hi there
Is it at all possible to publish to the SNS Topic from the Step Function?

1. I created a topic but I cannot subscribe to my step function since it is not listed on the protocol list when I am trying to create the Subscription. Only HTTP, HTTPS, EMail, Email-JSON, Amazon SQL and AWS Lambda are available on the list when I try to create a subscription for the SNS Topic. 

2. I figured out that I can use a custom code inside the SNS that will post to my SNS Topic. 

https://docs.aws.amazon.com/step-functions/latest/dg/connectors-sns.html?fbclid=IwAR3BRdfsIBmErKIb8Pa93XaARYtltpNdYyPRP5Y-gJecO1W0FOpcp9GxOBI

{
 ""StartAt"": ""Publish to SNS"",
 ""States"": {
   ""Publish to SNS"": {
     ""Type"": ""Task"",
     ""Resource"": ""arn:aws:states:::sns:publish"",
     ""Parameters"": {
       ""TopicArn"": ""arn:aws:sns:eu-west-2:111111111111:GetCustomerCreditScore"",
       ""Message.$"": ""$.input.message"",
       ""MessageStructure"": ""json"",
       ""MessageAttributes"": {
         ""my attribute no 1"": {
           ""DataType"": ""String"",
           ""StringValue"": ""Piotr_Kirklewski""
         },
         ""my attribute no 2"": {
           ""DataType"": ""String"",
           ""StringValue"": ""JohnSmith""
         }
       }
     },
     ""End"": true
    }
  }
}

3.  The execution of the SNS fails, but it doesn't tell me why - how can I get a more verbose log to figure out what is going on, please ?
4. Publishing a test message to the Topic works fine from the AWS page (Message published with request id be394c5a-4b80-55bc-85d4-18edb63f7a25) - but I cannot see the list of messages anywhere. 

Questions:

1. Why is SNS failing on me?
2. How can I log/see the messages posted to the SNS Topic, please?
3. How to turn on more verbose logging on the SNS and Step Functions?"
Amazon Simple Notification Service	"SMS Verification Not Sending the Code to Phone Number
Hello. I'm new in AWS. A few days ago we were interested in using SMS verification services from AWS. The first day of implementation, everything was fine, and went well. But on the second day suddenly the service stopped to send a verification code via SMS to the phone number, but we got a successful response in our code. I don't know what happened, does AWS limit it because we still use a free tier. I tried to make a new pool but the verification sms still wasn't sent. I check in my pool (user) there are many request for sms verification. But they don't get any code from sms. Thanks for help

Edited by: kjhl on Jan 14, 2019 9:58 PM"
Amazon Simple Notification Service	"SNS message Content-type?
Hi all.

I've tried to solve my problem by reading the AWS docs, googling, and trawling the forums without luck for some time now, so here goes. I'm puzzled about the content-type of the messages SNS is sending. Take for example a SubscriptionConfirmation message - here are the headers:

POST /sns-notification-endpoint/ HTTP/1.1
Content-Length: 1351
Content-Type: text/plain; charset=ISO-8859-1
Host: j-gw.com
Connection: Keep-Alive
User-Agent: Amazon Simple Notification Service Agent

(This data is captured with tcpdump.) I was wondering, isn't the message supposed to be of content-type ""application/json"" because that's what the payoad, i.e. request body, is?

Now, this wouldn't otherwise be much of a problem but I'm using Tastypie and it needs to have a correct content-type fed to it."
Amazon Simple Notification Service	"Re: SNS message Content-type?
Am having the same problem myself. I'm using asp.net mvc3 which has binding to json but it expects application/json content-type."
Amazon Simple Notification Service	"Re: SNS message Content-type?
Hello, 

My apologies that we did not respond sooner.  When receiving SNS  messages via the HTTP protocol the mime type will be text/plain however the structure of the messages is in the JSON format."
Amazon Simple Notification Service	"Re: SNS message Content-type?
No problem. But is this an intentional feature, or something that could perhaps change in a future API version? Having to force Content-type to application/json is ""sub-elegant"" in my opinion."
Amazon Simple Notification Service	"Re: SNS message Content-type?
Very simply, it was an oversight on our part.  It should have been 'application/json' all along but we missed it.  Now we have to find a way to change it to what it should be without breaking anyone's integration with SNS."
Amazon Simple Notification Service	"Re: SNS message Content-type?
This is biting me too... For instance, Loggly requires the application/json header to be in place to leverage their JSON parsing/search capabilities.

Any idea on when SNS might have this sorted out?  Would love to subscribe a bunch of JSON services to SNS."
Amazon Simple Notification Service	"Re: SNS message Content-type?
Sorry to resurrect this question from the dead.  However it was implied that a solution was possibly in the works... but I'm having this very issue.  I'm using NodeJs with the express node module, and the subsequent bodyparser function provided by the connect module it sits on.  

the bodyparser function doesn't accurately grab the post data from a subscriptionconfirmation request because there's no content-type in the request header.  Would it be possible to modify the SNS system to allow people sending subscribe requests to specify the value of the content-type header used to reach the target endpoint?  This parameter would of course be optional with a default value of null to preserve compatibility with people who've got existing integrations that function to their satisfaction.

In the meantime, for other people who find this question based on issues with bodyparser having issues with SNS.  I've got a modification in place in bodyParser.js in which I force the plugin to use application/json as the content-type under a certain condition

function mime(req) {
  if(req.headers == 'SubscriptionConfirmation' && !req.headers.hasOwnProperty)
  {
      req.headers = 'application/json';
  }
  var str = req.headers || '';
  return str.split(';')[0];
}

Edited by: dmurker on May 25, 2012 12:30 AM"
Amazon Simple Notification Service	"Re: SNS message Content-type?
Thanks for providing a workaround for Node.js

The hangup with changing the content type is there is no way of testing if the change will cause issues with all of the http listeners/hosts that are out there. 

There are ideas on ways to fix this, and we are looking into them.

Joel"
Amazon Simple Notification Service	"Re: SNS message Content-type?
Please just fix this. text/plain is simply wrong. Many new user to SNS (like me) will have issues with this. The most users will not even notice, as they have there subscriptions confirmed."
Amazon Simple Notification Service	"Re: SNS message Content-type?
I am using django and created an http endpoint like this (from some example).


def email_sns(request):
	msg = json.loads(request.raw_post_data)
	if msg == 'SubscriptionConfirmation':
        if process_subscription(msg):
            return HttpResponse('SubscriptionConfirmation OK')
        else:
            return HttpResponse('SubscriptionConfirmation Failed')
    elif msg == 'Notification':

def process_subscription(msg):
    try:
        urllib2.urlopen(msg).read()
        return True
    except IOError:
        traceback.print_exc()
        return False

When I create a new subscription in an sns topic using this endpoint, after sometime I get a ""Response contains invalid JSON"" error and the subscription remains in PendingConfirmation state. 

How can I explicitly confirm it. What is wrong with this?

Any link to python docs/api/implementation will also be very useful.

Edited by: kmrdeepak on Jan 22, 2013 11:51 PM"
Amazon Simple Notification Service	"Re: SNS message Content-type?
I just spent a couple of hours trying to figure out why Node.js + Express were not giving me a JSON body. Express (with bodyParser middleware) will not parse the body unless it has a proper content type.

Please fix this, Amazon!

Mateusz"
Amazon Simple Notification Service	"Re: SNS message Content-type?
+1 

please fix this"
Amazon Simple Notification Service	"Re: SNS message Content-type?
+1 Please Fix this, Guys."
Amazon Simple Notification Service	"Re: SNS message Content-type?
Could the solution just be a simple content-type configuration that defaults existing subscriptions to plain text, but defaults future subscriptions to application/json? The user could manually switch between them if needed and there would be no alterations to the existing subscriptions unless manually switched."
Amazon Simple Notification Service	"Re: SNS message Content-type?
I first came across this a few years ago when this thread was new. I see it still hasn't been addressed.

Personally, given the amount of fantastic engineers you have at your disposal I have a hard time seeing how we've gone 3 years without any visible attempt to address this.

Couldn't it be as simple as offering another SNS payload type, e.g. JSON-without-blunder? It seems a solution like that could have been easily implemented while maintaining existing subscription compatibility while allowing for a migration path and a proper version we can build new software from?

Let's get this fixed... it's not necessary and there are many options.

Edited by: Steve on Sep 27, 2014 7:25 PM"
Amazon Simple Notification Service	"Re: SNS message Content-type?
To workaround this issue we are using following ""middleware"" in node.js:

app.use(function (req, res, next) {
  if (req.get('x-amz-sns-message-type')) {
    req.headers = 'application/json';
  }
  next();
});

Edited by: gruveo on Jul 26, 2016 8:27 AM"
Amazon Simple Notification Service	"Re: SNS message Content-type?
When using jersey with jackson, the wrong content type eliminates the automatic deserialization, and I didn't find a way to correct the incoming content type before jersey kicks in.

I created a filter now that reads the raw content and stores it in the context. In my Endpoint I use the raw data for extracting the payload data.

Filter:
try (BufferedReader buffer = new BufferedReader(new InputStreamReader(containerRequestContext.getEntityStream()))) {
    containerRequestContext.setProperty(""rawInput"", buffer.lines().collect(Collectors.joining(""\n"")));
}


Endpoint:
Map body = new ObjectMapper().readValue(context.getProperty(""rawInput"").toString(), Map.class);


PS: but I would prefer to have a correct content-type, though ...

Edited by: DirkPodolak on Sep 9, 2016 12:14 AM"
Amazon Simple Notification Service	"Re: SNS message Content-type?
Very annoying ""feature"" which breaks Jersey/Spring MVC and maybe more framework's automatic deserialisation capability."
Amazon Simple Notification Service	"Re: SNS message Content-type?
I agree that the current behavior is not entirely correct.
I'm pretty sure the text/plain bug wasted many hours and created a lot of frustration, so please do address the issue.

The simplest backwards-compatible fix would be to add 2 new protocols to SNS notifications:
http-application-json
https-application-json

What do you guys think?"
Amazon Simple Notification Service	"Re: SNS message Content-type?
This worked for me instead
    if (req.header) {
        req.header(""Content-Type"") = ""application/json"";
    }"
Amazon Simple Notification Service	"Re: SNS message Content-type?
This is a decent solution. However, it should be: req.headers['content-type'] = 'application/json'"
Amazon Simple Notification Service	"Re: SNS message Content-type?
This is a good solution.

NOBODY CARES???

This problem can not be ignored for so long! It is not possible that Amazon does not care about the inconvenience that this ""little mistake"" causes to the developers."
Amazon Simple Notification Service	"Re: SNS message Content-type?
I also ran into this today... 

Why is this not at least noted in the documentation? 

I understand that it may cause potential issues if changed. But maybe instead the documentation should adhere to your system actually does rather than what you wanted to achieve.

From a development perspective, we want to know how it works... not how you intended to build it."
Amazon Simple Notification Service	"Re: SNS message Content-type?
I also ran into this today... 

Why is this not at least noted in the documentation? 

I understand that it may cause potential issues if changed. But maybe instead the documentation should adhere to your system actually does rather than what you wanted to achieve.

From a development perspective, we want to know how it works... not how you intended to build it."
Amazon Simple Notification Service	"Re: SNS message Content-type?
Could this solution not simply be to allow headers in SNS subscriptions to be set? At a minimum, with the ability to override the content-type header, but beyond that, why not allow the subscription configuration to specify a set of HTTP headers that are added to the POST (and overriding some or all of the existing headers)?

I also like the previously suggested idea of making application/json the default content type for all new subscriptions, thereby guaranteeing that nothing that's already in place is broken."
Amazon Simple Notification Service	"API Gateway best practices
Hi,

We have an SQS queue that has to subscribe to an SNS topic on different AWS account.
Should we setup a API gateway for the SNS topic or should we just add IAM policies for the topic subscription?

Can someone suggest any best practices around setting up API gateways? Also would there be any performance concerns on using API GW as opposed to IAM policies?

Thanks,

Edited by: SravaniChaganti1 on Jan 14, 2019 11:41 AM"
Amazon Simple Notification Service	"Is it a good practice to use Single SNS topic for various messages types ?
We have a single application that sends different kinds of messages to an SNS topic(s). There are multiple SQS queues setup to subscribe to the topic(s). I want to know if it is a good practice to use a single SNS topic for multiple messages or do I have to setup multiple SNS topics for each message type? The SQS queues setup for each message type may have different IAM roles and different EC2 instances would be listening to these messages. Is there any issue in using the same topic for all the queues? Please help."
Amazon Simple Notification Service	"Issue with SMS message format
We are utilizing AWS SNS for sending SMS to mobile phones, and are running into a problem at least for users in China.

The message content we specified seems to have been appended with such signatures like ""AWS"" or ""VRFY"" (embedded in a pair of ""[]"") randomly when the users receive them. Not sure if it's something added by AWS or by the carriers? This is causing problems for us as some third party tools are expecting specific trailing content for SMS messages destined to them. 

Does anyone know where such trailing strings get added? Is there a way to get around this problem?

Thanks,
Joshua

Edited by: joshzhao on Jan 8, 2019 11:23 PM

Edited by: joshzhao on Jan 8, 2019 11:24 PM

Edited by: joshzhao on Jan 8, 2019 11:25 PM"
Amazon Simple Notification Service	"Unable to Subscribe Https Endpoint - Error: $modalInstance is not defined
Hi, 

We are trying to subscribe SNS topic via https Endpoint. Getting below error in browser console.  No request received on the endpoint from SNS.

Using //@ to indicate sourceMappingURL pragmas is deprecated. Use //# insteadhttps://forums.aws.amazon.com/ jquery.min.js:1
SyntaxError: expected expression, got '<'https://forums.aws.amazon.com/ iam_console_prelogin:1
Source map error: request failed with status 404
Resource URL: https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular-sanitize.min.js
Source Map URL: angular-sanitize.min.js.maphttps://forums.aws.amazon.com/
Source map error: request failed with status 404
Resource URL: https://d3tt5o7g7bqmm3.cloudfront.net/lib/chartist/chartist.min.js
Source Map URL: chartist.min.js.maphttps://forums.aws.amazon.com/
Source map error: request failed with status 404
Resource URL: https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular-cookies.min.js
Source Map URL: angular-cookies.min.js.maphttps://forums.aws.amazon.com/
Source map error: request failed with status 404
Resource URL: https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular-route.min.js
Source Map URL: angular-route.min.js.maphttps://forums.aws.amazon.com/
Source map error: request failed with status 404
Resource URL: https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular-animate.min.js
Source Map URL: angular-animate.min.js.maphttps://forums.aws.amazon.com/
Source map error: request failed with status 404
Resource URL: https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular.min.js
Source Map URL: angular.min.js.maphttps://forums.aws.amazon.com/
Source map error: request failed with status 404
Resource URL: https://d3tt5o7g7bqmm3.cloudfront.net/lib/jquery/jquery.min.js
Source Map URL: jquery.min.maphttps://forums.aws.amazon.com/
{""0"":""Subscribe"",""1"":{""topicArn"":""arn:aws:sns:ap-southeast-1:***********:rx-buildcache"",""endpoint"":""https://www.example.com/admin/dashboard/buildcache"",""protocol"":""https""}} sns-tail.201811051036.min.js:2:14400

Error: $modalInstance is not defined
l.resendConfirmations/</<@https://d3tt5o7g7bqmm3.cloudfront.net/js/sns-tail.201811051036.min.js:2:104676
f/<@https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular.min.js:112:20
$eval@https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular.min.js:125:301
$digest@https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular.min.js:122:390
$apply@https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular.min.js:126:56
l@https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular.min.js:81:169
P@https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular.min.js:85:301
vf/</w.onload@https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular.min.js:86:315
angular.min.js:102:264
{""0"":""GetSubscriptionAttributes"",""1"":{""topicArn"":""arn:aws:sns:ap-southeast-1:***********:rx-buildcache"",""endpoint"":""https://www.example.com/admin/dashboard/buildcache"",""protocol"":""https"",""subscriptionArn"":""PendingConfirmation""}}
sns-tail.201811051036.min.js:2:14400
{""0"":""ListSubscriptionsByTopic"",""1"":{""topicArn"":""arn:aws:sns:ap-southeast-1:***********:rx-buildcache"",""nextToken"":null}} sns-tail.201811051036.min.js:2:14400
Source map error: request failed with status 404
Resource URL: https://d3tt5o7g7bqmm3.cloudfront.net/lib/jquery/jquery.min.js
Source Map URL: jquery.min.maphttps://forums.aws.amazon.com/
Source map error: request failed with status 404
Resource URL: https://d3tt5o7g7bqmm3.cloudfront.net/lib/angularjs/angular.min.js
Source Map URL: angular.min.js.maphttps://forums.aws.amazon.com/"
Amazon Simple Notification Service	"Multiple Subscriptions with same Endpoint (or multiple filters)
Hello,

Is it possible to create multiple subscriptions to the same endpoint? (so far I was not able to)

Use case scenario:
I have a SQS queue subscribed to a SNS topic.
I want to apply the following attributes (as an example):

{
 ""event"": [""CreateOrder"", ""UpdateOrder""]
 ""productType"": [""Item"", ""Service""]
}


I want to receive all ""CreateOrder"" events for all productTypes (Item and Service) but I don't want to receive ""UpdateOrder"" with productType ""Item"". 

Multiple subscriptions between same topic and queue would allow me to create multiple message filter attributes. 

Is there a workaround?"
Amazon Simple Notification Service	"Use topic in region us-east-1 from ec2 alert in region us-east-2?
I have an instance running in region us-east-2.  I am trying to set up an alert to notify by sms me when intervention is required.  

SNS in region us-east-2 does not support sms, so I set up an SNS topic in us-east-1, and susbrcibed to it with sms.  However, I cannot see this us-east-1 topic from cloudwatch in us-east-2.  

Is there any way that I can use this region us-east-1 topic as a destination for my alarms from us-east-2?

Or, is the only way to send sms alerts is to move my instance in to a region that supports sms?"
Amazon Simple Notification Service	"Push notifications are not delivered to Android 6 devices in IDLE state
Hi,

We have a messaging/voip app and we are using SNS to push notifications to both iOS and Android, notifications are very critical in our app, we use them to call clients and deliver messages. Android 6 came out and requires setting priority to ""high"" for notifications to be delivered to apps in IDLE state (most users are in this state most of the time), right now, a big portion of our users are not getting incoming calls notifications. We tried adding priority ""high"" to notifications sent via SNS as in:
{
""GCM"": ""{\""priority\"": \""high\"",\""data\"": { \""message\"": \""hi there\""} }""
}

But with no luck, they still don't get those notifications. Any idea or a way around this? Should it work?

Thanks,
Adam"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Hi adambenayun,
Thank you for reaching out. Unfortunately, SNS does not support ""priority"" setup at this moment. We've accepted this as a feature request and will plan it. 

Best
Liang"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Hello Liang,
What about ""time_to_live"" parameter? Is it supported for GCM messages?
By the way, could you please specify a list of supported and not supported parameters by SNS for GCM messages?

Thank you."
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
I think that SNS provides their own TTL that should work for GCM as well, see http://docs.aws.amazon.com/sns/latest/dg/sns-ttl.html."
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Is there any ETA to implement high priority GCM messages ?

Actually, this feature is to become important as it's to be used with Android M and the ""doze"" mode.

Without ""high priority"" messages we'd need to use GCM connection directly."
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
The same issue exists with IOS devices.   Without high priority iphone does not wake up and a message is not delivered if an app is not running.   When calling GCM directly with the same payload and high priority, iphone wakes up and a message is delivered.   This is MUST have functionality for SNS push notifications service otherwise it is pretty much useless.   It needs to support what is specified in https://developers.google.com/cloud-messaging/concept-options  if it claims that it supports GCM."
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
We also need this feature. 
Cannot communicate with android 6.0 devices, and cannot prevent them from sleeping unless we ask the enduser to whitelist them - not acceptable.

Any ETA?"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Hi Liang!

You should consider making this one of your top priorities. A lot of apps break on Android 6.0 and up if they don't receive high priority messages as it is the ONLY way since Android 6.0 to reach the app when it is in doze mode or app standby. We can't use alternatives like MQTT (IoT) anymore. Every app with time critical messages (breaking news, sport event trackers, VoIP apps, messenger apps, social media) need this feature and will have to move away from SNS to have it. And it should actually only be a 10 min job to add the attribute to your GCM payload.

Please, please, please help us out here!

P.S. I spend way too many hours figuring out, why it doesn't work for our app ... Please at least add a sticky note to your documentation that this feature is not available opposed to what your documentation says about custom parameters here:
http://docs.aws.amazon.com/sns/latest/dg/mobile-push-send-custommessage.html#mobile-push-send-platform"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Amazon, any update on this?

If no solution comes, we have to abandon using SNS/Mobile push and work with GCM directly from Lambda which feels a huge step backward."
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Update (5/4/2016): The GCM ""Priority"" solution has been tested and released by SNS. You can now set delivery priority for all GCM downstream messages.

Example high ""priority"" message sent from the AWS Console:
{
""GCM"": ""{\""priority\"": \""high\"",\""data\"": { \""message\"": \""This is a priority notification!\"" } }""
}

If ""priority"" is not specified, all GCM messages are delivered by SNS with ""normal"" priority."
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Is priority supported for pushing notifications to APNS? Any ETA for this implementation?"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Hi kod-hemanta,

Yes. Priority for APNS has always been supported. SNS defaults to the highest priority of 10. 

apns-priority: 10
""Send the push message immediately. Notifications with this priority must trigger an alert, sound, or badge on the target device."" as referenced by Apple docs here"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
We are trying to send this high priority GCM message from Android using

                        publishRequest.setMessage(msg);
                        publishRequest.addMessageAttributesEntry(""priority"",new MessageAttributeValue().withStringValue(""high"").withDataType(""String""));

But it seems the message is not delivered until the device wakes from Doze mode for external reasons (screen on, movement detection). We expect the message to arrive and wake the device. Is this the correct use of the Android API for doing that?"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Please include priority attribute within your payload JSON in the following format:
{
""GCM"": ""{\""priority\"": \""high\"",\""data\"": { \""message\"": \""This is a priority notification!\"" } }""
}

Message attributes are metadata items that you can optionally include in your notification. The only reserved attributes are listed in the following documentation page. Priority for GCM is not one of them therefore you need to specify it inside your payload in the above format.

http://docs.aws.amazon.com/sns/latest/dg/SNSMessageAttributes.html"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Can you please clarify how to do this from the Android SDK?"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Hi

Sorry about the delay. The priority flag in GCM has been supported in Sydney, Oregon, and Virginia since mid year 2016. And we recently enabled this to Seoul and Tokyo. It will be turned on in more AWS regions in the coming weeks.

Thanks you, and sorry again for the delay.
Bokang"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
This feature has been turned on in Ireland and Frankfurt"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
Hi, is this feature available in Singapore region?

Regards,
Alfred"
Amazon Simple Notification Service	"Re: Push notifications are not delivered to Android 6 devices in IDLE state
JSON message requires withMessageStructure(""json"").

Edited by: Glovantech Corporation on Dec 17, 2018 9:51 PM"
Amazon Simple Notification Service	"How connect Lambda with SNS
Hi can you help me? This is my situation:
The user of my platform, through API Gateway, can call a Lambda function. The Lambda function generate a SQS message (for processing an image). An EC2 instance process the SQS jobs in the queue.

I would like that the Lambda function is notified when the job is done. 

1) I would like to use SNS but seems that SNS can only trigger a Lambda function. My Lambda function is already launched. Is there a way to subscribe to SNS and listen for messages, from inside an already open Lambda function?

2) I can create an HTTP endpoint in a different web server, and subscribe it to SNS, but then how can I connect this web server with Lambda?"
Amazon Simple Notification Service	"Re: How connect Lambda with SNS
Hello
I believe, it would be faster and cheaper to let EC2 publish to an SNS topic saying it is done.  Have a lambda function triggered whenever there is a message to that topic.

keeping a lambda function running while ec2 process an image would become expensive after a while.
hope this helps
RT"
Amazon Simple Notification Service	"SNS SMS sending error
Hello
Yesterday, I had to make settings to send sms in the SNS service, which for about 30 sent messages stopped sending sms. which is still sent and appears valid.

There is some way to check shipping is correct, some extra configuration.

Make two ways to complete the shipment:
I have environment variables and policy settings.

function mensajeNumber(random, phone) {
  var params = {
    Message: 'MESSAGE' 
    PhoneNumber: phone
  };
 
  var sns = new AWS.SNS({
    region: 'us-east-1'
  });
 
  sns
    .publish(params, (err, data) => {
      if (err) {
        console.log(err);
      }
      console.log(data);
    })
  
  //return sns.publish(params).promise();
}


Edited by: pjberrios on Dec 13, 2018 11:22 AM"
Amazon Simple Notification Service	"SNS  SMS message format
If I create a SNS Subscription of Protocol SMS and associate a Topic ARN and a mobile Phone as endpoint I can receive SMS's  OK with message made up in the following format:

<Topic Name (trimmed to 10 Chars)> ALARM|OK : <Alarm Name> in Asia Pacific (Sydney)

Is there a way to change this format?

Thanks
Dave

Edited by: SydneyDave on Dec 10, 2018 8:57 PM

Edited by: SydneyDave on Dec 10, 2018 8:59 PM"
Amazon Simple Notification Service	"I do not receive any mail notification from Amazon SES ( and Amazon SNS )
I do not receive any mail notification from Amazon SES. I do not know what I'm doing wrong.
I have notifications enabled in Amazon SNS for a domain.com

Email Feedback Forwarding: 	enabled
Bounce Notifications SNS Topic: 	myarn:xxx   Include Original Headers: 	enabled
Complaint Notifications SNS Topic: 	myarn:xxx   Include Original Headers: 	enabled
Delivery Notifications SNS Topic: 	myarn:xxx   Include Original Headers: 	enabled

In amazon sns I created a topic and I subscribed correctly with my email. If I send a message to a topic in Amazon SNS console,  I receive that message in the mail.

Edited by: pequeaws on Dec 10, 2018 3:43 AM"
Amazon Simple Notification Service	"Unable to see OPT-OUT users
I am still in the free tier experimenting with services. 

I was testing the SNS/SMS text messages and sent a ""STOP"" from my phone. It stopped my notifications but I am not seeing any users in the ""Opted-out phone numbers"" list.

I need to add my phone number back in for testing."
Amazon Simple Notification Service	"sms international not being received - Peru
Hi,
I'm recently using SMS, I'm trying to send sms via console, but I don't know where is the problem.

Scenario:

Sms sent via console to 3 numbers, only one received the sms, the other 2 numbers didn't received the sms but cloudwatch says that 3 messages has been delivered succesfully.



NUMBER 1 - NOT RECEIVED

{
    ""notification"": {
        ""messageId"": ""ae3802cf-5023-5e8d-ade2-xxxxxxxxxx"",
        ""timestamp"": ""2018-12-04 22:18:36.915""
    },
    ""delivery"": {
        ""phoneCarrier"": ""Nextel"",
        ""mnc"": 7,
        ""destination"": ""+519xxxxxxx"",
        ""priceInUSD"": 0.02548,
        ""smsType"": ""Promotional"",
        ""mcc"": 716,
        ""providerResponse"": ""Message has been accepted by phone"",
        ""dwellTimeMs"": 212,
        ""dwellTimeMsUntilDeviceAck"": 4848
    },
""status"": ""SUCCESS""
}


NUMBER 2 - RECEIVED

{
    ""notification"": {
        ""messageId"": ""bdb9380f-e320-55d0-8aa1-xxxxxxxxxx"",
        ""timestamp"": ""2018-12-04 22:38:17.777""
    },
    ""delivery"": {
        ""phoneCarrier"": ""America Movil"",
        ""mnc"": 10,
        ""destination"": ""+519xxxxxxxx"",
        ""priceInUSD"": 0.02548,
        ""smsType"": ""Promotional"",
        ""mcc"": 716,
        ""providerResponse"": ""Message has been accepted by phone carrier"",
        ""dwellTimeMs"": 141,
        ""dwellTimeMsUntilDeviceAck"": 640
    },
""status"": ""SUCCESS""
}


NUMBER 3 - NOT RECEIVED

{
    ""notification"": {
        ""messageId"": ""d1c41d69-f0ec-5c23-8d82-xxxxxxxxxx"",
        ""timestamp"": ""2018-12-04 22:39:53.046""
    },
    ""delivery"": {
        ""phoneCarrier"": ""Telefonica Moviles"",
        ""mnc"": 6,
        ""destination"": ""+519xxxxxxxx"",
        ""priceInUSD"": 0.02548,
        ""smsType"": ""Transactional"",
        ""mcc"": 716,
        ""providerResponse"": ""Message has been accepted by phone"",
        ""dwellTimeMs"": 147,
        ""dwellTimeMsUntilDeviceAck"": 7816
    },
""status"": ""SUCCESS""
}



AWS Docs ( https://docs.aws.amazon.com/sns/latest/dg/sms_stats_cloudwatch.html ) says the reason for failure but I supose this is not this case.

SMS Delivery Failure Reasons
The reason for a failure is provided with the providerResponse attribute. SMS messages might fail to deliver for the following reasons:

Blocked as spam by phone carrier
Destination is blacklisted
Invalid phone number
Message body is invalid
Phone carrier has blocked this message
Phone carrier is currently unreachable/unavailable
Phone has blocked SMS
Phone is blacklisted
Phone is currently unreachable/unavailable
Phone number is opted out
This delivery would exceed max price
Unknown error attempting to reach phone"
Amazon Simple Notification Service	"SNS providerResponses
I'm looking for a list of the possible providerResponses that can appear in the Cloudwatch logs for both successful and failed SMS messages sent through SNS.

I see some error messages like ""Message has been accepted by phone"" with a status of Failed, but that looks like a successful status. But when I check the number against Pinpoint, it turns out that's an invalid number. So it definitely wasn't accepted by the phone. I've not found this behavior documented anywhere, but it seems very consistent.

Something else I can't find documented anywhere: Where do these messages actually come from? Are they directly from the downstream provider, or does Amazon add them based upon some error code we never see in the Cloudwatch logs?"
Amazon Simple Notification Service	"SNS Topic is not sending the pipeline event change emails
I am creating a `cloudwatch event` which will trigger when there is state change in my `code pipeline` and assigned to a `SNS topic`. I am doing all the above configuration through `Cloudformation Stack`. Below is my stack template
    {
        ""Description"": ""Triggering CodePipeline notifications."",
        ""AWSTemplateFormatVersion"": ""2010-09-09"",
        ""Parameters"": {
            ""EmailAddress"": {
                ""Description"": ""Email Address"",
                ""Type"": ""String""
            }
        },
        ""Resources"": {
            ""EventRule"": {
                ""Type"": ""AWS::Events::Rule"",
                ""Properties"": {
                    ""Description"": ""EventRule"",
                    ""EventPattern"": {
                        ""source"": [
                            ""aws.codepipeline""
                        ],
                        ""detail-type"": [
                            ""CodePipeline Pipeline Execution State Change""
                        ],
                        ""detail"": {
                            ""state"": [
                                ""FAILED""
                            ],
    						""pipeline"": [
    						   ""mypipelinename""
    						]
                        }
                    },
                    ""State"": ""ENABLED"",
                    ""Targets"": [
                        {
                            ""Arn"": {
                                ""Ref"": ""MySNSTopic""
                            },
                            ""Id"": ""PipelineNotificationTopic"",
                            ""InputTransformer"": {
                                ""InputTemplate"": ""\""The Pipeline <pipeline> has failed.\"" "",
                                ""InputPathsMap"": {
                                    ""pipeline"": ""$.detail.pipeline""
                                }
                            }
                        }
                    ]
                }
            },
            ""MySNSTopic"": {
                ""Type"": ""AWS::SNS::Topic"",
                ""Properties"": {
    			 ""TopicName"": ""Huaaa"",
                    ""Subscription"": [
                        {
                            ""Endpoint"": {
                                ""Ref"": ""EmailAddress""
                            },
                            ""Protocol"": ""email""
                        }
                    ]
                }
            }
        }
    }

This is creating all the necessary resources like cloudwatch event and SNS subscription and sending a notification for my email address for confirmation. But when there is a `state change` in mypipeline this is not triggering any email notification. 

But when i created a new `SNSTopic` and created a `subscription` using `aws console` and attached it to the cloudwatch event that was created by `cloudformation stack` as a target it worked fine. I can able to receive notifications when there is a change.

Am i missing anything in my Template?

Thanks
Any help is apprecicated"
Amazon Simple Notification Service	"Is it possible to publish to SNS via http post?
Hi,

Up until now I have been using the SDK, CLI, etc. to publish to sns. But for integration with a legacy database, it would be handy if I could also post to a http(s) endpoint. 

Is this possible? And is it possible in a non-hacky way? (I guess I could intercept the messages my cli or sdk sends to sns and create a http request based on that, but that might not be the most stable solution to this problem.)

Thanks"
Amazon Simple Notification Service	"Re: Is it possible to publish to SNS via http post?
As always, I realise there is at least one solution for this problem after posting this question: putting it behind API Gateway. And could not add this answer yet because of a posting limit."
Amazon Simple Notification Service	"Re: Is it possible to publish to SNS via http post?
Its actual for me too. I prefer to use plain http requests instead of using SDK (I don't need all wide SDK functionality)"
Amazon Simple Notification Service	"How are notifications calculated?
Maybe, i've missed this information when reading the docs, but how is the amount of notifications being calculated?

I am asking, because i've sent 43 SMS via SNS (27 sent, 16 failed) for testing purposes, but my bill states 1007 notifications (""Variable Pricing for Amazon SNS SMS Notifications to Rest Of World (non-US)"").

I just want to understand this calculation."
Amazon Simple Notification Service	"SNS SMS Sending 100% failiure rate
Hi there,

Our account is sending out a considerable number of sms messages in Madagascar at the moment.  These messages are important public health alerts sent to doctors and health professionals across the country.  A recent burst of sms messages has occured due to an outbreak of communicable diseses.  Our problem is that the delivery failiure rate for these messages hit 100% in Madgascar over the past two days according to the SMS messaging dashboard in SNS. 

When we download useage logs from s3 the vast majority of messages are said to have ""Been accepted by phone"", with no indication of why they failed.

Amazon clearly knows these messages are failing, because it is reporting them as failed in the console.  But we cannot see how Amazon knows, and we cannot access information to determine why they are failing. 

Any further information or advice anyone can give on debugging failed SMS would be much appriciated.

Best wishes,

Jonathan

Edited by: mrjbiz on Nov 28, 2018 2:47 AM

Edited by: mrjbiz on Nov 28, 2018 2:48 AM"
