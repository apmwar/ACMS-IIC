label	description
AWS CodeStar	"AccessDeniedException using GetParameters operation for SSM param.
Hello,

The following python snippet works fine using python unit tests and when the lambda is called using Postman after the command ""sam local start-api"":
ssm = boto3.client('ssm', 'us-west-2')
 
def get_ssm_value(str_param_name):
    response = ssm.get_parameters(
        Names=[str_param_name], WithDecryption=True)
    for parameter in response['Parameters']:
        return parameter['Value']


However once I push to codecommit and try to test using the lambda dashboard I get the following error (with some identification hidden):
an error occurred (AccessDeniedException) when calling the GetParameters operation: User: arn:aws:sts::<XXX>:assumed-role/CodeStar-<myproject>-Execution/awscodestar-<myproject>-lambda-<myfunction>-YYYY is not authorized to perform: ssm:GetParameters on resource: arn:aws:ssm:us-west-2:ZZZZZ:parameter/<myparam>


Below the role part of my template.yml:
LambdaExecutionRole:
    Description: Creating service role in IAM for AWS Lambda
    Type: AWS::IAM::Role
    Properties:
      RoleName: !Sub 'CodeStar-${ProjectId}-Execution${Stage}'
      AssumeRolePolicyDocument:
        Statement:
        - Effect: Allow
          Principal:
            Service: [lambda.amazonaws.com]
          Action: sts:AssumeRole
      Path: / 
      ManagedPolicyArns:
        -  arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        -  arn:aws:iam::aws:policy/AmazonSSMReadOnlyAccess
      PermissionsBoundary: !Sub 'arn:${AWS::Partition}:iam::${AWS::AccountId}:policy/CodeStar_${ProjectId}_PermissionsBoundary'


What should I do to get this working?

Thank you"
AWS CodeStar	"Re: AccessDeniedException using GetParameters operation for SSM param.
After a couple of tries and errors I ended up getting this to work.

First I had to edit the inline policy for CodeStarWorker-<myproject>-CloudFormation role and added full access to IAM.

Next I stopped editing the template.yml in VSCode and started using the CloudFormation designer (e.g. https://us-west-2.console.aws.amazon.com/cloudformation/designer/home?region=us-west-2) to make sure my edits are correct (hit the ""refresh"" and then the ""tick"" buttons to validate). This is due to the fact that the slightest empty space can be considered an error in the template. Just need to get used to it. 

Another thing was that I had to remove the 'PermissionBoundary' in order for the custom policies to work. I plan to get back to this later and edit the boundaries as well since I'm still starting up on the AWS world and found it all a bit overwhelming.

Below the end result that allowed me to read the SSM param:
LambdaExecutionRole:
    Description: Creating service role in IAM for AWS Lambda
    Type: AWS::IAM::Role
    Properties:
      RoleName: !Sub 'CodeStar-${ProjectId}-Execution${Stage}'
      AssumeRolePolicyDocument:
        Statement:
        - Effect: Allow
          Principal:
            Service: [lambda.amazonaws.com]
          Action: sts:AssumeRole
      Path: / 
      ManagedPolicyArns:
        -  arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        -  arn:aws:iam::aws:policy/AmazonSSMReadOnlyAccess
      Policies:
          -
            PolicyName: LambdaCustomPolicySSM
            PolicyDocument:
              Statement:
                - Effect: Allow
            Action: ssm:GetParameter
            Resource:
              - arn:aws:ssm:us-west-2:ZZZZ:parameter/*


Cheers"
AWS CodeStar	"Change CodePipeline in CodeStar
Hi everyone,

How can I change the name of the CodePipeline in my CodeStar Dashboard?

Here is some context to my question:

I have created a CodeStar project and then I realised that I would like to change the name of the CodePipeline. So I did the change through a new CloudFormtaion change set and now I can see that this change was not automatically reflected in my CodeStar project. Which is to be expected, to a certain extend, as CodeStar is not part of my CloudFormation so probably it does not know of any changes to my CloudFromation defined infrastructure. I looked at the CodeStar's cli but I could not find a way to change the CodePipeline ARN to the new one. When I look at the Project Resources of my CodeStar dashboard I still see the old CodePipeline name and ARN. Recreating everything from scratch just because of that is rather bad experience.

Thank you.

Edited by: amea on Jan 31, 2019 11:43 AM

Edited by: amea on Jan 31, 2019 11:47 AM"
AWS CodeStar	"Re: Change CodePipeline in CodeStar
Hello, 

Thank you for your question about pipeline names within AWS CodeStar projects. The CodeStar project name and the pipeline name cannot be changed after the project resources are created. When you create your AWS CodeStar project, the pipeline name is automatically generated based on the project name. For example, for a project named “MyProject”, your pipeline will be named “MyProject-Pipeline” and cannot be edited. I am sorry for the frustration you experienced with this. 


Darla"
AWS CodeStar	"Codestar Jira integration is broken on the atlassian side
The procedure for Atlassian Jira Integration isn't possible now because authentication factors have changed on their side and they are now asking for ""Request Token URL"". See attached graphic. This procedure could use a review.

Edited by: douglasgoodall on Feb 16, 2019 12:03 PM"
AWS CodeStar	"Re: Codestar Jira integration is broken on the atlassian side
Hello,

On the ""Link applications"" modal on JIRA's webpage, only provide a value for the ""Application Name"" field and then click on the bottom checkbox for ""Create incoming link"". Leave all other fields empty on this modal. Clicking on ""Continue"", should open another modal where only ""Consumer Key"", ""Consumer Name"" and ""Public Key"" are required as input. You should find this information on our set up page.

Let us know if this helps."
AWS CodeStar	"AccessDeniedException when trying to test lambda using the dashboard.
Using the CodeStar Python webservice as starting point I have created a lambda function to write data to DynamoDB.

Using ""sam local start-api"" CLI the tests go well and the items appear on the DynamoDB (checking with the dashboard).

However when I try to test the lambda function from the dashboard (Services > Lambda > Functions > ""<MyLambda>"" > Test) I get an AccessDeniedException in the form:

""An error occurred (AccessDeniedException) when calling the PutItem operation: User: arn:aws:sts::xxx:assumed-role/CodeStar-<myproject>-Execution/awscodestar-<myproject>-lambda-<mylambda> is not authorized to perform: dynamodb:PutItem on resource: arn:aws:dynamodb:us-west-2:<mytable>""

Here is part of my modified template.yml:

LambdaExecutionRole:
    Description: Creating service role in IAM for AWS Lambda
    Type: AWS::IAM::Role
    Properties:
      RoleName: !Sub 'CodeStar-${ProjectId}-Execution${Stage}'
      AssumeRolePolicyDocument:
        Statement:
        - Effect: Allow
          Principal:
            Service: http://lambda.amazonaws.com
          Action: sts:AssumeRole
      Path: /
      ManagedPolicyArns:
        -  arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
        -  arn:aws:iam::aws:policy/AWSLambdaInvocation-DynamoDB
        -  arn:aws:iam::aws:policy/AmazonDynamoDBFullAccess
      PermissionsBoundary: !Sub 'arn:${AWS::Partition}:iam::${AWS::AccountId}:policy/CodeStar_${ProjectId}_PermissionsBoundary'

Can someone help?"
AWS CodeStar	"Re: AccessDeniedException when trying to test lambda using the dashboard.
Turns out that what I was doing wrong was creating the DynamoDB in the dashboard.

Once I deleted it and used the Cloudformation template associated to the CodeStar project to create it as well the lambda started to work.

If someone is having the same difficulty, use the role provided above and make sure the db is also created from template.yml, like below:

...
Resources:
  RawRequests:
    Type: AWS::DynamoDB::Table
    Properties: 
      AttributeDefinitions: 
        - AttributeName: TimeStamp
          AttributeType: S
      KeySchema: 
        - AttributeName: TimeStamp
          KeyType: HASH
      ProvisionedThroughput: 
        ReadCapacityUnits: 1
        WriteCapacityUnits: 1
      TableName: RawRequests
...

Cheers"
AWS CodeStar	"How to create a lambda layer for a CodeStar project?
Hello everyone,

I have created a CodeStar project (Python Webservice) and I am using vscode to edit it.

So far I have customized the CodeStar generated project to:

buildspec.yml
functions/lambda1
functions/lambda2
template-configuration.json
template.yml


It builds using ""sam local build"", and when changes are pushed to CodeCommit as well.

However, I did not managed to reuse code between ""lambda1"" and ""lambda2"". If I try to add a ""Layer"" using the ""Lambda Dashboard"" it rewrites the code I have added using git.

Any suggestions on how to re-use code in a CodeStar project?

Edited by: robsondepaula on Feb 11, 2019 11:32 AM"
AWS CodeStar	"CodeStar CLI - Create CodeStar Project without creating GitHub Repo
Hello,

As of the moment, aws codestar create-project --cli-input-json creates a GitHub repo every time, would be good to have an option to reuse an existing repo. Is there a way I can do that?"
AWS CodeStar	"Re: CodeStar CLI - Create CodeStar Project without creating GitHub Repo
Hello,

Today, you cannot create a CodeStar project using an existing GitHub repository from either our CLI or the console.
Thank you for your interest. We have received multiple requests for this feature. Your interest helps us prioritize our work. 

Suket"
AWS CodeStar	"Re: CodeStar CLI - Create CodeStar Project without creating GitHub Repo
Thank you, is there a public roadmap (or can you share one) to know more or less when this feature could potentially be implemented?

Edited by: amea on Feb 11, 2019 2:37 AM"
AWS CodeStar	"Use CodeStar with an existing Github Repo
Hello,

I've just been playing around with AWS CodeStar. I have a number of repo's in Github, is there anyway to connect CodeStar to an existing repo or will it always create a new one.

Regards,
Steve"
AWS CodeStar	"Re: Use CodeStar with an existing Github Repo
Anyone got any ideas on this ?

Edited by: juststeve1 on Feb 26, 2018 1:56 AM"
AWS CodeStar	"Re: Use CodeStar with an existing Github Repo
Is there any updates on this?"
AWS CodeStar	"Re: Use CodeStar with an existing Github Repo
Hello,

Today, you cannot create a CodeStar project using an existing GitHub repository from either our CLI or the console.
Thank you for your interest. We have received multiple requests for this feature. Your interest helps us prioritize our work."
AWS CodeStar	"GitHub Repository Rename
Hi everyone,

If I rename a GitHub repository then the GitHub Issues extension in CodeStar brakes. I don't find a way to update the CodeStar project, which I created using the aws codestar cli. Could you please advise what I can do without recreating the whole project?

Thank you"
AWS CodeStar	"CodeStar: Custom Tiles & Extensions - Feature Request
Hi everyone,

I am huge fan of CodeStar and I believe it has a big potential. Therefore I would like to ask if you plan to add a Custom Tiles & Extensions feature, so that people can bring their own graphical representations (Graphs, Text, Images ) from with their project resources (maybe via S3 or Lambda) and also from 3^rd party services, such as SonarCloud or Sentry, etc."
AWS CodeStar	"Re: CodeStar: Custom Tiles & Extensions - Feature Request
Hi,
Thank you for this feature request, I have passed it to the team for further review and consideration. Your feedback is very much appreciated!"
AWS CodeStar	"Select subnet at create time of project
Hello all,

I have create a CodeStar project using EBS. But, the subnet selected is wrong and EBS say me
The EC2 instances failed to communicate with AWS Elastic Beanstalk


It's right, because subnet is private subnet.

If I want change subnet in EBS console> MyApp > Configuration > Network
I can't cause application state
Must be Ready.


I don't have right to create changeset in CloudFormation to change subnet.

How can I choice subnet at create time ?

Regards,"
AWS CodeStar	"CodeStar generates faulty permissions boundary policy for new projects
At the beginning of January 2019 I created a CodeStar project in AWS. Recently I tried adding another stage to the code pipeline, so that it would invoke a lambda, which would do some additional testing after deployment.

However, whatever I did, I could not get the pipeline to invoke the lambda. The stage always failed and if I clicked ""details"" I got a pop-up saying: ""Action execution failed. Insufficient permissions. The provided role does not have the lambda:ListFunctions permission.""

I literally added lambda:ListFunctions permission to every single role under IAM to get it working, but nothing. I googled a lot, but it seems that nobody else has ever had this problem.

Then I found this piece of text in the docs while googling: ""In the current implementation, Lambda doesn't support identifying specific resources using the resource ARNs (also referred to as resource-level permissions) for some of the API actions, so you must specify a wildcard character (*).""

Well, turns out that lambda:ListFunctions is one such function that requires wildcard permissions, but the managed permissions boundary policy that AWS CodeStar was generating for the CodeStarWorker-projectname-ToolChain role specified all the lambda ARNs directly.

Removing the managed permissions boundary policy from the worker role immediately fixed the issue. Now my code pipeline successfully invokes my lambda.

Turns out this is a new thing: ""For projects created after December 6, 2018 PDT, AWS CodeStar provisioned your project with a permissions boundary policy.""

Edited by: elver on Jan 13, 2019 5:53 PM"
AWS CodeStar	"CodeStar/Cloud9 API Gateway Local Testing
Hi,
When using CodeStar for AWS Serverless development, adding an AWS::Serverless::Api resource to template.yml causes Cloud9 Api Gateway (local) testing to fail - the ""Execution Results"" panel hangs with just ""Loading..."".
Removing the AWS::Serverless::Api resource causes test to work again.
template.yml is valid (according to ""sam validate"").

This can easily be recreated by:
1) Creating a new CodeStar project using the Express.js template w/Cloud9 IDE on EC2.
2) Opening the new Cloud9 IDE, installing aws-serverless-express and express via npm.
3) Adding the following to the Resources section of template.yml:
  MyApi:
    Type: AWS::Serverless::Api
    Properties:
      StageName: ""Prod""


It does not matter if you add ""RestApiId: !Ref MyApi"" to the AWS::Serverless::Function events.
Other valid template.yml sections don't seem to affect this behavior - just AWS::Serverless:Api.
Actually deploying the CodeStar project works fine with AWS::Serverless:Api included - it is just the Cloud9 API Gateway (local) testing that fails.


Any ideas or solutions?
Thanks."
AWS CodeStar	"Re: CodeStar/Cloud9 API Gateway Local Testing
Update:
I kind of figured out the problem.
Cloud9 local API Gateway testing fails if you don't include a ""DefinitionUri"" or ""DefinitionBody"" field in the API::Serverless::Api resource/properties definition.
This is a problem, because once you include swagger in AWS::Serverless::Api, the ""Auth"" functionality in AWS::Serverless::Api and AWS::Serverless::Api / Event don't seem to work any longer, and you end up having to include everything in the swagger.
This seems to defeat the purpose of adding Auth to AWS::Serverless.

TLDR;

    Cloud9 API Gateway testing does not work if you include AWS::Serverless::Api w/o a swagger definition. CodeStar/Cloudformation does work fine in this case.
    If you include a swagger in API::Serverless::Api, AWS::Serverless ""Auth"" functionality no longer works.
    You should clearly be able to use AWS::Serverless::Api w/o including a swagger, according to the example here:
https://github.com/awslabs/serverless-application-model/commit/e45173950ce6239bb674f4134899969f73a7235a#commitcomment-30091980"
AWS CodeStar	"Modifying Capacity to Load balanced in CodeStar application fails
I have successfully deployed a Laravel app using CodeStar. If I modify the app's Capacity to Load balanced the environment successfully updates, adding 2 ECs behind a load balancer. However, the next time I push code to the project the deploy stage logs two errors:

ERROR	Deleting CloudWatch alarm named: awseb-e-bsqfgw3nz5-stack-AWSEBCloudwatchAlarmLow-17XDEEN6KQOBS failed Reason: API: cloudwatch:DeleteAlarm User: arn:aws:sts::749988685899:assumed-role/CodeStarWorker-codestar1-CloudFormation/AWSCloudFormation is not authorized to perform: cloudwatch:DeleteAlarms

ERROR	Deleting CloudWatch alarm named: awseb-e-bsqfgw3nz5-stack-AWSEBCloudwatchAlarmHigh-11C5L3Q6BW8HR failed Reason: API: cloudwatch:DeleteAlarm User: arn:aws:sts::749988685899:assumed-role/CodeStarWorker-codestar1-CloudFormation/AWSCloudFormation is not authorized to perform: cloudwatch:DeleteAlarms 

It then rolls back the deployment of the load balancer and I end up with just one EC2. I have tried deleting the these two alarms before pushing code but the two errors still occur.

I'm not sure if I should update the auto-generated AWSCloudFormation role to be able to delete alarms as it seems it should already have this permission. Has anyone else had this problem or know how to solve it?"
AWS CodeStar	"Re: Modifying Capacity to Load balanced in CodeStar application fails
I have given CloudFormation AWSCloudFormation permission to perform cloudwatch DeleteAlarms so at least code updates complete but changes to the environment don't persist through a code update. These are the logs when I change the EB config from a single instance to load balanced: 

2018-11-23 18:35:23 UTC+0100	INFO	Environment update completed successfully.
2018-11-23 18:35:23 UTC+0100	INFO	Successfully deployed new configuration to environment.
2018-11-23 18:35:22 UTC+0100	INFO	Deleted EIP: 63.33.99.166
2018-11-23 18:35:19 UTC+0100	INFO	Environment health has transitioned from Ok to Info. Command is executing on 1 out of 2 instances. All instances are in same availability zone (eu-west-1b).
2018-11-23 18:34:50 UTC+0100	INFO	Updated codestar1app.snuxpzjwxg.eu-west-1.elasticbeanstalk.com to point to awseb-e-b-AWSEBLoa-1CXJLO0935DAY-178429141.eu-west-1.elb.amazonaws.com. Your application might be unavailable for a few minutes while the changes propagate.
2018-11-23 18:34:47 UTC+0100	INFO	Created CloudWatch alarm named: awseb-e-bsqfgw3nz5-stack-AWSEBCloudwatchAlarmHigh-8GC9GY7BHXRM
2018-11-23 18:34:47 UTC+0100	INFO	Created CloudWatch alarm named: awseb-e-bsqfgw3nz5-stack-AWSEBCloudwatchAlarmLow-EUVUKDZOZSWP
2018-11-23 18:34:47 UTC+0100	INFO	Created Auto Scaling group policy named: arn:aws:autoscaling:eu-west-1:749988685899:scalingPolicy:71666ed7-5f2b-4d61-a0b3-c9ecef81d1a5:autoScalingGroupName/awseb-e-bsqfgw3nz5-stack-AWSEBAutoScalingGroup-15TY2FHR0AJDJ:policyName/awseb-e-bsqfgw3nz5-stack-AWSEBAutoScalingScaleUpPolicy-426MIFULGCOI
2018-11-23 18:34:32 UTC+0100	INFO	Created Auto Scaling group policy named: arn:aws:autoscaling:eu-west-1:749988685899:scalingPolicy:35fbca33-8e1e-4764-9f13-2d75a4ac378c:autoScalingGroupName/awseb-e-bsqfgw3nz5-stack-AWSEBAutoScalingGroup-15TY2FHR0AJDJ:policyName/awseb-e-bsqfgw3nz5-stack-AWSEBAutoScalingScaleDownPolicy-1KGACD9P6XU27
2018-11-23 18:34:19 UTC+0100	INFO	Added instance https://forums.aws.amazon.com/ to your environment.
2018-11-23 18:31:58 UTC+0100	INFO	Created load balancer named: awseb-e-b-AWSEBLoa-1CXJLO0935DAY
2018-11-23 18:31:42 UTC+0100	INFO	Created security group named: sg-0ba4a619a0c439ed6
2018-11-23 18:31:26 UTC+0100	INFO	Updating environment codestar1app's configuration settings.
2018-11-23 18:31:19 UTC+0100	INFO	Environment update is starting.
2018-11-23 18:30:19 UTC+0100	INFO	Environment health has transitioned from Info to Ok.
2018-11-23 18:28:40 UTC+0100	INFO	Environment update completed successfully.
2018-11-23 18:28:40 UTC+0100	INFO	Successfully deployed new configuration to environment.
2018-11-23 18:28:40 UTC+0100	INFO	New application version was deployed to running EC2 instances.
2018-11-23 18:28:19 UTC+0100	INFO	Environment health has transitioned from Ok to Info. Application update in progress on 1 instance. 0 out of 1 instance completed (running for 53 seconds).
2018-11-23 18:27:52 UTC+0100	INFO	Deploying new version to instance(s).
2018-11-23 18:27:18 UTC+0100	INFO	Updating environment codestar1app's configuration settings.
2018-11-23 18:27:11 UTC+0100	INFO	Environment update is starting.

The next time I push code the environment reverts back to a single instance. These are the logs when that happens:

2018-11-23 18:52:52 UTC+0100	INFO	Environment update completed successfully.
2018-11-23 18:52:52 UTC+0100	INFO	Successfully deployed new configuration to environment.
2018-11-23 18:52:52 UTC+0100	INFO	New application version was deployed to running EC2 instances.
2018-11-23 18:52:50 UTC+0100	INFO	Deleted security group named: sg-0ba4a619a0c439ed6
2018-11-23 18:52:18 UTC+0100	WARN	Environment health has transitioned from Info to Severe. Application update in progress. 1 out of 1 instance completed (running for 5 minutes). Elastic Load Balancer (awseb-e-b-AWSEBLoa-1CXJLO0935DAY) has been deleted.
2018-11-23 18:51:18 UTC+0100	INFO	Environment health has transitioned from Degraded to Info. Application update in progress. 1 out of 1 instance completed (running for 4 minutes).
2018-11-23 18:50:48 UTC+0100	INFO	Deleted CloudWatch alarm named: awseb-e-bsqfgw3nz5-stack-AWSEBCloudwatchAlarmHigh-8GC9GY7BHXRM
2018-11-23 18:50:48 UTC+0100	INFO	Deleted CloudWatch alarm named: awseb-e-bsqfgw3nz5-stack-AWSEBCloudwatchAlarmLow-EUVUKDZOZSWP
2018-11-23 18:50:18 UTC+0100	INFO	Removed instance https://forums.aws.amazon.com/ from your environment.
2018-11-23 18:50:18 UTC+0100	WARN	Environment health has transitioned from Info to Degraded. Application update in progress (running for 3 minutes). No data received from 1 out of 2 instances. All instances are in same availability zone (eu-west-1b).
2018-11-23 18:50:01 UTC+0100	INFO	Current scaling activities are complete
2018-11-23 18:49:01 UTC+0100	INFO	Waiting for current scaling activities to complete
2018-11-23 18:49:00 UTC+0100	INFO	Deploying new version to instance(s).
2018-11-23 18:49:00 UTC+0100	INFO	Updated codestar1app.snuxpzjwxg.eu-west-1.elasticbeanstalk.com to point to 63.33.97.58. Your application might be unavailable for a few minutes while the changes propagate.
2018-11-23 18:47:25 UTC+0100	INFO	Created EIP: 63.33.97.58
2018-11-23 18:47:18 UTC+0100	INFO	Environment health has transitioned from Ok to Info. Application update in progress (running for 10 seconds). All instances are in same availability zone (eu-west-1b).
2018-11-23 18:46:54 UTC+0100	INFO	Updating environment codestar1app's configuration settings.
2018-11-23 18:46:47 UTC+0100	INFO	Environment update is starting.

How do I make the change to the configuration persist through code updates?"
AWS CodeStar	"Change the bucketName in codestar when deploying through aws cli ?
Hello Team,

I am using codestar create project feature using aws cli where we can customize toolchain.yml template. Basically i need to change the bucketname and stackName that codestar creates. Here is the snippet from toolchain.yml which i got from Link:https://docs.aws.amazon.com/codestar/latest/userguide/cli-tutorial.html
Default Configuration
  S3Bucket:
    DeletionPolicy: Retain
    Description: Creating Amazon S3 bucket for AWS CodePipeline artifacts
    Properties:
      BucketName: !Sub ""aws-codestar-${AWS::Region}-${AWS::AccountId}-${ProjectId}""
      Tags:
      - Key: Name
        Value: !Sub ""${ProjectId}-S3Bucket""
      VersioningConfiguration:
        Status: Enabled
    Type: AWS::S3::Bucket


I changed the BucketName to BucketName: !Sub ""Test-${AWS::Region}-${ProjectId}""

1)And tried to run the stack but got an error saying API: s3:CreateBucket Access Denied. .But i am pretty sure that my toolchain.yml is correct because when i try to create a stack with that it created perfectly. The problem arises when i am building it through codestar project .
2)How can i change the stackname(i.e.By default *awscodestar-myproject*) to Test-myproject . I checked the stackname parameter in toolchain.yml but all the fields are appended with lambda which is created at the time of code deploy . 
Why i am getting this ? Am i missing any thing ?

Thanks

Edited by: Spartan21 on Nov 1, 2018 3:49 AM"
AWS CodeStar	"Upload own project template
Does AWS plan to allow developers to upload their own cloud formation templates for creating codestar projects?"
AWS CodeStar	"Re: Upload own project template
Hello, thanks for your interest - we've received multiple requests for this feature, which helps us to prioritize our work. 

Thanks,
Liz"
AWS CodeStar	"Re: Upload own project template
It will be great to know if this is being planned via marketplace or via codestar itself. Thanks for your reply."
AWS CodeStar	"Re: Upload own project template
Hello,

Thank you for your question about submitting your own AWS CloudFormation template to create a new AWS CodeStar project. This feature is now available in AWS CodeStar. You can upload your own source code and toolchain template, and then use the API/SDK/CLI to create your AWS CodeStar project. 

To learn more, see the following sections in the User Guide:
https://docs.aws.amazon.com/codestar/latest/userguide/how-to-create-project.html#how-to-create-project-cli
https://docs.aws.amazon.com/codestar/latest/userguide/cli-tutorial.html 

Thank you,

Darla"
AWS CodeStar	"Re: Upload own project template
Hi,

I had tried to using this feature using aws cli following this https://docs.aws.amazon.com/codestar/latest/userguide/cli-tutorial.html#cli-tutorial-download-source . I set up a project using default toolchain.yml which they given in that page and with source.code. I deployed the stack but at build phase the stack is getting failed. When i see the error in cloudwatch it is like this 
[Container] 2018/10/31 19:25:53 Waiting for agent ping
[Container] 2018/10/31 19:25:53 Waiting for DOWNLOAD_SOURCE
[Container] 2018/10/31 19:25:53 Phase is DOWNLOAD_SOURCE
[Container] 2018/10/31 19:25:53 CODEBUILD_SRC_DIR=/codebuild/output/src520605383/src
[Container] 2018/10/31 19:25:53 Phase complete: DOWNLOAD_SOURCE Success: false
[Container] 2018/10/31 19:25:53 Phase context status code: YAML_FILE_ERROR Message: YAML file does not exist


Any help is appreciated ?
Thanks"
AWS CodeStar	"Re: Upload own project template
Resolved it . It occurred because of wrong path reference ."
AWS CodeStar	"Newly created Go project cannot find packages
I've tried launching a new Codestar project, using Cloud9 as the IDE, and when I try to run the main.go file, I get this error:

Running ... /home/ec2-user/environment/go-test-2/main.go
main.go:6:2: cannot find package ""github.com/aws/aws-lambda-go/events"" in any of:
        /usr/local/go/src/github.com/aws/aws-lambda-go/events (from $GOROOT)
        /home/ec2-user/go/src/github.com/aws/aws-lambda-go/events (from $GOPATH)
main.go:7:2: cannot find package ""github.com/aws/aws-lambda-go/lambda"" in any of:
        /usr/local/go/src/github.com/aws/aws-lambda-go/lambda (from $GOROOT)
        /home/ec2-user/go/src/github.com/aws/aws-lambda-go/lambda (from $GOPATH)
 
 
Process exited with code: 1


checking Go version works. I followed the instructions on this page: https://docs.aws.amazon.com/cloud9/latest/user-guide/sample-go.html and got nowhere.

Does anyone have any suggestions?
thanks."
AWS CodeStar	"Re: Newly created Go project cannot find packages
Seems this line is failing in the buildspec.yml file:

# Fetch all dependencies
      - go get ./...


So the answer is to run 'go get' and the url of the imported packages. ie:

go get -u github.com/aws/aws-lambda-go/lambda


Interestingly all the libraries in 'aws-lambda-go' got loaded with the one command.

This issue does not affect the standard library."
AWS CodeStar	"Re: Newly created Go project cannot find packages
Hi there!

The buildspec.yml file is executed by CodeBuild during the build stage of your CodePipeline execution, so it’s not directly the cause of the issue you’re facing. Though it leads to, as you’ve discovered, the lack of your dependencies on your IDE instance.

You should be able to “cd” into your project root directory and execute just “go get”  (instead of specifying specific dependencies). Does that work?

Efe"
AWS CodeStar	"Re: Newly created Go project cannot find packages
Hello Efe,
No executing 'go get' results in an error:

kencz:~/environment/go-test-2 (master) $ go get
go install: no install location for directory /home/ec2-user/environment/go-test-2 outside GOPATH
For more details see: 'go help gopath'


What does work is to execute 'go get ""github.com/aws/aws-lambda-go/lambda""' or one of the other dependencies.
thanks,
Ken"
AWS CodeStar	"Is it possible to deploy with custom project templates
Hi,

What if I want start depoying a PHP application that requires different build steps and server config than what you're offering in pre-defined project templates (PHP Slim, Python Djange, etc.). Does CodeStart work with other languages and frameworks. I personally wanted to deploy a PHP Symofny application and failed.

Ł."
AWS CodeStar	"Re: Is it possible to deploy with custom project templates
Hi there,

Currently CodeStar doesn't support the creation of custom project templates, however the service supports customization of templates after projects are created.

The original project template provisioned with a new project acts as starter package containing a continuous deployment toolchain, provisioned infrastructure stack on Lambda/EC2/EB and sample source code.

If you are looking to build a PHP Symfony application, a potential workaround could be to create a PHP based template available from our project list today, and replace the sample code provided in the project's CodeCommit repository with your own Symfony source."
AWS CodeStar	"Re: Is it possible to deploy with custom project templates
Hello,

Thank you for your question about submitting your own PHP Symfony application code for a project. This feature is now available in AWS CodeStar. You can upload your own source code in a .zip file to an Amazon S3 bucket along with an AWS CloudFormation toolchain template that provisions the AWS resources for your project. Then you use the AWS CodeStar API/SDK/CLI to create a project that uses your application code. 

To learn more, see the following sections in the User Guide:
https://docs.aws.amazon.com/codestar/latest/userguide/how-to-create-project.html#how-to-create-project-cli
https://docs.aws.amazon.com/codestar/latest/userguide/cli-tutorial.html 

Thank you,

Darla"
AWS CodeStar	"CodeStar - CloudFormation staus code 400 ( Throttling )
Hello,
I started receiving status code 400 from cloud formation run inside of a code pipeline created by code star.

Error I'm getting is: ""AWS CodeStar encountered an error while handling your request: Rate exceeded (Service: AmazonCloudFormation; Status Code: 400; Error Code: Throttling; Request ID:xxxxx). Try again with different parameters, or contact AWS Support.""

Cloud formation template is executed ok and stacks are created but at the end CodeStar::SyncResources fails to create which is custom resource added by code star not by me. Then rollback  is triggered.

I've tried to search for SyncResources documentation and there is very little information.

I am within limits of CloudFormation and CodeStar and when I use aws cloudformation deploy cli stack is normally created.

Any advice?

Edited by: LuKa451 on Oct 20, 2018 11:45 AM"
AWS CodeStar	"Use the default aws-sdk that is imported by lambda in codestar?
I am deploying my react application using AWS codestar. Where i had choosen serverless lambda with node.js . Here i am using yarn to build my project. this is how my `buildspec.yml` looks

    version: 0.2
    
    phases:
      install:
        commands:
          # Install dependencies needed for running tests
          - npm install -g yarn
    
          # Upgrade AWS CLI to the latest version
          - pip install --upgrade awscli
      pre_build:
        commands:
          # Discover and run unit tests in the 'tests' directory
          - yarn install
      build:
        commands:
          # Use AWS SAM to package the application by using AWS CloudFormation
          - yarn build
          - aws s3 cp --recursive ./build s3://$WEBSITE_S3_BUCKET/build/ --grants read=uri=http://acs.amazonaws.com/groups/global/AllUsers
          - sed -i -e ""s|/assets/|$WEBSITE_S3_PREFIX/build/assets/|g"" build/index.html
          - aws cloudformation package --template template.yml --s3-bucket $S3_BUCKET --output-template template-export.yml
    
    artifacts:
      type: zip
      files:
        - template-export.yml


Here is my package.json 

    {
      ""name"": ""react-plotly-app"",
      ""version"": ""0.1.0"",
      ""private"": true,
      ""dependencies"": {
        ""aws-sdk"": ""^2.315.0"",
        ""plotly.js"": ""^1.41.1"",
        ""react"": ""^16.5.2"",
        ""react-dom"": ""^16.5.2"",
        ""react-pivottable"": ""^0.6.0"",
        ""react-plotly.js"": ""^2.2.0"",
        ""react-scripts"": ""1.1.5""
      },
      ""scripts"": {
        ""start"": ""react-scripts start"",
        ""build"": ""react-scripts build"",
        ""test"": ""react-scripts test --env=jsdom"",
        ""eject"": ""react-scripts eject""
      }
    } 


When codebuild zips my project it is coming around 74MB. But when lambda tries to unzip it, it is coming 266MB exceeding the lambda allowed size (i.e.262MB). 

**My TAKEAWAY for the above scenario**

Usually `aws-sdk` is by default imported by lambda , So, i removed it from my dependenices. Then try with `codebuild` but caught with an error like this 
`Module not found: Error: Can't resolve 'aws-sdk' in '/codebuild/output/src909458172/src/src'` , I am thinking this is invoked because i kept `import AWS from 'aws-sdk';` in my App.js file.

Is there a way i can avoid this ? Basically i want to use `aws-sdk` from aws lambda, i dont want to use it in my dependencies because it costs me (28MB) size. Removing it will deploy my codestar `cloudformation` template. 

Any workarounds for this ?

**Static webhosting with S3 vs Serverless Lambda**

When i deployed same app using static website hosting with S3 it just taken the build and read the index.html, i didnt see any `node_modules` in it . But in `serverless` it is taking node_modules and also unzipping and reading the index.html in lambda. Dont know why ?

Any help is highly appreciated 

Thanks

Edited by: Spartan21 on Sep 26, 2018 4:27 AM"
AWS CodeStar	"Re: Use the default aws-sdk that is imported by lambda in codestar?
Hello,
I'm from the AWS JavaScript SDK team. Based on your package.json, it looks like you created a front-end project using create-react-app, and are now trying to deploy it somewhere in AWS. Is that accurate?

It also looks like you're using the CodeStar template for writing a webapp with Lambda.

If you're using create-react-app, when you build your project for production there should be a build folder that contains all of your static assets, including your JavaScript bundle. This bundle will also include the aws-sdk if you're using it in your project but it will be a minified version, not the entire contents of node_modules. If your Lambda function is only serving static files, then you should be able to remove any node_modules not being used by your Lambda function (possibly the entire node_modules directory) when you create your deployment in CodeBuild.

Just removing node_modules should reduce the size of your function a lot. You can also reduce the amount of code pulled in for the aws-sdk by importing individual services. Take a look at the documentation for importing individual services:
https://docs.aws.amazon.com/sdk-for-javascript/v2/developer-guide/webpack.html

As your number of assets increase, you can also consider moving static files to S3, with versioning, and service your assets from there.

Let me know if this helps!
-Chris"
AWS CodeStar	"Integrate existing CodePipeline with CodeStar
I have a working CodePipline that builds and deploys 2 repos from the CodeCommit to the Elastic Beanstalk. It works great but now I would like to have a CodeStar project to manage it. What would be the best way to do something like this? I'm using CodeCommit, CodeBuild (2 repos main and secondary) and deploy a single artifact as a Docker image to EB. If I'm missing any details here please let me know I'll be happy to provide these"
AWS CodeStar	"Re: Integrate existing CodePipeline with CodeStar
Ok, no answers so I had to hack it somehow. Here are the steps that allowed me (sort of) to do what I needed to do:

    1. Create CodeStar project with all the components
    2. Remember at this point you should have fully working CodePipeline, CodeCommit repo, CodeBuild and EB deployment that I'll call original from this point on
    3. Replace generated code in the created CodeCommit repo with the actual. I kept template.yml (just in case) but updated buildspec.yml with the ""real"" code
    4. Open the generated pipeline and update so it does whatever you need including the deployment piece.
    5. Update generated CodeBuild project to (again) do what you need it to do
    6. Track IEA role created for the generated CodeStar pipeline and add a policy that you need to copy from your existing (and working) pipeline otherwise it will not deploy to EB 
    7. Save everything and push code changes
    8. If it all works you can delete original CodeCommit repo, pipeline and CodeBuild
    9. I will try to remove generated EB environment and see if it breaks anything.

I think the biggest issue with this is that I can't repoint from the generated EB deployment to the actual EB where the app gets deployed by the pipeline

Edited by: Bostone on Oct 9, 2018 1:12 PM"
AWS CodeStar	"Re: Integrate existing CodePipeline with CodeStar
Hello!

Apologies for the delay in responding. CodeStar currently does not support migrating existing resources into a CodeStar project, but this is a feature request that we've received in the past. Thank you for stating the workaround steps, it's super helpful in determining how customers are using CodeStar. I've passed this onto our team for review.

Efe"
AWS CodeStar	"Cannot have more than 0 active builds - AccountLimitExceededException
I've used codestar to set up a new project, but when it gets to the ""build"" step of the pipeline, I simply get the error:

Action execution failed
Error calling startBuild: Cannot have more than 0 active builds for the account (Service: AWSCodeBuild; Status Code: 400; Error Code: AccountLimitExceededException; Request ID: <x>)"".


I raised a support request and it took about a week for them to say they've raised the limit to 20 for my account (which seems like it should be default), but.. I still get the same error. This makes me think the error may be incorrect or I've set up something incorrectly. Has anyone else seen this before? I couldn't find this particular error mentioned anywhere else."
AWS CodeStar	"Re: Cannot have more than 0 active builds - AccountLimitExceededException
I've the same problem.

Have you solved the problem?

I'm using AWS CodeStar.

Edited by: carlosfaria on Jan 6, 2018 8:41 AM"
AWS CodeStar	"Re: Cannot have more than 0 active builds - AccountLimitExceededException
If you are still seeing this error, you can contact AWS support. Please refer to https://docs.aws.amazon.com/codebuild/latest/userguide/limits.html. Thanks."
AWS CodeStar	"Re: Cannot have more than 0 active builds - AccountLimitExceededException
Hi, 
we have the same problem in codebuild
and we just have 80 build projects

Error: Cannot have more than 0 active builds for the account

how to check active builds?"
AWS CodeStar	"Re: Cannot have more than 0 active builds - AccountLimitExceededException
Paul,

Are you using the account Id (35****94) with which you posted this message? If yes, you should get the default 20 concurrent builds and not be seeing this error message. Could you private message me the buildARN that you got this error message for?"
AWS CodeStar	"AWS Codestar policy limit
Hello Forum. I ran into a problem I have 19 functions in my template.yml I got this error when adding more functions: AWS CodeStar encountered an error while handling your request: One or more policies in IAM could not be created or updated. The number of resources in your project has exceeded the IAM policy size limit.. Try again with different parameters, or contact AWS Support.
The policy has a limit of 6144 characters and mine has 5858 lines. I don't understand how can a project be limited in the number of functions is there a workaround for this? thank you.﻿"
AWS CodeStar	"Re: AWS Codestar policy limit
Hello,

Thank you for reaching out. We have optimized the IAM managed policies that AWS CodeStar generates for project team members, and you will no longer run into policy size limits when adding new Lambda functions to your AWS CodeStar project. 


Thanks,
Ashwin"
AWS CodeStar	"IAM policy size limit
Hi,

I'm starting a serverless project based on Nodejs Lambda template.  In order to fine-grained manage resource access control, I created several service roles and resource policies in my cloudformation template.  
Today I encounter a deploy error which showed ""One or more policies in IAM could not be created or updated. The number of resources in your project has exceeded the IAM policy size limit."" on AWS::CodeStar::SyncResources.  
Does CodeStar have IAM policy size limit ? And how can I extend this limit to solve this problem ? I've searched for document but did not find any description about this case.
Thanks for your help!

Sam Lo"
AWS CodeStar	"Re: IAM policy size limit
Hello,

Thanks for reaching out. We are aware of the issue however currently there is no workaround for this. All of the resources added to a CodeStar project currently write to the IAM policies for Owners, Contributors, and Viewers. IAM has a limit of 5k chars on policies so once you hit that limit your policies will fail to create/update.

Hope that clears up your question.

Cheers,
Alexander"
AWS CodeStar	"Re: IAM policy size limit
Hi Alexander,
can you expand on this please? I have a CodeStar project template that has 9 resources; 2 apis, 6 lambdas, and one dynamodb. I am only able to get the deploy to run when I scale it down to 7 or less of these resources. I have deleted all experimental/old roles, policies, stacks etc.  but the deploy still fails. What is creating the policy that goes over the 5k limit? And how can I fix it? This is a small project, so I'm not sure what I am doing wrong.
thanks,
Ken"
AWS CodeStar	"Re: IAM policy size limit
Hi,
We are facing similar issue. I have temporarily found a solution by renaming by lamba function to shorter names, but I am expecting we will soon face the issue again.

Is there any update on this?"
AWS CodeStar	"Re: IAM policy size limit
Hi Alexander,
I think this problem is serious.
I have a CodeStar project that has stopped working because I have added a new lambda function that has caused the policy to exceed the 5k limit.
I can not modify the policy to reduce the size of characters, because it is regenerated in each new deployment. Therefore I have a project in production that I can not evolve.
The solution proposed by navi26, as he says, does not work in the medium term either.

Do you have a solution for this problem?

Thanks,
Franki

Edited by: FrankiSans on Jul 11, 2018 4:23 AM"
AWS CodeStar	"Re: IAM policy size limit
Hello,

Thank you for reaching out. We have optimized the IAM managed policies that AWS CodeStar generates for project team members, and you will no longer run into policy size limits when adding new Lambda functions to your AWS CodeStar project. 


Thanks,
Ashwin"
AWS CodeStar	"CodeStar Laravel
How can I update Laravel to 5.6. It feels wrong to start working on 5.3 where I cant get webpack to work.

Anyone knows?

Kindly"
AWS CodeStar	"Re: CodeStar Laravel
Solved!"
AWS CodeStar	"What is *sed -i -e* command in buildspec.ylm?
Hi,

I created a serverless node.js project using codestar. My code need to have access to the files inside a folder that I created manually through Cloud9. I pushed my project to the CodeCommit and confirmed that my folder is added to the S3 bucket too. But somehow I can't have access to the files(some images) from my code. I think I have to add something to the command below with the path to the folder.
- sed -i -e ""s|assets/|$WEBSITE_S3_PREFIX/public/assets/|g"" public/index.html

I tried this but it didn't work.
- sed -i -e ""s|assets/|$WEBSITE_S3_PREFIX/public/assets/|g"" public/assets/img/image01.png


Edited by: atry on Jun 19, 2018 5:23 PM"
AWS CodeStar	"Re: What is *sed -i -e* command in buildspec.ylm?
Hi atry,

sed is a text processing tool. That line in your buildspec will search for every occurrence of ""assets/"" in the index.html file, and replace it with the full path to the folder in the S3 bucket after the assets have been uploaded to S3 in the previous step. Afterwards, when your updated Lambda is deployed, requests will serve the assets from S3.

The line you attempted to change it to is not quite correct, as it's trying to tell sed to search and replace in the image01.png file.

You shouldn't have to touch that line if your assets are stored in ""public/assets/"", you only have to put the correct path in your html file. Without seeing your code I cannot give you specific instructions, but you can use the pre-existing ""tweet.svg"" as an example. So, you should be able to use something like

<img src=""assets/img/image01.png"" />


I hope that helps.

Efe"
AWS CodeStar	"Re: What is *sed -i -e* command in buildspec.ylm?
Hi Efe, 
Thank you for your answer. The problem is that I didn't define the path in my html file. The images that I defined in my html are working. I use img.setAttribute(""src"", ""assets/img/agent.png"")
 in my javascript file. This doesn't work. I tried with different paths but still have no access. This shouldn't be a problem but It just doesn't work!!!!
Thank-you in advance

Edited by: atry on Jul 12, 2018 7:12 PM"
AWS CodeStar	"Re: What is *sed -i -e* command in buildspec.ylm?
Hi atry,

Since sed is only performing the text replacement in the index.html file, the paths in your javascript won't be correct. You have a few options:


Perform the same string substitution in your javascript file(s)
Hardcode your S3 bucket endpoint and build the URLs yourself in your javascript
Create a placeholder <meta> tag in your HTML and use the same ""sed"" mechanism to replace the content with your S3 bucket at build time. Then in your javascript, read the value of that S3 bucket and dynamically build the paths to your images


This is not something specific to CodeStar or how we configure your projects, but rather building out a web application.

Efe"
AWS CodeStar	"Amazon Cognito and Amazon Connect integration
Hi,

I'm using Amazon Cognito user pool as my IdP in my serverless web application. Also I have a embedded Amazon connect CCP in my page that I want it to start working after successful login. I know that Amazon Connect provided SAML for its instances recently. Link:https://docs.aws.amazon.com/connect/latest/adminguide/configure-saml.html
I could connect to CCP when I used Auth0 as my Idp. Is it possible to do the same thing using Amazon Cognito user pool too? Also Can I use this with embedded CCP ?
Thank-you in advance

Edited by: atry on Jul 12, 2018 8:05 PM"
AWS CodeStar	"Re: Amazon Cognito and Amazon Connect integration
Hi atry,

Since your questions seem to be more about using Connect and Cognito, you'll find better luck on the Amazon Connect[0] or Amazon Cognito[1] forums.

Efe

[0] https://forums.aws.amazon.com/forum.jspa?forumID=249
[1] https://forums.aws.amazon.com/forum.jspa?forumID=173"
AWS CodeStar	"I need an ecommerce app clone
I have very little technical experience and I need a mobile app clone.  The app will be used to sell clothing, so I want to have many users (sellers) who can photo and post the goods they are selling.  Seems very common and simple, but with zero experience it's harder than you think.  I am willing to barter my legal expertise for your coding expertise."
AWS CodeStar	"Add Custom Authorizer to my Codestar Project
Hi,

We're building a restful API with CodeStar and a lambda functions. We've added several resources (AWS::Serverless::Function) and that works pretty well. But we need to add a authorizer te secure our API so only customers can access their data. We've achieved this with a Custom Authorizer through the API Gateway Console. The problem is that when we redeploy our project we lose the Authorizer, so obviously we have to add the authorizer to the template.yml of our project. Now this is where we run into problems, we've managed to add the authorizer as a resource to our project, but to get that to work we need the RestApiId of our project. The only way we found out how to do this is by adding a API to the resources in the template and set the id to the restapiid of our authorizer. When we deploy the application cloudformation creates 2 API's, 1 with only the authorizer and the specified name and 1 with all our functions we've configured. 

So no we're wondering:
1. Do we have a option to resolve the name of the API in the template when its deployed so we can depend our authorizer on it? So we don't have to add another API to the template
2. How do we set the authorizer in our AWS::Serverless::Function?
3. Is this the right approach to do this?

With kind regards,
Tim"
AWS CodeStar	"Re: Add Custom Authorizer to my Codestar Project
After a few days of struggling I finally found the way to reference the restapiid:
      RestApiId:
        Ref: ServerlessRestApi

Still need to find out how to set the authorizer on the functions"
AWS CodeStar	"Web Application vs Web Service
When creating a codestar project, many templates mention being either a Web Application or a Web Service. The documentation is not very clear on the difference. What is the difference between the two?"
AWS CodeStar	"Re: Web Application vs Web Service
Thank you for your question and for your feedback on the user documentation. Here is a quick summary of the differences between the two:

•    A web service’s tasks, such as calling APIs, run in the background. After AWS CodeStar creates your sample web service project, you can click on the endpoint URL and see a basic Hello World output online, but the code’s primary use is not as an interface.
•    A web application features more of a User Interface (UI) or web page functionality. After AWS CodeStar creates your sample web application project, you can click on the endpoint URL and see an interactive web application online.

Your question is similar to other questions we have received on this topic, so we are working to update the documentation to better describe the difference between these project options.
Thank you again for helping us to improve the AWS CodeStar documentation.

Best regards,

Darla-AWS"
AWS CodeStar	"Re: Web Application vs Web Service
There's documentation now regarding this available here - https://docs.aws.amazon.com/codestar/latest/userguide/templates.html#templates-webapps

Cheers, 
Ashwin"
AWS CodeStar	"Codestar support for federated users
Are there plans to support federated users for CodeStar? It's pretty inconvenient that I have to implement a completely separate identity strategy just for this one service.

Thanks.
--@wb"
AWS CodeStar	"Re: Codestar support for federated users
Hello,

Thank you for your question. AWS CodeStar has now launched support for federated users. You can sign in, access tools, and create projects using your federated user role. See these sections of the AWS CodeStar User Guide for more information: 
•	https://docs.aws.amazon.com/codestar/latest/userguide/setting-up.html#setting-up-user
•	https://docs.aws.amazon.com/codestar/latest/userguide/access-permissions.html#access-permissions-federated

Thank you,

Darla-AWS"
AWS CodeStar	"How to release code to Stage and Prod endpoints separately?
Hi. I have gone through the starter documentation and setup a serveless node.js application. Works well. I can hit the https://xxxx.execute-api.us-west-2.amazonaws.com/Prod and see the app. I can also hit the same url /Stage and that also works. 

I would like to know how to commit code only to the Stage endpoint (obviously for testing/staging) and then deploy those changes through to the Prod endpoint once tested. (Ideally I would love to simply create a branch to deploy to the different endpoint, and simply merge in accepted changes to the master branch to deploy to Prod).

Is there a way to attach domain names to these endpoints too?

Thanks in advance. Matt."
AWS CodeStar	"Re: How to release code to Stage and Prod endpoints separately?
I am interested in the best practices around using /Stage and /Prod as well.  When new source code is pushed the build pipeline is run and new source code is executed by the lambda function.  The same lambda function is linked to both the Prod and Stage stages.  There is a related blog: https://aws.amazon.com/blogs/compute/using-api-gateway-stage-variables-to-manage-lambda-functions/

The answer to the second question: ""Is there a way to attach domain names to these endpoints too"" is through the API Gateway.   In the ""Custom Domain Names"" menu item on the left you can add the domain information and then map it to an API and stage."
AWS CodeStar	"Re: How to release code to Stage and Prod endpoints separately?
Hey there,

I understand what you're asking about separate deployment to specific API Gateway stages/endpoints. An implementation with similar functionality did surface which involved creating a new CloudFormation stack (and API Gateway) for each CodePipeline deployment stage.

The steps to achieve the above implementation are:
1. Create a new CodePipeline stage which will be deploying your ""test"" code.
2. Add the GenerateChangeSet and ExecuteChangeSet actions. You can use the default 'Deploy' stage actions as examples. 
3. You will want to change the stack name so that the ChangeSet creates a new stack and doesn't overwrite the existing stack from the 'Deploy' stage.
4. Create a new role and copy the CodePipeline worker role for this project but replace the CloudFormation ARN for the existing Lambda stack with the ARN of the new stack you will be creating for this new CodePipeline stage.
5. Use this new role in the GenerateChangeSet action.
I would suggest you add an approval step so that you can make sure a change stops from moving past a certain stage until approved by you. 

You should now be able to push a code change and it will deploy to the API Gateway urls for each stage that it gets to. The url will still show https://<APIGateway identifier>/Prod
but it will be a different url than in your 'Deploy' stage.

Pointing out that at this time the Application Endpoints and CodePipeline tiles in AWS CodeStar don't support multiple endpoints in a single project.

Here's a few resources that might be relevant to how to achieve the specific implementation that you were asking about:
https://aws.amazon.com/blogs/compute/continuous-deployment-for-serverless-applications/
https://github.com/awslabs/serverless-application-model/blob/master/versions/2016-10-31.md

Cheers,
Alexander"
AWS CodeStar	"Re: How to release code to Stage and Prod endpoints separately?
Hi Alexander,

About the steps you suggested, CodeStar seems not to create another appropriate ""LambdaTrustRole"" for the additional testing CloudFormation stack.  As the result, the lambda functions in this testing stack do not have corresponding permissions to interact with other resources defined in template.

Do you have any advices on this issue ?

Thanks!
Sam Lo"
AWS CodeStar	"Re: How to release code to Stage and Prod endpoints separately?
I too have been struggling (https://stackoverflow.com/questions/45028192/how-to-add-a-manual-deploy-to-prod-step-to-codestar-lambda-express) with this exact same use-case, which I don't think is particularly unusual. Perhaps it would be wise for AWS to create a template with the ability to deploy to staging and then manually authorize a push to production? At least it would be a more 'complete' template, one which most users I feel would want to follow anyway!"
AWS CodeStar	"Re: How to release code to Stage and Prod endpoints separately?
Anyone got any updates on this issue? Thanks"
AWS CodeStar	"Re: How to release code to Stage and Prod endpoints separately?
I wonder if there is such a template now. thanks!"
AWS CodeStar	"Replace EC2 instance of my CodeStar project
I connected my EC2 instance from ssh and tried things. Things got worse, and i wanted to start over with a fresh new instance.

I terminated the original one, and created a new Amazon Linux AMI instance.
I noticed there was a Tag required for my AWS CodeDeploy to recognize my new instance as a candidate for deployment (Environment).

However, the deploy step fail (Error code: HEALTH_CONSTRAINTS).
Looking at my instance, everything seems fine, Status Check is okay, System Log indicated nothing usefull...

This is the second time i messed things. What i did last time i starting a new CodeStar project with the same sources. But i wish i could understand what's going on, so i could later add load balancing and scaling."
AWS CodeStar	"AWS Integration with Bitbucket?
Can we please get CodeStar integration with BitBucket like you have GitHub?"
AWS CodeStar	"Re: AWS Integration with Bitbucket?
Hi there,

Thank you for the feedback, i'll happily pass it along to the team.

Doug"
AWS CodeStar	"Re: AWS Integration with Bitbucket?
+1 Bitbucket support would be very welcome.."
AWS CodeStar	"Re: AWS Integration with Bitbucket?
another +1 !"
AWS CodeStar	"Re: AWS Integration with Bitbucket?
+1"
AWS CodeStar	"Re: AWS Integration with Bitbucket?
thoughts?"
AWS CodeStar	"How to change the ""LambdaTrustRole""?
Hello there!

I just started with the Node.js example (Node.js + Lambda).

First I downloaded the example folder.
Then I added a new DynamoDB table and another Lambda function (which makes PUTs to the DynamoDB table) to the template.yml.
After I commit the template.yml to the repository, it got automatically and successful built. 
But when trying to execute the function I get an error. This error is caused by wrong permissions in the lambda executing role (No access to the DynamoDB table).

I only can see that a ""LambdaTrustRole"" is referenced, but don't know how, or were to edit it. So my questions:
Where should I define the lambda execution role?
Where is the content of ""LambdaTrustRole"" defined?

Thanks in advance,
Vincent.

Edited by: ConVinceT on Apr 21, 2017 4:04 AM"
AWS CodeStar	"Re: How to change the ""LambdaTrustRole""?
Hello Vincent,

The lambda execution role is assigned when you create the function using ""aws lambda create-function"" call. If you could share the document you followed and the resource details in question as a Private Message happy to investigate this for you.

You can also see the complete command line here in our documentation:
http://docs.aws.amazon.com/lambda/latest/dg/with-dynamodb-create-function.html

Thanks,
Dilip Sant"
AWS CodeStar	"Re: How to change the ""LambdaTrustRole""?
Hi Vincent,

AWS CodeStar has identified an issue with our resource processing when templates are updated. We've made the correction in our service and fixed your project so that your role will now have permission to the resources you added in template.yml.

When you use a lambda project template in AWS CodeStar you do not need to define your lambda execution role. The content of this role is defined in your AWS CodeStar project stack. You can view the stack by going to the project page and clicking on the AWS CloudFormation ARN.

AWS CodeStar will update your execution role with the permissions needed for the resources you add to the template.yml file in your AWS CodeCommit repsository. 

Cheers
Luis Arias"
AWS CodeStar	"Re: How to change the ""LambdaTrustRole""?
Hi Luis,

I'm in the same situation, but my lambda also needs to be allowed to perform the ses:SendEmail action.

I'm not sure that there's a resource I add to my template.yml that would tell the CodeStar logic to add ses:* actions to the lambda execution role.

I also failed to find a way to merge Policies with a the role CodeStar builds for you-- it seemed to default to the LambdaTrustRole at the exclusion of my Policies (commented out below).

I even tried copying the full role definition into a role I created manually and pasted the ARN there below as well, which caused the project to fail to deploy ""Action execution failed
Failed to execute change set. Current stack status: UPDATE_ROLLBACK_COMPLETE. Reason: No reason was provided.""

Is there an elegant solution? If not, is there even a hacky solution here?

Thanks,
John

Resources:
  PostSMSForwarder:
    Type: AWS::Serverless::Function
    Properties:
      Handler: index.post
      Runtime: nodejs8.10
      #Policies: AmazonSESFullAccess
      #Policies:
      #  - PolicyName: SMSForwarderSendEmailPolicy
      #    PolicyDocument:
      #      Version: 2012-10-17
      #      Statement:
      #        - Action:
      #            - 'ses:SendEmail'
      #          Resource: '*'
      #          Effect: Allow
      Role: arn:aws:iam::99258xxxx582:role/Custom-sms-forwarder-Lambda
      #Role:
      #  Fn::ImportValue:
      #    !Join ['-', [!Ref 'ProjectId', !Ref 'AWS::Region', 'LambdaTrustRole']]
      Events:
        GetEvent:
          Type: Api
          Properties:
            Path: / 
            Method: post"
AWS CodeStar	"Re: How to change the ""LambdaTrustRole""?
I eventually got this to work by putting Policies: AFTER Role:.

Not sure if this is the right way to go, but others with this issue might try that.

Resources:
  PostSMSForwarder:
    Type: AWS::Serverless::Function
    Properties:
      Handler: index.post
      Runtime: nodejs8.10
      #Policies:
      #  - PolicyName: SMSForwarderSendEmailPolicy
      #    PolicyDocument:
      #      Version: 2012-10-17
      #      Statement:
      #        - Action:
      #            - 'ses:SendEmail'
      #          Resource: '*'
      #          Effect: Allow
      #Role: arn:aws:iam::99258xxxx582:role/Custom-sms-forwarder-Lambda
      Role:
        Fn::ImportValue:
          !Join ['-', [!Ref 'ProjectId', !Ref 'AWS::Region', 'LambdaTrustRole']]
      Policies: AmazonSESFullAccess
      Events:
        GetEvent:
          Type: Api
          Properties:
            Path: / 
            Method: post"
AWS CodeStar	"Codestar pipeline successful but none of my files are in my ec2 instance
Hello,

I am new to AWS,
and am working on an Express app using codestar.

I've just spent a lot of time figuring out how codestar works.

For the past 12 hours I have encountered a 502 bad gateway error on my deployed site.
So after going through these forums and stackoverflow, i figured out that since my ""npm start"" is working well, the files are probably not deployed well.

After setting up SSH into the EC2 instance, this hypothesis turned out to be true. I got it to work after manually uploading the Zip file of my project into elastic beanstalk.

1- The pipeline deployment had to be working because the nodejs-logs show that settings in my package.json file is properly set
2-But, the files i found in the built ec2 instance is probably the original nodejs one, and were not over written at all.
3- it was not on autoscaling, if that matters

How can I configure the codestar such that the pipeline can work properly from github to the EB instance? Is there a known issue and solution for this?

Thanks!"
AWS CodeStar	"Cannot add tag to S3 Bucket created by CodeStar
1. Create a CodeStar project using a Node Lambda template
2. Go to the S3 bucket > properties > tags
3. Add a tag and click Save
4. It will prompt you with this: ""Your TagKey cannot be prefixed with aws:""
5. This is because CodeStar has created some tags already automatically that begin with aws:

What is the best approach? If I remove the tags added by CodeStar, will they just come back when CloudFormation sets up the project again the next time I push?"
AWS CodeStar	"Re: Cannot add tag to S3 Bucket created by CodeStar
Hello,

If you're seeing the error message ""Your TagKey cannot be prefixed with aws"", it refers to tags that are added when resources are created through CloudFormation. When using CloudFormation, in addition to any tags you define, CloudFormation automatically creates the following stack-level tags with the prefix aws::

aws:cloudformation:logical-id
aws:cloudformation:stack-id
aws:cloudformation:stack-name

When you attempt to add additional tags manually (via Tag Editor, Console or CLI) a PUT Bucket tagging call is made to PUT the updated tags, which include the current ones. Since the user is not allowed to add tags with ""aws:"" as the prefix of the key-name, the request fails as you have experienced in this case.

When you create a bucket through CloudFormation please use the stack to update the settings on the s3 bucket. You can take a look at the following document to see how you can do that:

AWS CloudFormation Tagging of Amazon S3 and Amazon RDS:
https://aws.amazon.com/blogs/aws/aws-cloudformation-tagging-of-amazon-s3-and-amazon-rds/

I hope this information is helpful."
AWS CodeStar	"RAILS WebApp (Default) no longer available.
Any idea why the Ruby on Rails default WebApp was removed from the CodeStar Projects?

Will it be available in the future? Only Ruby/Sinatra projects are listed.

Edited by: dawgonking on Mar 5, 2018 5:29 AM"
AWS CodeStar	"Re: RAILS WebApp (Default) no longer available.
The rails templates are there."
AWS CodeStar	"Re: RAILS WebApp (Default) no longer available.
Code deploy fails after April 9, 2018"
AWS CodeStar	"How to call codedeploy from cloudformation?
Hello,

I have started with the codestar java web service template. It creates a java app and deploys to EC2 using code deploy. I want to customise this to configure the deployment and supporting services. To start with I am trying to deploy the service with codedeploy via cloudformation. I have this template:

AWSTemplateFormatVersion: 2010-09-09
 
Resources:
    CodeDeployApplication:
      Type: 'AWS::CodeDeploy::Application'
      Properties:
        ComputePlatform: Server
 
    DeploymentGroup: 
      Type: ""AWS::CodeDeploy::DeploymentGroup""
      Properties: 
        ApplicationName: !Ref CodeDeployApplication
        ServiceRoleArn: !GetAtt CodeDeployServiceRole.Arn
 
    CodeDeployServiceRole:
      Type: ""AWS::IAM::Role""
      Properties: 
        ManagedPolicyArns:
          - ""arn:aws:iam::aws:policy/service-role/AWSCodeDeployRole""    
        AssumeRolePolicyDocument: 
          Version: ""2012-10-17""
          Statement: 
            - 
              Effect: ""Allow""
              Principal: 
                Service: 
                  - ""codedeploy.amazonaws.com""
              Action: 
                - ""sts:AssumeRole""


It works but I can not reference the S3 bucket that contains the build. So I tried to add:

AWSTemplateFormatVersion: 2010-09-09
Transform:
- AWS::CodeStar
 
Parameters:
  ProjectId:
    Type: String
    Description: CodeStar projectId used to associate new resources to team members
...


and in the build run:

...
- aws cloudformation package --template template.yml --s3-bucket $S3_BUCKET --output-template template-export.yml
...


(I also include the output file in the artifact file list)

Questions:
1. Is this the right approach generally - I aim to give the $S3_BUCKET to code deploy to deploy the app?
2. How do I reference the project S3 key?

Thanks
Neil

Edited by: neilbluett on Apr 10, 2018 9:02 AM"
AWS CodeStar	"No SSL support
Hi,

I see that the endpoint generated in the AWS CodeStar project has no SSL support. Now that most web api call backs require https URL, this limitation seems to defeat the very pupose of CodeStar.

Also since the endpoints cannot be edited, I guess having a custom domain wouldn't help either as in the case of generic EC2.

Is the lack of https support temporary or can we expect https endpoint to be soon featured ?"
AWS CodeStar	"Re: No SSL support
Since there is no reply from the AWS staff on this, I will try to help with my experience.

I was able to implement SSL for codestar endpoint by totally ignoring that endpoint and implementing custom https endpoint via Elastic load balancer .

It would be much easier if AWS provided https by default for codestar endpoints or at least easier configuration for existing endpoints."
AWS CodeStar	"Re: No SSL support
Hey there,

While the application endpoint shown in the tile cannot be edited you can certainly modify your deployment environments manually to support SSL. However, the endpoint shown in the tile will not reflect those changes. 

See: https://forums.aws.amazon.com/message.jspa?messageID=361027

I'll communicate your request about SSL support out of the box and the endpoint not being editable to the team.

Cheers,
Alexander"
AWS CodeStar	"Re: No SSL support
I found a page that describes how to install a certificate (https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https-elb.html). However when I navigate to the elastic beanstalk configuration page under load balancer it says ""This configuration does not contain a Classic Load Balancer."" so there doesn't seem to be a way to accomplish this.

Come July this will become a significant issue when Chrome starts flagging sites that do not have SSL (https://www.theregister.co.uk/2018/02/08/google_chrome_http_shame/)."
AWS CodeStar	"Re: No SSL support
Actually I've figured out that you can change the environment to ""load balanced"" under the capacity settings at which point the load balancer configuration shows up.  You can then create a certificate under AWS certificate manager and assign it to the load balancer.  Once you've completed this, your site will now have https capability.

At least this worked for me, your mileage may vary."
AWS CodeStar	"Use AWS CodeStar with an existing repository
Hi,

Is there any way to connect existing AWS CodeCommit or Github repository to AWS CodeStar instead of creating new project .
Please let me know if we can connect with existing repo.

Thanks in advance!

Edited by: PriyaRani on Mar 8, 2018 2:51 AM"
AWS CodeStar	"Specifications AWS Code Star
Hi, please i need know what are the specification (PaaS) if i request an instance with AWS Code Star. I mean what operative system? if AWS Code Star run over a application server specific?"
AWS CodeStar	"Re: Specifications AWS Code Star
This page should list what you need: https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/concepts.platforms.html

The operating system is: 64bit Amazon Linux 2017.09 v2.4.5"
AWS CodeStar	"Can't install node module puppeteer
I'm not sure what is special about this package but it does not seem to want to install on my system.  I have an .ebextension with the following commands:
$ cat .ebextensions/01_node.config
container_commands:
    01_run_npm_install:
        command: cd frontend && env PATH=""$PATH:$NODE_HOME/bin"" npm install
    02_run_npm_build:
        command: cd frontend && env PATH=""$PATH:$NODE_HOME/bin"" npm run build

This was working flawlessly until I installed a package called react-snap that has puppeteer as a dependency.  Now the deploy is failing with the following error:
[2018-02-24T12:51:53.505Z] INFO  [28314] - [Application update code-pipeline-1519476683298-1b747314d3985eb5fbe1f870395a439758bb90c9@76/AppDeployStage0/EbExtensionPostBuild/In
fra-EmbeddedPostBuild/postbuild_0_zolmokapp/Command 01_run_npm_install] : Starting activity...                                                                       
[2018-02-24T12:52:13.363Z] INFO  [28314] - [Application update code-pipeline-1519476683298-1b747314d3985eb5fbe1f870395a439758bb90c9@76/AppDeployStage0/EbExtensionPostBuild/In
fra-EmbeddedPostBuild/postbuild_0_zolmokapp/Command 01_run_npm_install] : Activity execution failed, because:
<div class=""jive-quote"">puppeteer@1.1.1 install /tmp/deployment/application/frontend/node_modules/puppeteer
node install.js</div>
 
  ERROR: Failed to download Chromium r536395! Set ""PUPPETEER_SKIP_CHROMIUM_DOWNLOAD"" env variable to skip download.
  { Error: EACCES: permission denied, mkdir '/tmp/deployment/application/frontend/node_modules/puppeteer/.local-chromium'
  errno: -13,
  code: 'EACCES',
  syscall: 'mkdir',
  path: '/tmp/deployment/application/frontend/node_modules/puppeteer/.local-chromium' }
  npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.2 (node_modules/fsevents):
  npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.2: wanted {""os"":""darwin"",""arch"":""any""} (current: {""os"":""linux"",""arch"":""x64""})

This morning I noticed there was a new Amazon Linux configuration so I upgraded to that (v4.4.5), still no luck 
I also have the node version set to 8.9.3.
Any ideas?

Edited by: larksoftware on Feb 24, 2018 5:19 AM"
AWS CodeStar	"Cannot Delete CodeStar Project
I've been creating and deleting code star projects to get a feel for how it all works. The last one I tried to create (using a previously deleted name) failed with the error, ""We failed to create the AWS CodeStar project. The AWS CloudFormation stack returned the following error message: S3Bucket... already exists""

On it's own this isn't a problem, I'd just delete it and create a new project, however, when I try and delete it, it just re-appears next time I look at my projects. What can I do to remove it?"
AWS CodeStar	"Re: Cannot Delete CodeStar Project
I think I've managed to delete everything manually now."
AWS CodeStar	"Connect, import, copy, or move existing aws cloud9 project to Codestar?
Is it possible to connect, import, copy, or move existing aws cloud9 project to Codestar? 

I have first started with a AWS Cloud9 project on the IDE itself. Now I would love to deploy the app. Is it possible to connect, import, copy, or move existing aws cloud9 project to codestar? 

Or is there any other - better way to deploy cloud9 app to production on AWS?

Thanks!"
AWS CodeStar	".ebextensions not applying in a vanilla CodeStar
I must be doing something stupid but...
I cannot get my .ebextensions configs to apply in a vanilla codestar - the files seem to simply not be picked up.  The only way I can get anything to happen is by adding .ebextensions to the buildspec.yml in the artifacts -> files path, which seems totally wrong (and in fact breaks my tomcat deployment such that no routes get mapped - which I don't actually understand yet either, but anyway, soldiering on...).
The way I have tested this is by adding .ebextensions/storage.config, in which I declare an s3 bucket to create.  If I do this in the vanilla setup, nothing happens.  If I add .ebextensions to buildspec.yml, it works.
Help please!"
AWS CodeStar	"Re: .ebextensions not applying in a vanilla CodeStar
Would you post the contents of storage.config?"
AWS CodeStar	"Is it possible to modify the build?
I've created a Python Django project.  For the frontend I would like to use npm modules.  This means I need to do an ""npm install"" under the ui directory where I've put the frontend project.  I looked at the pipeline and it seems like I could add a build step in there.  I tried to add a CodeBuild step.  I created a CodeBuild project that I think would run npm install and output them to an s3 bucket.  I can reference the CodeBuild step back in the pipeline by choosing ""build provider"" and selecting ""AWS CodeBuild"".  However the remaining options input and output artifacts.  My only choice under input is my code repository.  The documentation for ""artifact input"" says it must match exactly the output of the previous step so I guess that makes sense.  Maybe I'm missing something but I'm just not seeing enough options to do what I need...any ideas?

Secondly installing node modules assumes that npm is even available in the image, if its not there by some chance is it possible to update the elastic beanstalk configuration with a different image?"
AWS CodeStar	"Re: Is it possible to modify the build?
I figured this out.  The answer is yes you can.

I found a great document on how to customize an elastic beanstalk environment here: https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html"
AWS CodeStar	"Elastic Beanstalk is not deploying in the correct order
I found a great document on how to customize an elastic beanstalk environment here: https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html  It states the following:

Container commands are run from the staging directory, where your source code is extracted prior to being deployed to the application server. Any changes you make to your source code in the staging directory with a container command will be included when the source is deployed to its final location.

This is exactly what I'd like to have happen, but that's not whats happening on my instance.  I created a Django Elastic Beanstalk CodeStar project and I've debugged enough to learn that the staging directory should be  /opt/python/ondeck/app/ui

I created the following script:

commands:
    01_get_node_rpm:
        command: sudo curl -sL https://rpm.nodesource.com/setup_8.x | bash -
    02_install_utils:
        command: yum install nodejs gcc-c++ make -y
    03_pwd:
        command: cd /opt/python && ls
    04_pwd:
        command: cd /opt/python/ondeck && ls


Step 01 works great.
Step 02 works great.
Step 03 works great.
Step 04 fails because ondeck does not exist:

Command failed on instance. Return code: 1 Output: /bin/sh: line 0: cd: /opt/python/ondeck: No such file or directory. command 04_pwd in .ebextensions/packages.config failed.

I traced out what's happening in the log file /var/log/eb-activity.log

I'm going to cut out the irelevant pieces and put the output in chronological order to conserve space:

Command 01_install_curl] : Completed activity. Result:
Command 02_install_utils] : Completed activity. Result:
Command 03_run_npm_install] : Completed activity. Result:
Command 04_pwd] : Activity execution failed, because: /bin/sh: line 0: cd: /opt/python/ondeck: No such file or directory

It poops out here due to the error.
However, if I fix the offending command a successful run looks like this:

Command 01_install_curl] : Completed activity. Result:
Command 02_install_utils] : Completed activity. Result:
Command 03_run_npm_install] : Completed activity. Result:
Command 01_update_ssh_access] : Completed activity. Result:
01_configure_xray.sh] : Completed activity.
01new.py] : Completed activity.
02unzip.py] : Completed activity. Result:
03deploy.py] : Completed activity. Result:

The first 3 commands are mine from my .ebextensions directory.  But notice the last 2, 02unzip and 03deploy.  According to the docs, if I'm understanding correctly, thats where container commands are supposed to run, after 02unzip and before 03deploy.  When 02unzip runs the /opt/python/ondeck/app directory gets created.  You'll notice thats way after my stuff runs.

Any idea whats going on?

What I would like to do is do an `npm install` inside the unzipped staged source repository.  But I can't because that doesn't happen until my script runs 

Edited by: larksoftware on Jan 19, 2018 5:42 PM (removed duplicate line)"
AWS CodeStar	"Re: Elastic Beanstalk is not deploying in the correct order (SOLVED)
I figured out what my problem was...I didn't read the documentation clearly.  There are 2 similar keys:

commands: execute commands on the EC2 instance
Apparently this happens early on, this was the key I was using for everything.  This key is fine for the yum install stuff.

container_commands: execute commands that affect your application source code
This is the documentation I was reading, but I had my commands under the ""commands"" key when they needed to be under this one, the ""container_commands"" key.

Once I made this change everything went to work as expected."
AWS CodeStar	"Cloud9 - multiple user accounts on Linux server in an academic setup
I teach about 50 students in a course that uses a complex GUI tool running on a Linux server. Each of the students have their own logins on the server. I am looking at the Cloud9 architecture as a light weight replacement for the GUI tool that has the advantage of running from a browser. I can see how to set it up for a single user. However, it looks a little complicated to set it up for 50 users within a single AWS account - with each user having their own unique environment in order to access their logins on the Linux server.
This application is different from a non-academic set up, as typically each student's work would be private and not shared with other students.
It appears that I would have to manually:
a) create 50 new users in my AWS account and set up the group administration that goes with it
b) set up their ~/.c9 paths on the Linux server (I think I can automate from the server side if they all can be copied from the same template)
c) copy and paste ssh keys for each student into their authorized key file (this I don't immediately see how to automate)
Am I missing anything? Is there another approach - or would this be the best practice for this (academic) use?
Thanks in advance for your help."
AWS CodeStar	"Re: Cloud9 - multiple user accounts on Linux server in an academic setup
Great use case.

I would do this with a looping script.

Here is the aws cli for IAM to create the 50 users: https://docs.aws.amazon.com/cli/latest/reference/iam/index.html

Here is the aws cli for cloud9, to create the environments: https://docs.aws.amazon.com/cli/latest/reference/cloud9/index.html

Richard"
AWS CodeStar	"AWS CodeStar does not update the code
Hello,
I have just started to use AWS CodeStar few days ago, with a NodeJs-Express project. When i created the project, a github repository was created by AWS with some very basic Express template server. The code was placed in a server.js file and when I have tested it worked fine, displaying the a small message in  the browser.

On the AWS server the location of the project is in a folder called express-service, where the server.js file resides together with node_modules server and package.json file.

I have also a local repo on my computer where I make changes that I push them to the github repository from which are loaded by AWS CodeStar.

However, when I have started to change the project by adding a public folder with a basic index.html file and some bootstrap files, and using the express.static function for serving static files, it seems that AWS Code Star does not upload the newly created folder and files on the server.

Although on my local machine everything works fine i get ad 404 Error message when I am trying to run in the browser the endpoint of the application. 

The updated server.js file is located in the express-service folder on the server but the other resources (i.e. public folder with the .html and .css files)  are nowhere to be find. If I checked the S3 bucket related to AWS CodeStar project it shows that the files are stored in the bucket.

I do not understand why the updated server.js file is load on the server (in the express-service folder) but the other files are not.

Can anyone help me how to tackle this issue? At least some explanation how AWS CodeStar is supposed to upload on the server, newly created files.

Thanks!"
AWS CodeStar	"Re: AWS CodeStar does not update the code
Hi there,

Can you help us understand what AWS service you are running your Node.js application on? (EC2,EB,Lambda)

You may need to edit the buildspec to include the new files you've added to your build artifacts. If you can provide more details on the CodeStar package you're using to start your project off, I'd be happy to trial and help more 

Doug"
AWS CodeStar	"Is cloudwatch logs working with codestar?
Hi guys,

After launching code star application (node.js) on EC2, I failed to see any logs in the default cloud watch dashboard in codestar. I then manually integration cloudwatch agent and confirmed via  /var/log/awslogs.log that log events are being created locally but then again the logs are not seen in cloudwatch console.

It just says, ""No events found"" . 

Has anyone else had success with aws cloudwatch with codestar?"
AWS CodeStar	"Re: Is cloudwatch logs working with codestar?
It works with correction region selected in the URL of the console -

https://console.aws.amazon.com/cloudwatch/home?region=*us-east-1*

By deafault, the 'Amazon cloud watch details' in the 'Application Activity' section of the codestar points to the wrong region, So data is being shown there.

Let me know if someone is  able to see data in the 'Application Activity ' section."
AWS CodeStar	"Re: Is cloudwatch logs working with codestar?
Since the default cloud watch in codestar is not working . I will mark this un answered."
AWS CodeStar	"Re: Is cloudwatch logs working with codestar?
Hello.
I'm unable to replicate this issue. Would you send me a private message so we can investigate this?

Efe"
AWS CodeStar	"Re: Is cloudwatch logs working with codestar?
I've answered myself."
